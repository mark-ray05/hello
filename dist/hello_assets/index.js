/*! For license information please see index.js.LICENSE.txt */
(()=>{var t={531:(t,e,r)=>{"use strict";var n;r.d(e,{u:()=>n}),function(t){t[t.SysFatal=1]="SysFatal",t[t.SysTransient=2]="SysTransient",t[t.DestinationInvalid=3]="DestinationInvalid",t[t.CanisterReject=4]="CanisterReject",t[t.CanisterError=5]="CanisterError"}(n||(n={}))},26:(t,e,r)=>{"use strict";r.d(e,{p:()=>i});var n=r(313);class i extends n.e${constructor(t,e){super(t),this.response=e,this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}}},80:(t,e,r)=>{"use strict";r.d(e,{ZM:()=>u.ZM,i7:()=>Wt,t_:()=>Ht,bN:()=>qt});var n=r(543),i=r(313),s=r(6),o=r(774),a=r(257),c=r(753),u=r(538),f=r(244),h=r(26),l=r(583),d=r(472),p=r(359);const y=BigInt(2**32-1),g=BigInt(32);function b(t,e=!1){return e?{h:Number(t&y),l:Number(t>>g&y)}:{h:0|Number(t>>g&y),l:0|Number(t&y)}}const w={fromBig:b,split:function(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=b(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]},toBig:(t,e)=>BigInt(t>>>0)<<g|BigInt(e>>>0),shrSH:(t,e,r)=>t>>>r,shrSL:(t,e,r)=>t<<32-r|e>>>r,rotrSH:(t,e,r)=>t>>>r|e<<32-r,rotrSL:(t,e,r)=>t<<32-r|e>>>r,rotrBH:(t,e,r)=>t<<64-r|e>>>r-32,rotrBL:(t,e,r)=>t>>>r-32|e<<64-r,rotr32H:(t,e)=>e,rotr32L:(t,e)=>t,rotlSH:(t,e,r)=>t<<r|e>>>32-r,rotlSL:(t,e,r)=>e<<r|t>>>32-r,rotlBH:(t,e,r)=>e<<r-32|t>>>64-r,rotlBL:(t,e,r)=>t<<r-32|e>>>64-r,add:function(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:0|i}},add3L:(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),add3H:(t,e,r,n)=>e+r+n+(t/2**32|0)|0,add4L:(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),add4H:(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,add5H:(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,add5L:(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0)};var m=r(486);const[v,E]=(()=>w.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))))(),_=new Uint32Array(80),B=new Uint32Array(80);class I extends p.VR{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:n,Ch:i,Cl:s,Dh:o,Dl:a,Eh:c,El:u,Fh:f,Fl:h,Gh:l,Gl:d,Hh:p,Hl:y}=this;return[t,e,r,n,i,s,o,a,c,u,f,h,l,d,p,y]}set(t,e,r,n,i,s,o,a,c,u,f,h,l,d,p,y){this.Ah=0|t,this.Al=0|e,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|f,this.Fl=0|h,this.Gh=0|l,this.Gl=0|d,this.Hh=0|p,this.Hl=0|y}process(t,e){for(let r=0;r<16;r++,e+=4)_[r]=t.getUint32(e),B[r]=t.getUint32(e+=4);for(let t=16;t<80;t++){const e=0|_[t-15],r=0|B[t-15],n=w.rotrSH(e,r,1)^w.rotrSH(e,r,8)^w.shrSH(e,r,7),i=w.rotrSL(e,r,1)^w.rotrSL(e,r,8)^w.shrSL(e,r,7),s=0|_[t-2],o=0|B[t-2],a=w.rotrSH(s,o,19)^w.rotrBH(s,o,61)^w.shrSH(s,o,6),c=w.rotrSL(s,o,19)^w.rotrBL(s,o,61)^w.shrSL(s,o,6),u=w.add4L(i,c,B[t-7],B[t-16]),f=w.add4H(u,n,a,_[t-7],_[t-16]);_[t]=0|f,B[t]=0|u}let{Ah:r,Al:n,Bh:i,Bl:s,Ch:o,Cl:a,Dh:c,Dl:u,Eh:f,El:h,Fh:l,Fl:d,Gh:p,Gl:y,Hh:g,Hl:b}=this;for(let t=0;t<80;t++){const e=w.rotrSH(f,h,14)^w.rotrSH(f,h,18)^w.rotrBH(f,h,41),m=w.rotrSL(f,h,14)^w.rotrSL(f,h,18)^w.rotrBL(f,h,41),I=f&l^~f&p,T=h&d^~h&y,x=w.add5L(b,m,T,E[t],B[t]),A=w.add5H(x,g,e,I,v[t],_[t]),S=0|x,N=w.rotrSH(r,n,28)^w.rotrBH(r,n,34)^w.rotrBH(r,n,39),R=w.rotrSL(r,n,28)^w.rotrBL(r,n,34)^w.rotrBL(r,n,39),O=r&i^r&o^i&o,U=n&s^n&a^s&a;g=0|p,b=0|y,p=0|l,y=0|d,l=0|f,d=0|h,({h:f,l:h}=w.add(0|c,0|u,0|A,0|S)),c=0|o,u=0|a,o=0|i,a=0|s,i=0|r,s=0|n;const L=w.add3L(S,R,U);r=w.add3H(L,A,N,O),n=0|L}({h:r,l:n}=w.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:s}=w.add(0|this.Bh,0|this.Bl,0|i,0|s)),({h:o,l:a}=w.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l:u}=w.add(0|this.Dh,0|this.Dl,0|c,0|u)),({h:f,l:h}=w.add(0|this.Eh,0|this.El,0|f,0|h)),({h:l,l:d}=w.add(0|this.Fh,0|this.Fl,0|l,0|d)),({h:p,l:y}=w.add(0|this.Gh,0|this.Gl,0|p,0|y)),({h:g,l:b}=w.add(0|this.Hh,0|this.Hl,0|g,0|b)),this.set(r,n,i,s,o,a,c,u,f,h,l,d,p,y,g,b)}roundClean(){_.fill(0),B.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const T=(0,m.hE)((()=>new I));var x=r(10),A=r(525),S=r(499);const N=BigInt(0),R=BigInt(1),O=BigInt(2),U=BigInt(8),L={zip215:!0};function P(t){const e=function(t){const e=(0,x.Kd)(t);return S.validateObject(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}(t),{Fp:r,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,u=O<<BigInt(8*a)-R,f=r.create,h=(0,A.gN)(e.n,e.nBitLength),l=e.uvRatio||((t,e)=>{try{return{isValid:!0,value:r.sqrt(t*r.inv(e))}}catch(t){return{isValid:!1,value:N}}}),d=e.adjustScalarBytes||(t=>t),p=e.domain||((t,e,r)=>{if((0,S.abool)("phflag",r),e.length||r)throw new Error("Contexts/pre-hash are not supported");return t});function y(t,e){S.aInRange("coordinate "+t,e,N,u)}function g(t){if(!(t instanceof m))throw new Error("ExtendedPoint expected")}const b=(0,S.memoized)(((t,e)=>{const{ex:n,ey:i,ez:s}=t,o=t.is0();null==e&&(e=o?U:r.inv(s));const a=f(n*e),c=f(i*e),u=f(s*e);if(o)return{x:N,y:R};if(u!==R)throw new Error("invZ was invalid");return{x:a,y:c}})),w=(0,S.memoized)((t=>{const{a:r,d:n}=e;if(t.is0())throw new Error("bad point: ZERO");const{ex:i,ey:s,ez:o,et:a}=t,c=f(i*i),u=f(s*s),h=f(o*o),l=f(h*h),d=f(c*r);if(f(h*f(d+u))!==f(l+f(n*f(c*u))))throw new Error("bad point: equation left != right (1)");if(f(i*s)!==f(o*a))throw new Error("bad point: equation left != right (2)");return!0}));class m{constructor(t,e,r,n){this.ex=t,this.ey=e,this.ez=r,this.et=n,y("x",t),y("y",e),y("z",r),y("t",n),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(t){if(t instanceof m)throw new Error("extended point not allowed");const{x:e,y:r}=t||{};return y("x",e),y("y",r),new m(e,r,R,f(e*r))}static normalizeZ(t){const e=r.invertBatch(t.map((t=>t.ez)));return t.map(((t,r)=>t.toAffine(e[r]))).map(m.fromAffine)}static msm(t,e){return(0,x.D1)(m,h,t,e)}_setWindowSize(t){_.setWindowSize(this,t)}assertValidity(){w(this)}equals(t){g(t);const{ex:e,ey:r,ez:n}=this,{ex:i,ey:s,ez:o}=t,a=f(e*o),c=f(i*n),u=f(r*o),h=f(s*n);return a===c&&u===h}is0(){return this.equals(m.ZERO)}negate(){return new m(f(-this.ex),this.ey,this.ez,f(-this.et))}double(){const{a:t}=e,{ex:r,ey:n,ez:i}=this,s=f(r*r),o=f(n*n),a=f(O*f(i*i)),c=f(t*s),u=r+n,h=f(f(u*u)-s-o),l=c+o,d=l-a,p=c-o,y=f(h*d),g=f(l*p),b=f(h*p),w=f(d*l);return new m(y,g,w,b)}add(t){g(t);const{a:r,d:n}=e,{ex:i,ey:s,ez:o,et:a}=this,{ex:c,ey:u,ez:h,et:l}=t;if(r===BigInt(-1)){const t=f((s-i)*(u+c)),e=f((s+i)*(u-c)),r=f(e-t);if(r===N)return this.double();const n=f(o*O*l),d=f(a*O*h),p=d+n,y=e+t,g=d-n,b=f(p*r),w=f(y*g),v=f(p*g),E=f(r*y);return new m(b,w,E,v)}const d=f(i*c),p=f(s*u),y=f(a*n*l),b=f(o*h),w=f((i+s)*(c+u)-d-p),v=b-y,E=b+y,_=f(p-r*d),B=f(w*v),I=f(E*_),T=f(w*_),x=f(v*E);return new m(B,I,x,T)}subtract(t){return this.add(t.negate())}wNAF(t){return _.wNAFCached(this,t,m.normalizeZ)}multiply(t){const e=t;S.aInRange("scalar",e,R,n);const{p:r,f:i}=this.wNAF(e);return m.normalizeZ([r,i])[0]}multiplyUnsafe(t){const e=t;return S.aInRange("scalar",e,N,n),e===N?E:this.equals(E)||e===R?this:this.equals(v)?this.wNAF(e).p:_.unsafeLadder(this,e)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return _.unsafeLadder(this,n).is0()}toAffine(t){return b(this,t)}clearCofactor(){const{h:t}=e;return t===R?this:this.multiplyUnsafe(t)}static fromHex(t,n=!1){const{d:i,a:s}=e,o=r.BYTES;t=(0,S.ensureBytes)("pointHex",t,o),(0,S.abool)("zip215",n);const a=t.slice(),c=t[o-1];a[o-1]=-129&c;const h=S.bytesToNumberLE(a),d=n?u:r.ORDER;S.aInRange("pointHex.y",h,N,d);const p=f(h*h),y=f(p-R),g=f(i*p-s);let{isValid:b,value:w}=l(y,g);if(!b)throw new Error("Point.fromHex: invalid y coordinate");const v=(w&R)===R,E=0!=(128&c);if(!n&&w===N&&E)throw new Error("Point.fromHex: x=0 and x_0=1");return E!==v&&(w=f(-w)),m.fromAffine({x:w,y:h})}static fromPrivateKey(t){return T(t).point}toRawBytes(){const{x:t,y:e}=this.toAffine(),n=S.numberToBytesLE(e,r.BYTES);return n[n.length-1]|=t&R?128:0,n}toHex(){return S.bytesToHex(this.toRawBytes())}}m.BASE=new m(e.Gx,e.Gy,R,f(e.Gx*e.Gy)),m.ZERO=new m(N,R,R,N);const{BASE:v,ZERO:E}=m,_=(0,x.Mx)(m,8*a);function B(t){return(0,A.wQ)(t,n)}function I(t){return B(S.bytesToNumberLE(t))}function T(t){const e=a;t=(0,S.ensureBytes)("private key",t,e);const r=(0,S.ensureBytes)("hashed private key",s(t),2*e),n=d(r.slice(0,e)),i=r.slice(e,2*e),o=I(n),c=v.multiply(o),u=c.toRawBytes();return{head:n,prefix:i,scalar:o,point:c,pointBytes:u}}function P(t=new Uint8Array,...e){const r=S.concatBytes(...e);return I(s(p(r,(0,S.ensureBytes)("context",t),!!i)))}const F=L;v._setWindowSize(8);return{CURVE:e,getPublicKey:function(t){return T(t).pointBytes},sign:function(t,e,s={}){t=(0,S.ensureBytes)("message",t),i&&(t=i(t));const{prefix:o,scalar:c,pointBytes:u}=T(e),f=P(s.context,o,t),h=v.multiply(f).toRawBytes(),l=B(f+P(s.context,h,u,t)*c);S.aInRange("signature.s",l,N,n);const d=S.concatBytes(h,S.numberToBytesLE(l,r.BYTES));return(0,S.ensureBytes)("result",d,2*a)},verify:function(t,e,n,s=F){const{context:o,zip215:a}=s,c=r.BYTES;t=(0,S.ensureBytes)("signature",t,2*c),e=(0,S.ensureBytes)("message",e),void 0!==a&&(0,S.abool)("zip215",a),i&&(e=i(e));const u=S.bytesToNumberLE(t.slice(c,2*c));let f,h,l;try{f=m.fromHex(n,a),h=m.fromHex(t.slice(0,c),a),l=v.multiplyUnsafe(u)}catch(t){return!1}if(!a&&f.isSmallOrder())return!1;const d=P(o,h.toRawBytes(),f.toRawBytes(),e);return h.add(f.multiplyUnsafe(d)).subtract(l).clearCofactor().equals(m.ZERO)},ExtendedPoint:m,utils:{getExtendedPublicKey:T,randomPrivateKey:()=>o(r.BYTES),precompute:(t=8,e=m.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)}}}const F=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),k=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),j=(BigInt(0),BigInt(1)),$=BigInt(2),M=(BigInt(3),BigInt(5)),C=BigInt(8);function q(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=F,o=t*t%s*t%s,a=(0,A.oA)(o,$,s)*o%s,c=(0,A.oA)(a,j,s)*t%s,u=(0,A.oA)(c,M,s)*c%s,f=(0,A.oA)(u,e,s)*u%s,h=(0,A.oA)(f,r,s)*f%s,l=(0,A.oA)(h,n,s)*h%s,d=(0,A.oA)(l,i,s)*l%s,p=(0,A.oA)(d,i,s)*l%s,y=(0,A.oA)(p,e,s)*u%s;return{pow_p_5_8:(0,A.oA)(y,$,s)*t%s,b2:o}}function D(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function V(t,e){const r=F,n=(0,A.wQ)(e*e*e,r),i=q(t*(0,A.wQ)(n*n*e,r)).pow_p_5_8;let s=(0,A.wQ)(t*n*i,r);const o=(0,A.wQ)(e*s*s,r),a=s,c=(0,A.wQ)(s*k,r),u=o===t,f=o===(0,A.wQ)(-t,r),h=o===(0,A.wQ)(-t*k,r);return u&&(s=a),(f||h)&&(s=c),(0,A.Tu)(s,r)&&(s=(0,A.wQ)(-s,r)),{isValid:u||f,value:s}}const z=(()=>(0,A.gN)(F,void 0,!0))(),G=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:z,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:C,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:T,randomBytes:m.O6,adjustScalarBytes:D,uvRatio:V}))(),H=(()=>P(G))();var Z,K,W,Y,J=function(t,e,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(t,r):i?i.value=r:e.set(t,r),r},Q=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};class X{constructor(t={}){Z.set(this,void 0),K.set(this,void 0),this[W]=this.entries.bind(this),this[Y]="ExpirableMap";const{source:e=[],expirationTime:r=6e5}=t,n=Date.now();J(this,Z,new Map([...e].map((([t,e])=>[t,{value:e,timestamp:n}]))),"f"),J(this,K,r,"f")}prune(){const t=Date.now();for(const[e,r]of Q(this,Z,"f").entries())t-r.timestamp>Q(this,K,"f")&&Q(this,Z,"f").delete(e);return this}set(t,e){this.prune();const r={value:e,timestamp:Date.now()};return Q(this,Z,"f").set(t,r),this}get(t){const e=Q(this,Z,"f").get(t);if(void 0!==e){if(!(Date.now()-e.timestamp>Q(this,K,"f")))return e.value;Q(this,Z,"f").delete(t)}}clear(){Q(this,Z,"f").clear()}entries(){const t=Q(this,Z,"f").entries();return function*(){for(const[e,r]of t)yield[e,r.value]}()}values(){const t=Q(this,Z,"f").values();return function*(){for(const e of t)yield e.value}()}keys(){return Q(this,Z,"f").keys()}forEach(t,e){for(const[r,n]of Q(this,Z,"f").entries())t.call(e,n.value,r,this)}has(t){return Q(this,Z,"f").has(t)}delete(t){return Q(this,Z,"f").delete(t)}get size(){return Q(this,Z,"f").size}}Z=new WeakMap,K=new WeakMap,W=Symbol.iterator,Y=Symbol.toStringTag;var tt=r(696),et=r(16);class rt{constructor(){this.observers=[]}subscribe(t){this.observers.push(t)}unsubscribe(t){this.observers=this.observers.filter((e=>e!==t))}notify(t,...e){this.observers.forEach((r=>r(t,...e)))}}class nt extends rt{constructor(){super()}print(t,...e){this.notify({message:t,level:"info"},...e)}warn(t,...e){this.notify({message:t,level:"warn"},...e)}error(t,e,...r){this.notify({message:t,level:"error",error:e},...r)}}var it,st,ot,at,ct,ut,ft,ht,lt,dt=function(t,e,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(t,r):i?i.value=r:e.set(t,r),r},pt=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};const yt=.5,gt=1.5,bt=500,wt=6e4,mt=9e5,vt=10;class Et{constructor(t=Et.default){it.set(this,void 0),st.set(this,void 0),ot.set(this,void 0),at.set(this,void 0),ct.set(this,void 0),ut.set(this,void 0),ft.set(this,void 0),ht.set(this,void 0),lt.set(this,0);const{initialInterval:e=bt,randomizationFactor:r=yt,multiplier:n=gt,maxInterval:i=wt,maxElapsedTime:s=mt,maxIterations:o=vt,date:a=Date}=t;dt(this,it,e,"f"),dt(this,st,r,"f"),dt(this,ot,n,"f"),dt(this,at,i,"f"),dt(this,ht,a,"f"),dt(this,ct,a.now(),"f"),dt(this,ut,s,"f"),dt(this,ft,o,"f")}get ellapsedTimeInMsec(){return pt(this,ht,"f").now()-pt(this,ct,"f")}get currentInterval(){return pt(this,it,"f")}get count(){return pt(this,lt,"f")}get randomValueFromInterval(){const t=pt(this,st,"f")*pt(this,it,"f"),e=pt(this,it,"f")-t,r=pt(this,it,"f")+t;return Math.random()*(r-e)+e}incrementCurrentInterval(){var t;return dt(this,it,Math.min(pt(this,it,"f")*pt(this,ot,"f"),pt(this,at,"f")),"f"),dt(this,lt,(t=pt(this,lt,"f"),++t),"f"),pt(this,it,"f")}next(){return this.ellapsedTimeInMsec>=pt(this,ut,"f")||pt(this,lt,"f")>=pt(this,ft,"f")?null:(this.incrementCurrentInterval(),this.randomValueFromInterval)}}it=new WeakMap,st=new WeakMap,ot=new WeakMap,at=new WeakMap,ct=new WeakMap,ut=new WeakMap,ft=new WeakMap,ht=new WeakMap,lt=new WeakMap,Et.default={initialInterval:bt,randomizationFactor:yt,multiplier:gt,maxInterval:wt,maxElapsedTime:mt,maxIterations:vt,date:Date};var _t,Bt,It,Tt,xt,At,St,Nt,Rt,Ot,Ut,Lt,Pt,Ft,kt,jt,$t,Mt,Ct,qt,Dt=r(79),Vt=function(t,e,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(t,r):i?i.value=r:e.set(t,r),r},zt=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};!function(t){t.Received="received",t.Processing="processing",t.Replied="replied",t.Rejected="rejected",t.Unknown="unknown",t.Done="done"}(qt||(qt={}));const Gt=6e4,Ht="aaaaa-aa";class Zt extends i.e${constructor(t){super(t),this.message=t}}class Kt extends i.e${constructor(t){super(t),this.message=t}}class Wt{constructor(t={}){var e;_t.add(this),Bt.set(this,void 0),It.set(this,void 0),Tt.set(this,void 0),xt.set(this,void 0),At.set(this,0),St.set(this,void 0),Nt.set(this,!1),Rt.set(this,void 0),Ot.set(this,void 0),Ut.set(this,void 0),this._isAgent=!0,this.config={},Lt.set(this,0),this.log=new nt,Pt.set(this,[]),Ft.set(this,[]),kt.set(this,new X({expirationTime:3e5})),jt.set(this,!0),Ct.set(this,((t,e)=>{if(!1===zt(this,jt,"f"))return t;if(!e)throw new d.kt("Invalid signature from replica signed query: no matching node key found.");const{status:r,signatures:i=[],requestId:s}=t,o=(new TextEncoder).encode("\vic-response");for(const u of i){const{timestamp:i,identity:f}=u,h=n.R.fromUint8Array(f).toText();let l;if("replied"===r){const{reply:e}=t;l=(0,a.E$)({status:r,reply:e,timestamp:BigInt(i),request_id:s})}else{if("rejected"!==r)throw new Error(`Unknown status: ${r}`);{const{reject_code:e,reject_message:n,error_code:o}=t;l=(0,a.E$)({status:r,reject_code:e,reject_message:n,error_code:o,timestamp:BigInt(i),request_id:s})}}const p=(0,c.zo)(o,new Uint8Array(l)),y=null==e?void 0:e.nodeKeys.get(h);if(!y)throw new d.kt("Invalid signature from replica signed query: no matching node key found.");const g=tt.E.fromDer(y).rawKey;if(H.verify(u.signature,new Uint8Array(p),new Uint8Array(g)))return t;throw new d.kt(`Invalid signature from replica ${h} signed query.`)}return t})),this.config=t,Vt(this,It,t.fetch||function(){let t;if("undefined"!=typeof window){if(!window.fetch)throw new Zt("Fetch implementation was not available. You appear to be in a browser context, but window.fetch was not present.");t=window.fetch.bind(window)}else if(void 0!==r.g){if(!r.g.fetch)throw new Zt("Fetch implementation was not available. You appear to be in a Node.js context, but global.fetch was not available.");t=r.g.fetch.bind(r.g)}else"undefined"!=typeof self&&self.fetch&&(t=self.fetch.bind(self));if(t)return t;throw new Zt("Fetch implementation was not available. Please provide fetch to the HttpAgent constructor, or ensure it is available in the window or global context.")}()||fetch.bind(r.g),"f"),Vt(this,Tt,t.fetchOptions,"f"),Vt(this,xt,t.callOptions,"f"),this.rootKey=t.rootKey?t.rootKey:(0,c.H_)("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100814c0e6ec71fab583b08bd81373c255c3c371b2e84863c98a4f1e08b74235d14fb5d9c0cd546d9685f913a0c0b2cc5341583bf4b4392e467db96d65b9bb4cb717112f8472e0d5a4d14505ffd7484b01291091c5f87b98883463f98091a0baaae");const o=function(t){let e;if(void 0!==t)e=t.match(/^[a-z]+:/)||"undefined"==typeof window?new URL(t):new URL(window.location.protocol+"//"+t);else{const t=["ic0.app","icp0.io","127.0.0.1","localhost"],r=[".github.dev",".gitpod.io"],n="undefined"!=typeof window?window.location:void 0,i=null==n?void 0:n.hostname;let s;i&&"string"==typeof i&&(s=r.some((t=>i.endsWith(t)))?i:t.find((t=>i.endsWith(t)))),e=n&&s?new URL(`${n.protocol}//${s}${n.port?":"+n.port:""}`):new URL("https://icp-api.io")}return e.toString()}(t.host);this.host=new URL(o),void 0!==t.verifyQuerySignatures&&Vt(this,jt,t.verifyQuerySignatures,"f"),Vt(this,Rt,null!==(e=t.retryTimes)&&void 0!==e?e:3,"f");if(Vt(this,Ot,t.backoffStrategy||(()=>new Et({maxIterations:zt(this,Rt,"f")})),"f"),this.host.hostname.endsWith(".ic0.app")?this.host.hostname="ic0.app":this.host.hostname.endsWith(".icp0.io")?this.host.hostname="icp0.io":this.host.hostname.endsWith(".icp-api.io")&&(this.host.hostname="icp-api.io"),t.credentials){const{name:e,password:r}=t.credentials;Vt(this,St,`${e}${r?":"+r:""}`,"f")}if(Vt(this,Bt,Promise.resolve(t.identity||new s.ed),"f"),t.ingressExpiryInMinutes&&t.ingressExpiryInMinutes>5)throw new i.e$(`The maximum ingress expiry time is 5 minutes. Provided ingress expiry time is ${t.ingressExpiryInMinutes} minutes.`);if(t.ingressExpiryInMinutes&&t.ingressExpiryInMinutes<=0)throw new i.e$(`Ingress expiry time must be greater than 0. Provided ingress expiry time is ${t.ingressExpiryInMinutes} minutes.`);Vt(this,Ut,t.ingressExpiryInMinutes||5,"f"),this.addTransform("update",(0,u.z4)(f.s)),t.useQueryNonces&&this.addTransform("query",(0,u.z4)(f.s)),t.logToConsole&&this.log.subscribe((t=>{"error"===t.level?console.error(t.message):"warn"===t.level?console.warn(t.message):console.log(t.message)}))}get waterMark(){return zt(this,Lt,"f")}static createSync(t={}){return new this(Object.assign({},t))}static async create(t={shouldFetchRootKey:!1}){const e=Wt.createSync(t),r=[e.syncTime()];return"https://icp-api.io"!==e.host.toString()&&t.shouldFetchRootKey&&r.push(e.fetchRootKey()),await Promise.all(r),e}static async from(t){var e;try{return"config"in t?await Wt.create(t.config):await Wt.create({fetch:t._fetch,fetchOptions:t._fetchOptions,callOptions:t._callOptions,host:t._host.toString(),identity:null!==(e=t._identity)&&void 0!==e?e:void 0})}catch(t){throw new i.e$("Failed to create agent from provided agent")}}isLocal(){const t=this.host.hostname;return"127.0.0.1"===t||t.endsWith("127.0.0.1")}addTransform(t,e,r=e.priority||0){if("update"===t){const t=zt(this,Ft,"f").findIndex((t=>(t.priority||0)<r));zt(this,Ft,"f").splice(t>=0?t:zt(this,Ft,"f").length,0,Object.assign(e,{priority:r}))}else if("query"===t){const t=zt(this,Pt,"f").findIndex((t=>(t.priority||0)<r));zt(this,Pt,"f").splice(t>=0?t:zt(this,Pt,"f").length,0,Object.assign(e,{priority:r}))}}async getPrincipal(){if(!zt(this,Bt,"f"))throw new Kt("This identity has expired due this application's security policy. Please refresh your authentication.");return(await zt(this,Bt,"f")).getPrincipal()}async call(t,e,r){var i;const s=null===(i=e.callSync)||void 0===i||i,c=await(void 0!==r?await r:await zt(this,Bt,"f"));if(!c)throw new Kt("This identity has expired due this application's security policy. Please refresh your authentication.");const h=n.R.from(t),l=e.effectiveCanisterId?n.R.from(e.effectiveCanisterId):h,d=c.getPrincipal()||n.R.anonymous();let p=new u.ZM(zt(this,Ut,"f")*Gt);Math.abs(zt(this,At,"f"))>3e4&&(p=new u.ZM(zt(this,Ut,"f")*Gt+zt(this,At,"f")));const y={request_type:f.V.Call,canister_id:h,method_name:e.methodName,arg:e.arg,sender:d,ingress_expiry:p};let g=await this._transform({request:{body:null,method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},zt(this,St,"f")?{Authorization:"Basic "+btoa(zt(this,St,"f"))}:{})},endpoint:"call",body:y});const b=g.body.nonce?(w=g.body.nonce,new Uint8Array(w)):void 0;var w;y.nonce=b,g=await c.transformRequest(g);const m=o.cv(g.body),v=zt(this,Ot,"f").call(this);try{const t=()=>(this.log.print(`fetching "/api/v3/canister/${l.toText()}/call" with request:`,g),zt(this,It,"f").call(this,""+new URL(`/api/v3/canister/${l.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},zt(this,xt,"f")),g.request),{body:m}))),e=()=>(this.log.print(`fetching "/api/v2/canister/${l.toText()}/call" with request:`,g),zt(this,It,"f").call(this,""+new URL(`/api/v2/canister/${l.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},zt(this,xt,"f")),g.request),{body:m}))),r=zt(this,_t,"m",Mt).call(this,{request:s?t:e,backoff:v,tries:0}),[n,i]=await Promise.all([r,(0,a.vH)(y)]),c=await n.arrayBuffer(),f=200===n.status&&c.byteLength>0?o.Jx(c):null;if(f&&"certificate"in f){const t=await this.parseTimeFromResponse({certificate:f.certificate});Vt(this,Lt,t,"f")}return{requestId:i,response:{ok:n.ok,status:n.status,statusText:n.statusText,body:f,headers:(0,u.lS)(n.headers)},requestDetails:y}}catch(n){if(n.message.includes("v3 api not supported."))return this.log.warn("v3 api not supported. Fall back to v2"),this.call(t,Object.assign(Object.assign({},e),{callSync:!1}),r);throw this.log.error("Error while making call:",n),n}}async query(t,e,r){const i=zt(this,Ot,"f").call(this),s=e.effectiveCanisterId?n.R.from(e.effectiveCanisterId):n.R.from(t);this.log.print(`ecid ${s.toString()}`),this.log.print(`canisterId ${t.toString()}`);const[c,f]=await Promise.all([(async()=>{const c=await(void 0!==r?r:zt(this,Bt,"f"));if(!c)throw new Kt("This identity has expired due this application's security policy. Please refresh your authentication.");const f=n.R.from(t),h=(null==c?void 0:c.getPrincipal())||n.R.anonymous(),l={request_type:"query",canister_id:f,method_name:e.methodName,arg:e.arg,sender:h,ingress_expiry:new u.ZM(zt(this,Ut,"f")*Gt)},d=await(0,a.vH)(l);let p=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},zt(this,St,"f")?{Authorization:"Basic "+btoa(zt(this,St,"f"))}:{})},endpoint:"read",body:l});p=await(null==c?void 0:c.transformRequest(p));const y=o.cv(p.body),g={canister:f.toText(),ecid:s,transformedRequest:p,body:y,requestId:d,backoff:i,tries:0};return{requestDetails:l,query:await zt(this,_t,"m",$t).call(this,g)}})(),(async()=>{if(!zt(this,jt,"f"))return;const t=zt(this,kt,"f").get(s.toString());return t||(await this.fetchSubnetKeys(s.toString()),zt(this,kt,"f").get(s.toString()))})()]),{requestDetails:h,query:l}=c,p=Object.assign(Object.assign({},l),{requestDetails:h});if(this.log.print("Query response:",p),!zt(this,jt,"f"))return p;try{return zt(this,Ct,"f").call(this,p,f)}catch(e){this.log.warn("Query response verification failed. Retrying with fresh subnet keys."),zt(this,kt,"f").delete(t.toString()),await this.fetchSubnetKeys(s.toString());const r=zt(this,kt,"f").get(t.toString());if(!r)throw new d.kt("Invalid signature from replica signed query: no matching node key found.");return zt(this,Ct,"f").call(this,p,r)}}async createReadStateRequest(t,e){const r=await(void 0!==e?await e:await zt(this,Bt,"f"));if(!r)throw new Kt("This identity has expired due this application's security policy. Please refresh your authentication.");const i=(null==r?void 0:r.getPrincipal())||n.R.anonymous(),s=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},zt(this,St,"f")?{Authorization:"Basic "+btoa(zt(this,St,"f"))}:{})},endpoint:"read_state",body:{request_type:"read_state",paths:t.paths,sender:i,ingress_expiry:new u.ZM(zt(this,Ut,"f")*Gt)}});return null==r?void 0:r.transformRequest(s)}async readState(t,e,r,i){const s="string"==typeof t?n.R.fromText(t):t,a=null!=i?i:await this.createReadStateRequest(e,r),c=Object.assign(Object.assign({},a.body),{ingress_expiry:new u.ZM(Dt.F)}),f=o.cv(c);this.log.print(`fetching "/api/v2/canister/${s}/read_state" with request:`,a);const h=zt(this,Ot,"f").call(this);try{const t=await zt(this,_t,"m",Mt).call(this,{request:()=>zt(this,It,"f").call(this,""+new URL(`/api/v2/canister/${s.toString()}/read_state`,this.host),Object.assign(Object.assign(Object.assign({},zt(this,Tt,"f")),a.request),{body:f})),backoff:h,tries:0});if(!t.ok)throw new Error(`Server returned an error:\n  Code: ${t.status} (${t.statusText})\n  Body: ${await t.text()}\n`);const e=o.Jx(await t.arrayBuffer());this.log.print("Read state response:",e);const r=await this.parseTimeFromResponse(e);return r>0&&(this.log.print("Read state response time:",r),Vt(this,Lt,r,"f")),e}catch(t){throw this.log.error("Caught exception while attempting to read state",t),t}}async parseTimeFromResponse(t){let e;if(t.certificate){const r=o.Jx(t.certificate);if(!r||!("tree"in r))throw new Error("Could not decode time from response");e=r.tree;const n=(0,d.OZ)(["time"],e);if(n.status!==d.GT.Found)throw new Error("Time was not found in the response or was not in its expected format.");if(!(n.value instanceof ArrayBuffer||ArrayBuffer.isView(n)))throw new Error("Time was not found in the response or was not in its expected format.");const i=(0,et.b)((0,c.rS)(n.value));return this.log.print("Time from response:",i),this.log.print("Time from response in milliseconds:",Number(i)),Number(i)}return this.log.warn("No certificate found in response"),0}async syncTime(t){const e=await Promise.resolve().then(r.bind(r,583)),i=Date.now();try{t||this.log.print("Syncing time with the IC. No canisterId provided, so falling back to ryjl3-tyaaa-aaaaa-aaaba-cai");const r=(await e.request({canisterId:null!=t?t:n.R.from("ryjl3-tyaaa-aaaaa-aaaba-cai"),agent:this,paths:["time"]})).get("time");r&&Vt(this,At,Number(r)-Number(i),"f")}catch(t){this.log.error("Caught exception while attempting to sync time",t)}}async status(){const t=zt(this,St,"f")?{Authorization:"Basic "+btoa(zt(this,St,"f"))}:{};this.log.print('fetching "/api/v2/status"');const e=zt(this,Ot,"f").call(this),r=await zt(this,_t,"m",Mt).call(this,{backoff:e,request:()=>zt(this,It,"f").call(this,""+new URL("/api/v2/status",this.host),Object.assign({headers:t},zt(this,Tt,"f"))),tries:0});return o.Jx(await r.arrayBuffer())}async fetchRootKey(){if(!zt(this,Nt,"f")){const t=await this.status();this.rootKey=t.root_key,Vt(this,Nt,!0,"f")}return this.rootKey}invalidateIdentity(){Vt(this,Bt,null,"f")}replaceIdentity(t){Vt(this,Bt,Promise.resolve(t),"f")}async fetchSubnetKeys(t){const e=n.R.from(t),r=(await(0,l.request)({canisterId:e,paths:["subnet"],agent:this})).get("subnet");if(r&&"object"==typeof r&&"nodeKeys"in r)return zt(this,kt,"f").set(e.toText(),r),r}_transform(t){let e=Promise.resolve(t);if("call"===t.endpoint)for(const t of zt(this,Ft,"f"))e=e.then((e=>t(e).then((t=>t||e))));else for(const t of zt(this,Pt,"f"))e=e.then((e=>t(e).then((t=>t||e))));return e}}Bt=new WeakMap,It=new WeakMap,Tt=new WeakMap,xt=new WeakMap,At=new WeakMap,St=new WeakMap,Nt=new WeakMap,Rt=new WeakMap,Ot=new WeakMap,Ut=new WeakMap,Lt=new WeakMap,Pt=new WeakMap,Ft=new WeakMap,kt=new WeakMap,jt=new WeakMap,Ct=new WeakMap,_t=new WeakSet,$t=async function t(e){var r,n;const{ecid:s,transformedRequest:a,body:c,requestId:f,backoff:l,tries:d}=e,p=0===d?0:l.next();if(this.log.print(`fetching "/api/v2/canister/${s.toString()}/query" with tries:`,{tries:d,backoff:l,delay:p}),null===p)throw new i.e$(`Timestamp failed to pass the watermark after retrying the configured ${zt(this,Rt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);let y;p>0&&await new Promise((t=>setTimeout(t,p)));try{this.log.print(`fetching "/api/v2/canister/${s.toString()}/query" with request:`,a);const t=await zt(this,It,"f").call(this,""+new URL(`/api/v2/canister/${s.toString()}/query`,this.host),Object.assign(Object.assign(Object.assign({},zt(this,Tt,"f")),a.request),{body:c}));if(200!==t.status)throw new h.p(`Gateway returned an error:\n  Code: ${t.status} (${t.statusText})\n  Body: ${await t.text()}\n`,{ok:t.ok,status:t.status,statusText:t.statusText,headers:(0,u.lS)(t.headers)});{const e=o.Jx(await t.arrayBuffer());y=Object.assign(Object.assign({},e),{httpDetails:{ok:t.ok,status:t.status,statusText:t.statusText,headers:(0,u.lS)(t.headers)},requestId:f})}}catch(r){if(d<zt(this,Rt,"f"))return this.log.warn(`Caught exception while attempting to make query:\n  ${r}\n  Retrying query.`),await zt(this,_t,"m",t).call(this,Object.assign(Object.assign({},e),{tries:d+1}));throw r}const g=null===(n=null===(r=y.signatures)||void 0===r?void 0:r[0])||void 0===n?void 0:n.timestamp;if(!zt(this,jt,"f"))return y;if(!g)throw new Error("Timestamp not found in query response. This suggests a malformed or malicious response.");const b=Number(BigInt(g)/BigInt(1e6));if(this.log.print("watermark and timestamp",{waterMark:this.waterMark,timestamp:b}),Number(this.waterMark)>b){const r=new i.e$("Timestamp is below the watermark. Retrying query.");if(this.log.error("Timestamp is below",r,{timestamp:g,waterMark:this.waterMark}),d<zt(this,Rt,"f"))return await zt(this,_t,"m",t).call(this,Object.assign(Object.assign({},e),{tries:d+1}));throw new i.e$(`Timestamp failed to pass the watermark after retrying the configured ${zt(this,Rt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`)}return y},Mt=async function t(e){const{request:r,backoff:n,tries:s}=e,o=0===s?0:n.next();if(null===o)throw new i.e$(`Timestamp failed to pass the watermark after retrying the configured ${zt(this,Rt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);let a;o>0&&await new Promise((t=>setTimeout(t,o)));try{a=await r()}catch(e){if(zt(this,Rt,"f")>s)return this.log.warn(`Caught exception while attempting to make request:\n  ${e}\n  Retrying request.`),await zt(this,_t,"m",t).call(this,{request:r,backoff:n,tries:s+1});throw e}if(a.ok)return a;const c=await a.clone().text(),f=`Server returned an error:\n  Code: ${a.status} (${a.statusText})\n  Body: ${c}\n`;if(404===a.status&&a.url.includes("api/v3"))throw new h.p("v3 api not supported. Fall back to v2",{ok:a.ok,status:a.status,statusText:a.statusText,headers:(0,u.lS)(a.headers)});if(s<zt(this,Rt,"f"))return await zt(this,_t,"m",t).call(this,{request:r,backoff:n,tries:s+1});throw new h.p(f,{ok:a.ok,status:a.status,statusText:a.statusText,headers:(0,u.lS)(a.headers)})}},538:(t,e,r)=>{"use strict";r.d(e,{ZM:()=>a,lS:()=>u,z4:()=>c});var n=r(688),i=r(419),s=r(244);const o=BigInt(1e6);class a{constructor(t){if(t<9e4){const e=BigInt(Date.now()+t)*o/BigInt(1e9);return void(this._value=e*BigInt(1e9))}const e=BigInt(Math.floor(Date.now()+t-6e4))*o/BigInt(1e9)/BigInt(60)*BigInt(60)*BigInt(1e9);this._value=e}toCBOR(){return i.value.u64(this._value.toString(16),16)}toHash(){return(0,n.dZ)(this._value)}}function c(t=s.s){return async e=>{const r=e.request.headers;e.request.headers=r,"call"===e.endpoint&&(e.body.nonce=t())}}function u(t){const e=[];return t.forEach(((t,r)=>{e.push([r,t])})),e}},244:(t,e,r)=>{"use strict";r.d(e,{V:()=>i,s:()=>s});const n=()=>{if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues){const t=new Uint32Array(1);return window.crypto.getRandomValues(t),t[0]}if("undefined"!=typeof crypto&&crypto.getRandomValues){const t=new Uint32Array(1);return crypto.getRandomValues(t),t[0]}return"undefined"!=typeof crypto&&crypto.randomInt?crypto.randomInt(0,4294967295):Math.floor(4294967295*Math.random())};var i;function s(){const t=new ArrayBuffer(16),e=new DataView(t),r=n(),i=n(),s=n(),o=n();return e.setUint32(0,r),e.setUint32(4,i),e.setUint32(8,s),e.setUint32(12,o),t}!function(t){t.Call="call"}(i||(i={}))},200:(t,e,r)=>{"use strict";r.d(e,{ZM:()=>s.ZM,i7:()=>s.i7,t_:()=>s.t_,ur:()=>i.u,bN:()=>s.bN,us:()=>o});var n,i=r(531),s=r(80);r(26),r(543);!function(t){t.Error="err",t.GetPrincipal="gp",t.GetPrincipalResponse="gpr",t.Query="q",t.QueryResponse="qr",t.Call="c",t.CallResponse="cr",t.ReadState="rs",t.ReadStateResponse="rsr",t.Status="s",t.StatusResponse="sr"}(n||(n={}));function o(){const t="undefined"==typeof window?void 0===r.g?"undefined"==typeof self?void 0:self.ic.agent:r.g.ic.agent:window.ic.agent;if(!t)throw new Error("No Agent could be found.");return t}},6:(t,e,r)=>{"use strict";r.d(e,{ed:()=>i});var n=r(543);r(257);(new TextEncoder).encode("\nic-request");class i{getPrincipal(){return n.R.anonymous()}async transformRequest(t){return Object.assign(Object.assign({},t),{body:{content:t.body}})}}},583:(t,e,r)=>{"use strict";r.r(e),r.d(e,{CustomPath:()=>u,encodePath:()=>l,fetchNodeKeys:()=>h,request:()=>f});var n=r(543),i=r(313),s=r(472),o=r(753),a=r(774),c=r(16);class u{constructor(t,e,r){this.key=t,this.path=e,this.decodeStrategy=r}}const f=async t=>{const{agent:e,paths:r}=t,o=n.R.from(t.canisterId),a=[...new Set(r)],u=a.map((t=>l(t,o))),f=new Map,b=a.map(((t,r)=>(async()=>{var n;try{const t=await e.readState(o,{paths:[u[r]]}),n=await s.KB.create({certificate:t.certificate,rootKey:e.rootKey,canisterId:o}),i=(r,n)=>{if("subnet"===n){return{path:n,data:h(t.certificate,o,e.rootKey)}}return{path:n,data:(0,s.ti)(r.lookup(l(n,o)))}},{path:b,data:w}=i(n,a[r]);if(w)switch(b){case"time":f.set(b,(0,c.b)(w));break;case"controllers":f.set(b,g(w));break;case"module_hash":f.set(b,d(w));break;case"subnet":f.set(b,w);break;case"candid":f.set(b,(new TextDecoder).decode(w));break;default:if("string"!=typeof b&&"key"in b&&"path"in b)switch(b.decodeStrategy){case"raw":f.set(b.key,w);break;case"leb128":f.set(b.key,(0,c.o)(w));break;case"cbor":f.set(b.key,p(w));break;case"hex":f.set(b.key,d(w));break;case"utf-8":f.set(b.key,y(w))}}else console.warn(`Expected to find result for path ${b}, but instead found nothing.`),"string"==typeof b?f.set(b,null):f.set(b.key,null)}catch(e){if(null===(n=null==e?void 0:e.message)||void 0===n?void 0:n.includes("Invalid certificate"))throw new i.e$(e.message);"string"!=typeof t&&"key"in t&&"path"in t?f.set(t.key,null):f.set(t,null),console.group(),console.warn(`Expected to find result for path ${t}, but instead found nothing.`),console.warn(e),console.groupEnd()}})()));return await Promise.all(b),f},h=(t,e,r)=>{if(!e._isPrincipal)throw new Error("Invalid canisterId");const i=a.Jx(new Uint8Array(t)),o=i.tree;let c,u=i.delegation;u&&u.subnet_id?c=n.R.fromUint8Array(new Uint8Array(u.subnet_id)):u||void 0===r?(c=n.R.selfAuthenticating(n.R.fromText("tdb26-jop6k-aogll-7ltgs-eruif-6kk7m-qpktf-gdiqx-mxtrf-vb5e6-eqe").toUint8Array()),u={subnet_id:c.toUint8Array(),certificate:new ArrayBuffer(0)}):(c=n.R.selfAuthenticating(new Uint8Array(r)),u={subnet_id:c.toUint8Array(),certificate:new ArrayBuffer(0)});if(!(0,s.Gt)({canisterId:e,subnetId:c,tree:o}))throw new Error("Canister not in range");const f=(0,s.OZ)(["subnet",u.subnet_id,"node"],o);if(f.status!==s.GT.Found)throw new Error("Node not found");if(f.value instanceof ArrayBuffer)throw new Error("Invalid node tree");const h=(0,s.UV)(f.value),l=new Map;return h.forEach((t=>{const e=n.R.from(new Uint8Array(t[1])).toText(),r=(0,s.OZ)(["public_key"],t[2]);if(r.status!==s.GT.Found)throw new Error("Public key not found");const i=r.value;if(44!==i.byteLength)throw new Error("Invalid public key length");l.set(e,i)})),{subnetId:n.R.fromUint8Array(new Uint8Array(u.subnet_id)).toText(),nodeKeys:l}},l=(t,e)=>{const r=new TextEncoder,n=t=>new DataView(r.encode(t).buffer).buffer,i=new DataView(e.toUint8Array().buffer).buffer;switch(t){case"time":return[n("time")];case"controllers":return[n("canister"),i,n("controllers")];case"module_hash":return[n("canister"),i,n("module_hash")];case"subnet":return[n("subnet")];case"candid":return[n("canister"),i,n("metadata"),n("candid:service")];default:if("key"in t&&"path"in t){if("string"==typeof t.path||t.path instanceof ArrayBuffer){const e=t.path,r="string"==typeof e?n(e):e;return[n("canister"),i,n("metadata"),r]}return t.path}}throw new Error(`An unexpeected error was encountered while encoding your path for canister status. Please ensure that your path, ${t} was formatted correctly.`)},d=t=>(0,o.NC)(t),p=t=>a.Jx(t),y=t=>(new TextDecoder).decode(t),g=t=>p(t).map((t=>n.R.fromUint8Array(new Uint8Array(t))))},774:(t,e,r)=>{"use strict";r.d(e,{Jx:()=>h,cv:()=>c});var n=r(756),i=r(419),s=r(753);const o=i.SelfDescribeCborSerializer.withDefaultEncoders(!0);var a;function c(t){return o.serialize(t)}function u(t){const e=t.byteLength;let r=BigInt(0);for(let n=0;n<e;n++)r=r*BigInt(256)+BigInt(t[n]);return r}o.addEncoder(new class{get name(){return"Principal"}get priority(){return 0}match(t){return t&&!0===t._isPrincipal}encode(t){return i.value.bytes(t.toUint8Array())}}),o.addEncoder(new class{get name(){return"Buffer"}get priority(){return 1}match(t){return t instanceof ArrayBuffer||ArrayBuffer.isView(t)}encode(t){return i.value.bytes(new Uint8Array(t))}}),o.addEncoder(new class{get name(){return"BigInt"}get priority(){return 1}match(t){return"bigint"==typeof t}encode(t){return t>BigInt(0)?i.value.tagged(2,i.value.bytes((0,s.H_)(t.toString(16)))):i.value.tagged(3,i.value.bytes((0,s.H_)((BigInt("-1")*t).toString(16))))}}),function(t){t[t.Uint64LittleEndian=71]="Uint64LittleEndian",t[t.Semantic=55799]="Semantic"}(a||(a={}));class f extends n.Decoder{createByteString(t){return(0,s.zo)(...t)}createByteStringFromHeap(t,e){return t===e?new ArrayBuffer(0):new Uint8Array(this._heap.slice(t,e))}}function h(t){const e=new Uint8Array(t),r=new f({size:e.byteLength,tags:{2:t=>u(t),3:t=>-u(t),[a.Semantic]:t=>t}});try{return r.decodeFirst(e)}catch(t){throw new Error(`Failed to decode CBOR: ${t}, input: ${(0,s.NC)(e)}`)}}},472:(t,e,r)=>{"use strict";r.d(e,{KB:()=>gt,kt:()=>yt,GT:()=>_t,Gt:()=>At,UV:()=>Tt,ti:()=>mt,OZ:()=>It});var n=r(774),i=r(313),s=r(257),o=r(753),a=r(543),c=r(748),u=r(486),f=r(525),h=r(499);const l=h.bytesToNumberBE;function d(t,e){if(y(t),y(e),t<0||t>=1<<8*e)throw new Error(`bad I2OSP call: value=${t} length=${e}`);const r=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)r[n]=255&t,t>>>=8;return new Uint8Array(r)}function p(t,e){const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}function y(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function g(t,e,r){(0,h.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:s,hash:o,expand:a,DST:c}=r;(0,h.abytes)(t),y(e);const u="string"==typeof c?(0,h.utf8ToBytes)(c):c,g=n.toString(2).length,b=Math.ceil((g+i)/8),w=e*s*b;let m;if("xmd"===a)m=function(t,e,r,n){(0,h.abytes)(t),(0,h.abytes)(e),y(r),e.length>255&&(e=n((0,h.concatBytes)((0,h.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:s}=n,o=Math.ceil(r/i);if(r>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");const a=(0,h.concatBytes)(e,d(e.length,1)),c=d(0,s),u=d(r,2),f=new Array(o),l=n((0,h.concatBytes)(c,t,u,d(0,1),a));f[0]=n((0,h.concatBytes)(l,d(1,1),a));for(let t=1;t<=o;t++){const e=[p(l,f[t-1]),d(t+1,1),a];f[t]=n((0,h.concatBytes)(...e))}return(0,h.concatBytes)(...f).slice(0,r)}(t,u,w,o);else if("xof"===a)m=function(t,e,r,n,i){if((0,h.abytes)(t),(0,h.abytes)(e),y(r),e.length>255){const t=Math.ceil(2*n/8);e=i.create({dkLen:t}).update((0,h.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(t).update(d(r,2)).update(e).update(d(e.length,1)).digest()}(t,u,w,i,o);else{if("_internal_pass"!==a)throw new Error('expand must be "xmd" or "xof"');m=t}const v=new Array(e);for(let t=0;t<e;t++){const e=new Array(s);for(let r=0;r<s;r++){const i=b*(r+t*s),o=m.subarray(i,i+b);e[r]=(0,f.wQ)(l(o),n)}v[t]=e}return v}function b(t,e){const r=e.map((t=>Array.from(t).reverse()));return(e,n)=>{const[i,s,o,a]=r.map((r=>r.reduce(((r,n)=>t.add(t.mul(r,e),n)))));return e=t.div(i,s),n=t.mul(n,t.div(o,a)),{x:e,y:n}}}function w(t,e,r){if("function"!=typeof e)throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const s=g(n,2,{...r,DST:r.DST,...i}),o=t.fromAffine(e(s[0])),a=t.fromAffine(e(s[1])),c=o.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(n,i){const s=g(n,1,{...r,DST:r.encodeDST,...i}),o=t.fromAffine(e(s[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(const t of r)if("bigint"!=typeof t)throw new Error(`mapToCurve: expected array of bigints, got ${t} in array`);const n=t.fromAffine(e(r)).clearCofactor();return n.assertValidity(),n}}}var m=r(10);const{bytesToNumberBE:v,hexToBytes:E}=h,_={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(t,e)=>{const{Err:r}=_;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(1&e.length)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=h.numberToHexUnpadded(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?h.numberToHexUnpadded(i.length/2|128):"";return`${h.numberToHexUnpadded(t)}${s}${i}${e}`},decode(t,e){const{Err:r}=_;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++];let s=0;if(!!(128&i)){const t=127&i;if(!t)throw new r("tlv.decode(long): indefinite length not supported");if(t>4)throw new r("tlv.decode(long): byte length is too big");const o=e.subarray(n,n+t);if(o.length!==t)throw new r("tlv.decode: length bytes not complete");if(0===o[0])throw new r("tlv.decode(long): zero leftmost byte");for(const t of o)s=s<<8|t;if(n+=t,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=i;const o=e.subarray(n,n+s);if(o.length!==s)throw new r("tlv.decode: wrong value length");return{v:o,l:e.subarray(n+s)}}},_int:{encode(t){const{Err:e}=_;if(t<B)throw new e("integer: negative integers are not allowed");let r=h.numberToHexUnpadded(t);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new e("unexpected assertion");return r},decode(t){const{Err:e}=_;if(128&t[0])throw new e("Invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new e("Invalid signature integer: unnecessary leading zero");return v(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=_,i="string"==typeof t?E(t):t;h.abytes(i);const{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("Invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:u,l:f}=n.decode(2,c);if(f.length)throw new e("Invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(t){const{_tlv:e,_int:r}=_,n=`${e.encode(2,r.encode(t.r))}${e.encode(2,r.encode(t.s))}`;return e.encode(48,n)}},B=BigInt(0),I=BigInt(1),T=BigInt(2),x=BigInt(3),A=BigInt(4);function S(t){const e=function(t){const e=(0,m.Kd)(t);h.validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:r}=e,n=f.gN(e.n,e.nBitLength),i=e.toBytes||((t,e,n)=>{const i=e.toAffine();return h.concatBytes(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),s=e.fromBytes||(t=>{const e=t.subarray(1);return{x:r.fromBytes(e.subarray(0,r.BYTES)),y:r.fromBytes(e.subarray(r.BYTES,2*r.BYTES))}});function o(t){const{a:n,b:i}=e,s=r.sqr(t),o=r.mul(s,t);return r.add(r.add(o,r.mul(t,n)),i)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(t){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:s}=e;if(r&&"bigint"!=typeof t){if(h.isBytes(t)&&(t=h.bytesToHex(t)),"string"!=typeof t||!r.includes(t.length))throw new Error("Invalid key");t=t.padStart(2*n,"0")}let o;try{o="bigint"==typeof t?t:h.bytesToNumberBE((0,h.ensureBytes)("private key",t,n))}catch(e){throw new Error(`private key must be ${n} bytes, hex or bigint, not ${typeof t}`)}return i&&(o=f.wQ(o,s)),h.aInRange("private key",o,I,s),o}function c(t){if(!(t instanceof d))throw new Error("ProjectivePoint expected")}const u=(0,h.memoized)(((t,e)=>{const{px:n,py:i,pz:s}=t;if(r.eql(s,r.ONE))return{x:n,y:i};const o=t.is0();null==e&&(e=o?r.ONE:r.inv(s));const a=r.mul(n,e),c=r.mul(i,e),u=r.mul(s,e);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:a,y:c}})),l=(0,h.memoized)((t=>{if(t.is0()){if(e.allowInfinityPoint&&!r.is0(t.py))return;throw new Error("bad point: ZERO")}const{x:n,y:i}=t.toAffine();if(!r.isValid(n)||!r.isValid(i))throw new Error("bad point: x or y not FE");const s=r.sqr(i),a=o(n);if(!r.eql(s,a))throw new Error("bad point: equation left != right");if(!t.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class d{constructor(t,e,n){if(this.px=t,this.py=e,this.pz=n,null==t||!r.isValid(t))throw new Error("x required");if(null==e||!r.isValid(e))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required");Object.freeze(this)}static fromAffine(t){const{x:e,y:n}=t||{};if(!t||!r.isValid(e)||!r.isValid(n))throw new Error("invalid affine point");if(t instanceof d)throw new Error("projective point not allowed");const i=t=>r.eql(t,r.ZERO);return i(e)&&i(n)?d.ZERO:new d(e,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=r.invertBatch(t.map((t=>t.pz)));return t.map(((t,r)=>t.toAffine(e[r]))).map(d.fromAffine)}static fromHex(t){const e=d.fromAffine(s((0,h.ensureBytes)("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return d.BASE.multiply(a(t))}static msm(t,e){return(0,m.D1)(d,n,t,e)}_setWindowSize(t){y.setWindowSize(this,t)}assertValidity(){l(this)}hasEvenY(){const{y:t}=this.toAffine();if(r.isOdd)return!r.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){c(t);const{px:e,py:n,pz:i}=this,{px:s,py:o,pz:a}=t,u=r.eql(r.mul(e,a),r.mul(s,i)),f=r.eql(r.mul(n,a),r.mul(o,i));return u&&f}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){const{a:t,b:n}=e,i=r.mul(n,x),{px:s,py:o,pz:a}=this;let c=r.ZERO,u=r.ZERO,f=r.ZERO,h=r.mul(s,s),l=r.mul(o,o),p=r.mul(a,a),y=r.mul(s,o);return y=r.add(y,y),f=r.mul(s,a),f=r.add(f,f),c=r.mul(t,f),u=r.mul(i,p),u=r.add(c,u),c=r.sub(l,u),u=r.add(l,u),u=r.mul(c,u),c=r.mul(y,c),f=r.mul(i,f),p=r.mul(t,p),y=r.sub(h,p),y=r.mul(t,y),y=r.add(y,f),f=r.add(h,h),h=r.add(f,h),h=r.add(h,p),h=r.mul(h,y),u=r.add(u,h),p=r.mul(o,a),p=r.add(p,p),h=r.mul(p,y),c=r.sub(c,h),f=r.mul(p,l),f=r.add(f,f),f=r.add(f,f),new d(c,u,f)}add(t){c(t);const{px:n,py:i,pz:s}=this,{px:o,py:a,pz:u}=t;let f=r.ZERO,h=r.ZERO,l=r.ZERO;const p=e.a,y=r.mul(e.b,x);let g=r.mul(n,o),b=r.mul(i,a),w=r.mul(s,u),m=r.add(n,i),v=r.add(o,a);m=r.mul(m,v),v=r.add(g,b),m=r.sub(m,v),v=r.add(n,s);let E=r.add(o,u);return v=r.mul(v,E),E=r.add(g,w),v=r.sub(v,E),E=r.add(i,s),f=r.add(a,u),E=r.mul(E,f),f=r.add(b,w),E=r.sub(E,f),l=r.mul(p,v),f=r.mul(y,w),l=r.add(f,l),f=r.sub(b,l),l=r.add(b,l),h=r.mul(f,l),b=r.add(g,g),b=r.add(b,g),w=r.mul(p,w),v=r.mul(y,v),b=r.add(b,w),w=r.sub(g,w),w=r.mul(p,w),v=r.add(v,w),g=r.mul(b,v),h=r.add(h,g),g=r.mul(E,v),f=r.mul(m,f),f=r.sub(f,g),g=r.mul(m,b),l=r.mul(E,l),l=r.add(l,g),new d(f,h,l)}subtract(t){return this.add(t.negate())}is0(){return this.equals(d.ZERO)}wNAF(t){return y.wNAFCached(this,t,d.normalizeZ)}multiplyUnsafe(t){h.aInRange("scalar",t,B,e.n);const n=d.ZERO;if(t===B)return n;if(t===I)return this;const{endo:i}=e;if(!i)return y.unsafeLadder(this,t);let{k1neg:s,k1:o,k2neg:a,k2:c}=i.splitScalar(t),u=n,f=n,l=this;for(;o>B||c>B;)o&I&&(u=u.add(l)),c&I&&(f=f.add(l)),l=l.double(),o>>=I,c>>=I;return s&&(u=u.negate()),a&&(f=f.negate()),f=new d(r.mul(f.px,i.beta),f.py,f.pz),u.add(f)}multiply(t){const{endo:n,n:i}=e;let s,o;if(h.aInRange("scalar",t,I,i),n){const{k1neg:e,k1:i,k2neg:a,k2:c}=n.splitScalar(t);let{p:u,f}=this.wNAF(i),{p:h,f:l}=this.wNAF(c);u=y.constTimeNegate(e,u),h=y.constTimeNegate(a,h),h=new d(r.mul(h.px,n.beta),h.py,h.pz),s=u.add(h),o=f.add(l)}else{const{p:e,f:r}=this.wNAF(t);s=e,o=r}return d.normalizeZ([s,o])[0]}multiplyAndAddUnsafe(t,e,r){const n=d.BASE,i=(t,e)=>e!==B&&e!==I&&t.equals(n)?t.multiply(e):t.multiplyUnsafe(e),s=i(this,e).add(i(t,r));return s.is0()?void 0:s}toAffine(t){return u(this,t)}isTorsionFree(){const{h:t,isTorsionFree:r}=e;if(t===I)return!0;if(r)return r(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:r}=e;return t===I?this:r?r(d,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return(0,h.abool)("isCompressed",t),this.assertValidity(),i(d,this,t)}toHex(t=!0){return(0,h.abool)("isCompressed",t),h.bytesToHex(this.toRawBytes(t))}}d.BASE=new d(e.Gx,e.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);const p=e.nBitLength,y=(0,m.Mx)(d,e.endo?Math.ceil(p/2):p);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:a,weierstrassEquation:o,isWithinCurveOrder:function(t){return h.inRange(t,I,e.n)}}}function N(t,e){if(f.OP(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=function(t,e){const r=t.ORDER;let n=B;for(let t=r-I;t%T===B;t/=T)n+=I;const i=n,s=T<<i-I-I,o=s*T,a=(r-I)/o,c=(a-I)/T,u=o-I,f=s,h=t.pow(e,a),l=t.pow(e,(a+I)/T);let d=(e,r)=>{let n=h,s=t.pow(r,u),o=t.sqr(s);o=t.mul(o,r);let a=t.mul(e,o);a=t.pow(a,c),a=t.mul(a,s),s=t.mul(a,r),o=t.mul(a,e);let d=t.mul(o,s);a=t.pow(d,f);let p=t.eql(a,t.ONE);s=t.mul(o,l),a=t.mul(d,n),o=t.cmov(s,o,p),d=t.cmov(a,d,p);for(let e=i;e>I;e--){let r=e-T;r=T<<r-I;let i=t.pow(d,r);const a=t.eql(i,t.ONE);s=t.mul(o,n),n=t.mul(n,n),i=t.mul(d,n),o=t.cmov(s,o,a),d=t.cmov(i,d,a)}return{isValid:p,value:o}};if(t.ORDER%A===x){const r=(t.ORDER-x)/A,n=t.sqrt(t.neg(e));d=(e,i)=>{let s=t.sqr(i);const o=t.mul(e,i);s=t.mul(s,o);let a=t.pow(s,r);a=t.mul(a,o);const c=t.mul(a,n),u=t.mul(t.sqr(a),i),f=t.eql(u,e);return{isValid:f,value:t.cmov(c,a,f)}}}return d}(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,s,o,a,c,u,f,h;i=t.sqr(n),i=t.mul(i,e.Z),s=t.sqr(i),s=t.add(s,i),o=t.add(s,t.ONE),o=t.mul(o,e.B),a=t.cmov(e.Z,t.neg(s),!t.eql(s,t.ZERO)),a=t.mul(a,e.A),s=t.sqr(o),u=t.sqr(a),c=t.mul(u,e.A),s=t.add(s,c),s=t.mul(s,o),u=t.mul(u,a),c=t.mul(u,e.B),s=t.add(s,c),f=t.mul(i,o);const{isValid:l,value:d}=r(s,u);h=t.mul(i,n),h=t.mul(h,d),f=t.cmov(f,o,l),h=t.cmov(h,d,l);const p=t.isOdd(n)===t.isOdd(h);return h=t.cmov(t.neg(h),h,p),f=t.div(f,a),{x:f,y:h}}}const R=BigInt(0),O=BigInt(1),U=BigInt(2),L=BigInt(3);const P=BigInt(0),F=BigInt(1),k=BigInt(2),j=BigInt(3);function $(t,e,r,n,i=1,s){const o=BigInt(void 0===s?n:s),a=r**BigInt(n),c=[];for(let s=0;s<i;s++){const i=BigInt(s+1),u=[];for(let s=0,c=F;s<n;s++){const n=(i*c-i)/o%a;u.push(t.pow(e,n)),c*=r}c.push(u)}return c}const M=BigInt(0),C=BigInt(1),q=BigInt(2),D=BigInt(3),V=BigInt(4),z=BigInt("0xd201000000010000"),G=(0,h.bitLen)(z),{Fp:H,Fp2:Z,Fp6:K,Fp4Square:W,Fp12:Y}=function(t){const{ORDER:e}=t,r=f.gN(e),n=r.create(t.NONRESIDUE||BigInt(-1)),i=f.IN(e),s=r.div(r.ONE,k),o=$(r,n,r.ORDER,2)[0],a=({c0:t,c1:e},{c0:n,c1:i})=>({c0:r.add(t,n),c1:r.add(e,i)}),c=({c0:t,c1:e},{c0:n,c1:i})=>({c0:r.sub(t,n),c1:r.sub(e,i)}),u=({c0:t,c1:e},n)=>{if("bigint"==typeof n)return{c0:r.mul(t,n),c1:r.mul(e,n)};const{c0:i,c1:s}=n;let o=r.mul(t,i),a=r.mul(e,s);return{c0:r.sub(o,a),c1:r.sub(r.mul(r.add(t,e),r.add(i,s)),r.add(o,a))}},l=({c0:t,c1:e})=>{const n=r.add(t,e),i=r.sub(t,e),s=r.add(t,t);return{c0:r.mul(n,i),c1:r.mul(s,e)}},d=t=>{if(2!==t.length)throw new Error("Invalid tuple");const e=t.map((t=>r.create(t)));return{c0:e[0],c1:e[1]}},p=e*e,y=d(t.FP2_NONRESIDUE),g={ORDER:p,NONRESIDUE:y,BITS:(0,h.bitLen)(p),BYTES:Math.ceil((0,h.bitLen)(p)/8),MASK:(0,h.bitMask)((0,h.bitLen)(p)),ZERO:{c0:r.ZERO,c1:r.ZERO},ONE:{c0:r.ONE,c1:r.ZERO},create:t=>t,isValid:({c0:t,c1:e})=>"bigint"==typeof t&&"bigint"==typeof e,is0:({c0:t,c1:e})=>r.is0(t)&&r.is0(e),eql:({c0:t,c1:e},{c0:n,c1:i})=>r.eql(t,n)&&r.eql(e,i),neg:({c0:t,c1:e})=>({c0:r.neg(t),c1:r.neg(e)}),pow:(t,e)=>f.Q(g,t,e),invertBatch:t=>f.Eg(g,t),add:a,sub:c,mul:u,sqr:l,addN:a,subN:c,mulN:u,sqrN:l,div:(t,e)=>g.mul(t,"bigint"==typeof e?r.inv(r.create(e)):g.inv(e)),inv:({c0:t,c1:e})=>{const n=r.inv(r.create(t*t+e*e));return{c0:r.mul(n,r.create(t)),c1:r.mul(n,r.create(-e))}},sqrt:e=>{if(t.Fp2sqrt)return t.Fp2sqrt(e);const{c0:o,c1:a}=e;if(r.is0(a))return r.eql(i(r,o),r.ONE)?g.create({c0:r.sqrt(o),c1:r.ZERO}):g.create({c0:r.ZERO,c1:r.sqrt(r.div(o,n))});const c=r.sqrt(r.sub(r.sqr(o),r.mul(r.sqr(a),n)));let u=r.mul(r.add(c,o),s);const f=i(r,u);r.is0(f)||r.eql(f,r.ONE)||(u=r.sub(u,c));const h=r.sqrt(u),l=g.create({c0:h,c1:r.div(r.mul(a,s),h)});if(!g.eql(g.sqr(l),e))throw new Error("Cannot find square root");const d=l,p=g.neg(d),{re:y,im:b}=g.reim(d),{re:w,im:m}=g.reim(p);return b>m||b===m&&y>w?d:p},isOdd:t=>{const{re:e,im:r}=g.reim(t);return BigInt(e%k||e===P&&r%k)==F},fromBytes(t){if(t.length!==g.BYTES)throw new Error(`fromBytes wrong length=${t.length}`);return{c0:r.fromBytes(t.subarray(0,r.BYTES)),c1:r.fromBytes(t.subarray(r.BYTES))}},toBytes:({c0:t,c1:e})=>(0,h.concatBytes)(r.toBytes(t),r.toBytes(e)),cmov:({c0:t,c1:e},{c0:n,c1:i},s)=>({c0:r.cmov(t,n,s),c1:r.cmov(e,i,s)}),reim:({c0:t,c1:e})=>({re:t,im:e}),mulByNonresidue:({c0:t,c1:e})=>g.mul({c0:t,c1:e},y),mulByB:t.Fp2mulByB,fromBigTuple:d,frobeniusMap:({c0:t,c1:e},n)=>({c0:t,c1:r.mul(e,o[n%2])})},b=({c0:t,c1:e,c2:r},{c0:n,c1:i,c2:s})=>({c0:g.add(t,n),c1:g.add(e,i),c2:g.add(r,s)}),w=({c0:t,c1:e,c2:r},{c0:n,c1:i,c2:s})=>({c0:g.sub(t,n),c1:g.sub(e,i),c2:g.sub(r,s)}),m=({c0:t,c1:e,c2:r},n)=>{if("bigint"==typeof n)return{c0:g.mul(t,n),c1:g.mul(e,n),c2:g.mul(r,n)};const{c0:i,c1:s,c2:o}=n,a=g.mul(t,i),c=g.mul(e,s),u=g.mul(r,o);return{c0:g.add(a,g.mulByNonresidue(g.sub(g.mul(g.add(e,r),g.add(s,o)),g.add(c,u)))),c1:g.add(g.sub(g.mul(g.add(t,e),g.add(i,s)),g.add(a,c)),g.mulByNonresidue(u)),c2:g.sub(g.add(c,g.mul(g.add(t,r),g.add(i,o))),g.add(a,u))}},v=({c0:t,c1:e,c2:r})=>{let n=g.sqr(t),i=g.mul(g.mul(t,e),k),s=g.mul(g.mul(e,r),k),o=g.sqr(r);return{c0:g.add(g.mulByNonresidue(s),n),c1:g.add(g.mulByNonresidue(o),i),c2:g.sub(g.sub(g.add(g.add(i,g.sqr(g.add(g.sub(t,e),r))),s),n),o)}},[E,_]=$(g,y,r.ORDER,6,2,3),B={ORDER:g.ORDER,BITS:3*g.BITS,BYTES:3*g.BYTES,MASK:(0,h.bitMask)(3*g.BITS),ZERO:{c0:g.ZERO,c1:g.ZERO,c2:g.ZERO},ONE:{c0:g.ONE,c1:g.ZERO,c2:g.ZERO},create:t=>t,isValid:({c0:t,c1:e,c2:r})=>g.isValid(t)&&g.isValid(e)&&g.isValid(r),is0:({c0:t,c1:e,c2:r})=>g.is0(t)&&g.is0(e)&&g.is0(r),neg:({c0:t,c1:e,c2:r})=>({c0:g.neg(t),c1:g.neg(e),c2:g.neg(r)}),eql:({c0:t,c1:e,c2:r},{c0:n,c1:i,c2:s})=>g.eql(t,n)&&g.eql(e,i)&&g.eql(r,s),sqrt:h.notImplemented,div:(t,e)=>B.mul(t,"bigint"==typeof e?r.inv(r.create(e)):B.inv(e)),pow:(t,e)=>f.Q(B,t,e),invertBatch:t=>f.Eg(B,t),add:b,sub:w,mul:m,sqr:v,addN:b,subN:w,mulN:m,sqrN:v,inv:({c0:t,c1:e,c2:r})=>{let n=g.sub(g.sqr(t),g.mulByNonresidue(g.mul(r,e))),i=g.sub(g.mulByNonresidue(g.sqr(r)),g.mul(t,e)),s=g.sub(g.sqr(e),g.mul(t,r)),o=g.inv(g.add(g.mulByNonresidue(g.add(g.mul(r,i),g.mul(e,s))),g.mul(t,n)));return{c0:g.mul(o,n),c1:g.mul(o,i),c2:g.mul(o,s)}},fromBytes:t=>{if(t.length!==B.BYTES)throw new Error(`fromBytes wrong length=${t.length}`);return{c0:g.fromBytes(t.subarray(0,g.BYTES)),c1:g.fromBytes(t.subarray(g.BYTES,2*g.BYTES)),c2:g.fromBytes(t.subarray(2*g.BYTES))}},toBytes:({c0:t,c1:e,c2:r})=>(0,h.concatBytes)(g.toBytes(t),g.toBytes(e),g.toBytes(r)),cmov:({c0:t,c1:e,c2:r},{c0:n,c1:i,c2:s},o)=>({c0:g.cmov(t,n,o),c1:g.cmov(e,i,o),c2:g.cmov(r,s,o)}),fromBigSix:t=>{if(!Array.isArray(t)||6!==t.length)throw new Error("Invalid Fp6 usage");return{c0:g.fromBigTuple(t.slice(0,2)),c1:g.fromBigTuple(t.slice(2,4)),c2:g.fromBigTuple(t.slice(4,6))}},frobeniusMap:({c0:t,c1:e,c2:r},n)=>({c0:g.frobeniusMap(t,n),c1:g.mul(g.frobeniusMap(e,n),E[n%6]),c2:g.mul(g.frobeniusMap(r,n),_[n%6])}),mulByFp2:({c0:t,c1:e,c2:r},n)=>({c0:g.mul(t,n),c1:g.mul(e,n),c2:g.mul(r,n)}),mulByNonresidue:({c0:t,c1:e,c2:r})=>({c0:g.mulByNonresidue(r),c1:t,c2:e}),mul1:({c0:t,c1:e,c2:r},n)=>({c0:g.mulByNonresidue(g.mul(r,n)),c1:g.mul(t,n),c2:g.mul(e,n)}),mul01({c0:t,c1:e,c2:r},n,i){let s=g.mul(t,n),o=g.mul(e,i);return{c0:g.add(g.mulByNonresidue(g.sub(g.mul(g.add(e,r),i),o)),s),c1:g.sub(g.sub(g.mul(g.add(n,i),g.add(t,e)),s),o),c2:g.add(g.sub(g.mul(g.add(t,r),n),s),o)}}},I=$(g,y,r.ORDER,12,1,6)[0],T=({c0:t,c1:e},{c0:r,c1:n})=>({c0:B.add(t,r),c1:B.add(e,n)}),x=({c0:t,c1:e},{c0:r,c1:n})=>({c0:B.sub(t,r),c1:B.sub(e,n)}),A=({c0:t,c1:e},r)=>{if("bigint"==typeof r)return{c0:B.mul(t,r),c1:B.mul(e,r)};let{c0:n,c1:i}=r,s=B.mul(t,n),o=B.mul(e,i);return{c0:B.add(s,B.mulByNonresidue(o)),c1:B.sub(B.mul(B.add(t,e),B.add(n,i)),B.add(s,o))}},S=({c0:t,c1:e})=>{let r=B.mul(t,e);return{c0:B.sub(B.sub(B.mul(B.add(B.mulByNonresidue(e),t),B.add(t,e)),r),B.mulByNonresidue(r)),c1:B.add(r,r)}},N={ORDER:g.ORDER,BITS:2*g.BITS,BYTES:2*g.BYTES,MASK:(0,h.bitMask)(2*g.BITS),ZERO:{c0:B.ZERO,c1:B.ZERO},ONE:{c0:B.ONE,c1:B.ZERO},create:t=>t,isValid:({c0:t,c1:e})=>B.isValid(t)&&B.isValid(e),is0:({c0:t,c1:e})=>B.is0(t)&&B.is0(e),neg:({c0:t,c1:e})=>({c0:B.neg(t),c1:B.neg(e)}),eql:({c0:t,c1:e},{c0:r,c1:n})=>B.eql(t,r)&&B.eql(e,n),sqrt:h.notImplemented,inv:({c0:t,c1:e})=>{let r=B.inv(B.sub(B.sqr(t),B.mulByNonresidue(B.sqr(e))));return{c0:B.mul(t,r),c1:B.neg(B.mul(e,r))}},div:(t,e)=>N.mul(t,"bigint"==typeof e?r.inv(r.create(e)):N.inv(e)),pow:(t,e)=>f.Q(N,t,e),invertBatch:t=>f.Eg(N,t),add:T,sub:x,mul:A,sqr:S,addN:T,subN:x,mulN:A,sqrN:S,fromBytes:t=>{if(t.length!==N.BYTES)throw new Error(`fromBytes wrong length=${t.length}`);return{c0:B.fromBytes(t.subarray(0,B.BYTES)),c1:B.fromBytes(t.subarray(B.BYTES))}},toBytes:({c0:t,c1:e})=>(0,h.concatBytes)(B.toBytes(t),B.toBytes(e)),cmov:({c0:t,c1:e},{c0:r,c1:n},i)=>({c0:B.cmov(t,r,i),c1:B.cmov(e,n,i)}),fromBigTwelve:t=>({c0:B.fromBigSix(t.slice(0,6)),c1:B.fromBigSix(t.slice(6,12))}),frobeniusMap(t,e){const{c0:r,c1:n,c2:i}=B.frobeniusMap(t.c1,e),s=I[e%12];return{c0:B.frobeniusMap(t.c0,e),c1:B.create({c0:g.mul(r,s),c1:g.mul(n,s),c2:g.mul(i,s)})}},mulByFp2:({c0:t,c1:e},r)=>({c0:B.mulByFp2(t,r),c1:B.mulByFp2(e,r)}),conjugate:({c0:t,c1:e})=>({c0:t,c1:B.neg(e)}),mul014:({c0:t,c1:e},r,n,i)=>{let s=B.mul01(t,r,n),o=B.mul1(e,i);return{c0:B.add(B.mulByNonresidue(o),s),c1:B.sub(B.sub(B.mul01(B.add(e,t),r,g.add(n,i)),s),o)}},mul034:({c0:t,c1:e},r,n,i)=>{const s=B.create({c0:g.mul(t.c0,r),c1:g.mul(t.c1,r),c2:g.mul(t.c2,r)}),o=B.mul01(e,n,i),a=B.mul01(B.add(t,e),g.add(r,n),i);return{c0:B.add(B.mulByNonresidue(o),s),c1:B.sub(a,B.add(s,o))}},_cyclotomicSquare:t.Fp12cyclotomicSquare,_cyclotomicExp:t.Fp12cyclotomicExp,finalExponentiate:t.Fp12finalExponentiate};return{Fp:r,Fp2:g,Fp6:B,Fp4Square:function(t,e){const r=g.sqr(t),n=g.sqr(e);return{first:g.add(g.mulByNonresidue(n),r),second:g.sub(g.sub(g.sqr(g.add(t,e)),r),n)}},Fp12:N}}({ORDER:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),FP2_NONRESIDUE:[C,C],Fp2mulByB:({c0:t,c1:e})=>{const r=H.mul(t,V),n=H.mul(e,V);return{c0:H.sub(r,n),c1:H.add(r,n)}},Fp12cyclotomicSquare:({c0:t,c1:e})=>{const{c0:r,c1:n,c2:i}=t,{c0:s,c1:o,c2:a}=e,{first:c,second:u}=W(r,o),{first:f,second:h}=W(s,i),{first:l,second:d}=W(n,a),p=Z.mulByNonresidue(d);return{c0:K.create({c0:Z.add(Z.mul(Z.sub(c,r),q),c),c1:Z.add(Z.mul(Z.sub(f,n),q),f),c2:Z.add(Z.mul(Z.sub(l,i),q),l)}),c1:K.create({c0:Z.add(Z.mul(Z.add(p,s),q),p),c1:Z.add(Z.mul(Z.add(u,o),q),u),c2:Z.add(Z.mul(Z.add(h,a),q),h)})}},Fp12cyclotomicExp(t,e){let r=Y.ONE;for(let n=G-1;n>=0;n--)r=Y._cyclotomicSquare(r),(0,h.bitGet)(e,n)&&(r=Y.mul(r,t));return r},Fp12finalExponentiate:t=>{const e=z,r=Y.div(Y.frobeniusMap(t,6),t),n=Y.mul(Y.frobeniusMap(r,2),r),i=Y.conjugate(Y._cyclotomicExp(n,e)),s=Y.mul(Y.conjugate(Y._cyclotomicSquare(n)),i),o=Y.conjugate(Y._cyclotomicExp(s,e)),a=Y.conjugate(Y._cyclotomicExp(o,e)),c=Y.mul(Y.conjugate(Y._cyclotomicExp(a,e)),Y._cyclotomicSquare(i)),u=Y.conjugate(Y._cyclotomicExp(c,e)),f=Y.frobeniusMap(Y.mul(i,a),2),h=Y.frobeniusMap(Y.mul(o,n),3),l=Y.frobeniusMap(Y.mul(c,Y.conjugate(n)),1),d=Y.mul(Y.mul(u,Y.conjugate(s)),n);return Y.mul(Y.mul(Y.mul(f,h),l),d)}}),J=f.gN(BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001")),Q=b(Z,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map((t=>t.map((t=>Z.fromBigTuple(t.map(BigInt))))))),X=b(H,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map((t=>t.map((t=>BigInt(t)))))),tt=N(Z,{A:Z.create({c0:H.create(M),c1:H.create(BigInt(240))}),B:Z.create({c0:H.create(BigInt(1012)),c1:H.create(BigInt(1012))}),Z:Z.create({c0:H.create(BigInt(-2)),c1:H.create(BigInt(-1))})}),et=N(H,{A:H.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:H.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:H.create(BigInt(11))}),{G2psi:rt,G2psi2:nt}=function(t,e,r){const n=e.pow(r,(t.ORDER-F)/j),i=e.pow(r,(t.ORDER-F)/k);function s(t,r){return[e.mul(e.frobeniusMap(t,1),n),e.mul(e.frobeniusMap(r,1),i)]}const o=e.pow(r,(t.ORDER**k-F)/j),a=e.pow(r,(t.ORDER**k-F)/k);if(!e.eql(a,e.neg(e.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function c(t,r){return[e.mul(t,o),e.neg(r)]}const u=t=>(e,r)=>{const n=r.toAffine(),i=t(n.x,n.y);return e.fromAffine({x:i[0],y:i[1]})};return{psi:s,psi2:c,G2psi:u(s),G2psi2:u(c),PSI_X:n,PSI_Y:i,PSI2_X:o,PSI2_Y:a}}(H,Z,Z.div(Z.ONE,Z.NONRESIDUE)),it=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:H.ORDER,m:2,k:128,expand:"xmd",hash:c.JQ}),st=at(H.toBytes(M),{infinity:!0,compressed:!0});function ot(t){const e=224&(t=t.slice())[0],r=!!(e>>7&1),n=!!(e>>6&1),i=!!(e>>5&1);return t[0]&=31,{compressed:r,infinity:n,sort:i,value:t}}function at(t,e){if(224&t[0])throw new Error("setMask: non-empty mask");return e.compressed&&(t[0]|=128),e.infinity&&(t[0]|=64),e.sort&&(t[0]|=32),t}function ct(t){t.assertValidity();const e=t.equals(ft.G1.ProjectivePoint.ZERO),{x:r,y:n}=t.toAffine();if(e)return st.slice();const i=H.ORDER,s=Boolean(n*q/i);return at((0,h.numberToBytesBE)(r,H.BYTES),{compressed:!0,sort:s})}function ut(t){t.assertValidity();const e=H.BYTES;if(t.equals(ft.G2.ProjectivePoint.ZERO))return(0,h.concatBytes)(st,(0,h.numberToBytesBE)(M,e));const{x:r,y:n}=t.toAffine(),{re:i,im:s}=Z.reim(r),{re:o,im:a}=Z.reim(n),c=Boolean((a>M?a*q:o*q)/H.ORDER&C),u=i;return(0,h.concatBytes)(at((0,h.numberToBytesBE)(s,e),{sort:c,compressed:!0}),(0,h.numberToBytesBE)(u,e))}const ft=function(t){const{Fp:e,Fr:r,Fp2:n,Fp6:i,Fp12:s}=t.fields,o=t.params.xNegative,a=t.params.twistType,c=S({n:r.ORDER,...t.G1}),u=Object.assign(c,w(c.ProjectivePoint,t.G1.mapToCurve,{...t.htfDefaults,...t.G1.htfDefaults})),l=S({n:r.ORDER,...t.G2}),d=Object.assign(l,w(l.ProjectivePoint,t.G2.mapToCurve,{...t.htfDefaults,...t.G2.htfDefaults}));let p;if("multiplicative"===a)p=(t,e,r,i,o,a)=>s.mul014(i,t,n.mul(e,o),n.mul(r,a));else{if("divisive"!==a)throw new Error("bls: unknown twist type");p=(t,e,r,i,o,a)=>s.mul034(i,n.mul(r,a),n.mul(e,o),t)}const y=n.div(n.ONE,n.mul(n.ONE,U));function g(t,e,r,i){const s=n.sqr(r),o=n.sqr(i),a=n.mulByB(n.mul(o,L)),c=n.mul(a,L),u=n.sub(n.sub(n.sqr(n.add(r,i)),o),s),f=n.sub(a,s),h=n.mul(n.sqr(e),L),l=n.neg(u);return t.push([f,h,l]),{Rx:e=n.mul(n.mul(n.mul(n.sub(s,c),e),r),y),Ry:r=n.sub(n.sqr(n.mul(n.add(s,c),y)),n.mul(n.sqr(a),L)),Rz:i=n.mul(s,u)}}function b(t,e,r,i,s,o){const a=n.sub(r,n.mul(o,i)),c=n.sub(e,n.mul(s,i)),u=n.sub(n.mul(a,s),n.mul(c,o)),f=n.neg(a),h=c;t.push([u,f,h]);const l=n.sqr(c),d=n.mul(l,c),p=n.mul(l,e),y=n.add(n.sub(d,n.mul(p,U)),n.mul(n.sqr(a),i));return{Rx:e=n.mul(c,y),Ry:r=n.sub(n.mul(n.sub(p,y),a),n.mul(d,r)),Rz:i=n.mul(i,d)}}const m=function(t){const e=[];for(;t>O;t>>=O)(t&O)===R?e.unshift(0):(t&L)===L?(e.unshift(-1),t+=O):e.unshift(1);return e}(t.params.ateLoopSize),v=(0,h.memoized)((e=>{const r=e,{x:i,y:s}=r.toAffine(),o=i,a=s,c=n.neg(s);let u=o,f=a,h=n.ONE;const l=[];for(const t of m){const e=[];({Rx:u,Ry:f,Rz:h}=g(e,u,f,h)),t&&({Rx:u,Ry:f,Rz:h}=b(e,u,f,h,o,-1===t?c:a)),l.push(e)}if(t.postPrecompute){const e=l[l.length-1];t.postPrecompute(u,f,h,o,a,b.bind(null,e))}return l}));function E(t,e=!1){let r=s.ONE;if(t.length){const e=t[0][0].length;for(let n=0;n<e;n++){r=s.sqr(r);for(const[e,i,s]of t)for(const[t,o,a]of e[n])r=p(t,o,a,r,i,s)}}return o&&(r=s.conjugate(r)),e?s.finalExponentiate(r):r}function _(t,e=!0){const r=[];u.ProjectivePoint.normalizeZ(t.map((({g1:t})=>t))),d.ProjectivePoint.normalizeZ(t.map((({g2:t})=>t)));for(const{g1:e,g2:n}of t){if(e.equals(u.ProjectivePoint.ZERO)||n.equals(d.ProjectivePoint.ZERO))throw new Error("pairing is not available for ZERO point");e.assertValidity(),n.assertValidity();const t=e.toAffine();r.push([v(n),t.x,t.y])}return E(r,e)}const B={randomPrivateKey:()=>{const e=(0,f.PS)(r.ORDER);return(0,f.Us)(t.randomBytes(e),r.ORDER)},calcPairingPrecomputes:v},{ShortSignature:I}=t.G1,{Signature:T}=t.G2;function x(t){return t instanceof u.ProjectivePoint?t:u.ProjectivePoint.fromHex(t)}function A(t,e){return t instanceof u.ProjectivePoint?t:u.hashToCurve((0,h.ensureBytes)("point",t),e)}function N(t){return t instanceof d.ProjectivePoint?t:T.fromHex(t)}function P(t,e){return t instanceof d.ProjectivePoint?t:d.hashToCurve((0,h.ensureBytes)("point",t),e)}return u.ProjectivePoint.BASE._setWindowSize(4),{getPublicKey:function(t){return u.ProjectivePoint.fromPrivateKey(t).toRawBytes(!0)},getPublicKeyForShortSignatures:function(t){return d.ProjectivePoint.fromPrivateKey(t).toRawBytes(!0)},sign:function(t,e,r){const n=P(t,r);n.assertValidity();const i=n.multiply(u.normPrivateKeyToScalar(e));return t instanceof d.ProjectivePoint?i:T.toRawBytes(i)},signShortSignature:function(t,e,r){const n=A(t,r);n.assertValidity();const i=n.multiply(u.normPrivateKeyToScalar(e));return t instanceof u.ProjectivePoint?i:I.toRawBytes(i)},verify:function(t,e,r,n){const i=x(r),o=P(e,n),a=u.ProjectivePoint.BASE,c=N(t),f=_([{g1:i.negate(),g2:o},{g1:a,g2:c}]);return s.eql(f,s.ONE)},verifyBatch:function(t,e,r,n){if(!e.length)throw new Error("Expected non-empty messages array");if(r.length!==e.length)throw new Error("Pubkey count should equal msg count");const i=N(t),o=e.map((t=>P(t,n))),a=r.map(x),c=new Map;for(let t=0;t<a.length;t++){const e=a[t],r=o[t];let n=c.get(r);void 0===n&&(n=[],c.set(r,n)),n.push(e)}const f=[];try{for(const[t,e]of c){const r=e.reduce(((t,e)=>t.add(e)));f.push({g1:r,g2:t})}return f.push({g1:u.ProjectivePoint.BASE.negate(),g2:i}),s.eql(_(f),s.ONE)}catch{return!1}},verifyShortSignature:function(t,e,r,n){const i=N(r),o=A(e,n),a=d.ProjectivePoint.BASE,c=_([{g1:o,g2:i},{g1:x(t),g2:a.negate()}]);return s.eql(c,s.ONE)},aggregatePublicKeys:function(t){if(!t.length)throw new Error("Expected non-empty array");const e=t.map(x).reduce(((t,e)=>t.add(e)),u.ProjectivePoint.ZERO);return t[0]instanceof u.ProjectivePoint?(e.assertValidity(),e):e.toRawBytes(!0)},aggregateSignatures:function(t){if(!t.length)throw new Error("Expected non-empty array");const e=t.map(N).reduce(((t,e)=>t.add(e)),d.ProjectivePoint.ZERO);return t[0]instanceof d.ProjectivePoint?(e.assertValidity(),e):T.toRawBytes(e)},aggregateShortSignatures:function(t){if(!t.length)throw new Error("Expected non-empty array");const e=t.map(x).reduce(((t,e)=>t.add(e)),u.ProjectivePoint.ZERO);return t[0]instanceof u.ProjectivePoint?(e.assertValidity(),e):I.toRawBytes(e)},millerLoopBatch:E,pairing:function(t,e,r=!0){return _([{g1:t,g2:e}],r)},pairingBatch:_,G1:u,G2:d,Signature:T,ShortSignature:I,fields:{Fr:r,Fp:e,Fp2:n,Fp6:i,Fp12:s},params:{ateLoopSize:t.params.ateLoopSize,r:t.params.r,G1b:t.G1.b,G2b:t.G2.b},utils:B}}({fields:{Fp:H,Fp2:Z,Fp6:K,Fp12:Y,Fr:J},G1:{Fp:H,h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1"),a:H.ZERO,b:V,htfDefaults:{...it,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(t,e)=>{const r=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),n=new t(H.mul(e.px,r),e.py,e.pz);return e.multiplyUnsafe(z).negate().multiplyUnsafe(z).equals(n)},clearCofactor:(t,e)=>e.multiplyUnsafe(z).add(e),mapToCurve:t=>{const{x:e,y:r}=et(H.create(t[0]));return X(e,r)},fromBytes:t=>{const{compressed:e,infinity:r,sort:n,value:i}=ot(t);if(48===i.length&&e){const t=H.ORDER,e=(0,h.bytesToNumberBE)(i),s=H.create(e&H.MASK);if(r){if(s!==M)throw new Error("G1: non-empty compressed point at infinity");return{x:M,y:M}}const o=H.add(H.pow(s,D),H.create(ft.params.G1b));let a=H.sqrt(o);if(!a)throw new Error("Invalid compressed G1 point");return a*q/t!==BigInt(n)&&(a=H.neg(a)),{x:H.create(s),y:H.create(a)}}if(96!==i.length||e)throw new Error("Invalid point G1, expected 48/96 bytes");{const t=(0,h.bytesToNumberBE)(i.subarray(0,H.BYTES)),e=(0,h.bytesToNumberBE)(i.subarray(H.BYTES));if(r){if(t!==M||e!==M)throw new Error("G1: non-empty point at infinity");return ft.G1.ProjectivePoint.ZERO.toAffine()}return{x:H.create(t),y:H.create(e)}}},toBytes:(t,e,r)=>{const n=e.equals(t.ZERO),{x:i,y:s}=e.toAffine();if(r){if(n)return st.slice();const t=H.ORDER,e=Boolean(s*q/t);return at((0,h.numberToBytesBE)(i,H.BYTES),{compressed:!0,sort:e})}if(n){return(0,h.concatBytes)(new Uint8Array([64]),new Uint8Array(2*H.BYTES-1))}return(0,h.concatBytes)((0,h.numberToBytesBE)(i,H.BYTES),(0,h.numberToBytesBE)(s,H.BYTES))},ShortSignature:{fromHex(t){const{infinity:e,sort:r,value:n}=ot((0,h.ensureBytes)("signatureHex",t,48)),i=H.ORDER,s=(0,h.bytesToNumberBE)(n);if(e)return ft.G1.ProjectivePoint.ZERO;const o=H.create(s&H.MASK),a=H.add(H.pow(o,D),H.create(ft.params.G1b));let c=H.sqrt(a);if(!c)throw new Error("Invalid compressed G1 point");const u=BigInt(r);c*q/i!==u&&(c=H.neg(c));const f=ft.G1.ProjectivePoint.fromAffine({x:o,y:c});return f.assertValidity(),f},toRawBytes:t=>ct(t),toHex:t=>(0,h.bytesToHex)(ct(t))}},G2:{Fp:Z,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),Gx:Z.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:Z.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")]),a:Z.ZERO,b:Z.fromBigTuple([V,V]),hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...it},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:t=>{const{x:e,y:r}=tt(Z.fromBigTuple(t));return Q(e,r)},isTorsionFree:(t,e)=>e.multiplyUnsafe(z).negate().equals(rt(t,e)),clearCofactor:(t,e)=>{const r=z;let n=e.multiplyUnsafe(r).negate(),i=rt(t,e),s=e.double();s=nt(t,s),s=s.subtract(i),i=n.add(i),i=i.multiplyUnsafe(r).negate(),s=s.add(i),s=s.subtract(n);return s.subtract(e)},fromBytes:t=>{const{compressed:e,infinity:r,sort:n,value:i}=ot(t);if(!e&&!r&&n||!e&&r&&n||n&&r&&e)throw new Error("Invalid encoding flag: "+(224&t[0]));const s=H.BYTES,o=(t,e,r)=>(0,h.bytesToNumberBE)(t.slice(e,r));if(96===i.length&&e){const t=ft.params.G2b,e=H.ORDER;if(r){if(i.reduce(((t,e)=>0!==t?e+1:e),0)>0)throw new Error("Invalid compressed G2 point");return{x:Z.ZERO,y:Z.ZERO}}const a=o(i,0,s),c=o(i,s,2*s),u=Z.create({c0:H.create(c),c1:H.create(a)}),f=Z.add(Z.pow(u,D),t);let h=Z.sqrt(f);const l=h.c1===M?h.c0*q/e:h.c1*q/e?C:M;return h=n&&l>0?h:Z.neg(h),{x:u,y:h}}if(192!==i.length||e)throw new Error("Invalid point G2, expected 96/192 bytes");{if(r){if(i.reduce(((t,e)=>0!==t?e+1:e),0)>0)throw new Error("Invalid uncompressed G2 point");return{x:Z.ZERO,y:Z.ZERO}}const t=o(i,0,s),e=o(i,s,2*s),n=o(i,2*s,3*s),a=o(i,3*s,4*s);return{x:Z.fromBigTuple([e,t]),y:Z.fromBigTuple([a,n])}}},toBytes:(t,e,r)=>{const{BYTES:n,ORDER:i}=H,s=e.equals(t.ZERO),{x:o,y:a}=e.toAffine();if(r){if(s)return(0,h.concatBytes)(st,(0,h.numberToBytesBE)(M,n));const t=Boolean(a.c1===M?a.c0*q/i:a.c1*q/i);return(0,h.concatBytes)(at((0,h.numberToBytesBE)(o.c1,n),{compressed:!0,sort:t}),(0,h.numberToBytesBE)(o.c0,n))}{if(s)return(0,h.concatBytes)(new Uint8Array([64]),new Uint8Array(4*n-1));const{re:t,im:e}=Z.reim(o),{re:r,im:i}=Z.reim(a);return(0,h.concatBytes)((0,h.numberToBytesBE)(e,n),(0,h.numberToBytesBE)(t,n),(0,h.numberToBytesBE)(i,n),(0,h.numberToBytesBE)(r,n))}},Signature:{fromHex(t){const{infinity:e,sort:r,value:n}=ot((0,h.ensureBytes)("signatureHex",t)),i=H.ORDER,s=n.length/2;if(48!==s&&96!==s)throw new Error("Invalid compressed signature length, must be 96 or 192");const o=(0,h.bytesToNumberBE)(n.slice(0,s)),a=(0,h.bytesToNumberBE)(n.slice(s));if(e)return ft.G2.ProjectivePoint.ZERO;const c=H.create(o&H.MASK),u=H.create(a),f=Z.create({c0:u,c1:c}),l=Z.add(Z.pow(f,D),ft.params.G2b);let d=Z.sqrt(l);if(!d)throw new Error("Failed to find a square root");const{re:p,im:y}=Z.reim(d),g=BigInt(r);(y>M&&y*q/i!==g||y===M&&p*q/i!==g)&&(d=Z.neg(d));const b=ft.G2.ProjectivePoint.fromAffine({x:f,y:d});return b.assertValidity(),b},toRawBytes:t=>ut(t),toHex:t=>(0,h.bytesToHex)(ut(t))}},params:{ateLoopSize:z,r:J.ORDER,xNegative:!0,twistType:"multiplicative"},htfDefaults:it,hash:c.JQ,randomBytes:u.O6});function ht(t,e,r){const n="string"==typeof t?t:(0,o.NC)(t),i="string"==typeof e?e:(0,o.NC)(e),s="string"==typeof r?r:(0,o.NC)(r);return ft.verifyShortSignature(i,s,n)}var lt,dt=r(16),pt=r(200);class yt extends i.e${constructor(t){super(`Invalid certificate: ${t}`)}}!function(t){t[t.Empty=0]="Empty",t[t.Fork=1]="Fork",t[t.Labeled=2]="Labeled",t[t.Leaf=3]="Leaf",t[t.Pruned=4]="Pruned"}(lt||(lt={}));class gt{constructor(t,e,r,i,s=5){this._rootKey=e,this._canisterId=r,this._blsVerify=i,this._maxAgeInMinutes=s,this.cert=n.Jx(new Uint8Array(t))}static async create(t){const e=gt.createUnverified(t);return await e.verify(),e}static createUnverified(t){let e=t.blsVerify;return e||(e=ht),new gt(t.certificate,t.rootKey,t.canisterId,e,t.maxAgeInMinutes)}lookup(t){return It(t,this.cert.tree)}lookup_label(t){return this.lookup([t])}async verify(){const t=await vt(this.cert.tree),e=await this._checkDelegationAndGetKey(this.cert.delegation),r=this.cert.signature,n=function(t){const e=bt.byteLength+wt;if(t.byteLength!==e)throw new TypeError(`BLS DER-encoded public key must be ${e} bytes long`);const r=t.slice(0,bt.byteLength);if(!(0,o.IA)(r,bt))throw new TypeError(`BLS DER-encoded public key is invalid. Expect the following prefix: ${bt}, but get ${r}`);return t.slice(bt.byteLength)}(e),i=(0,o.zo)(Et("ic-state-root"),t);let s=!1;const a=mt(this.lookup(["time"]));if(!a)throw new yt("Certificate does not contain a time");const c=60*this._maxAgeInMinutes*1e3,u=Date.now(),f=u-c,h=u+3e5,l=(0,dt.b)(a);if(l.getTime()<f)throw new yt(`Certificate is signed more than ${this._maxAgeInMinutes} minutes in the past. Certificate time: `+l.toISOString()+" Current time: "+new Date(u).toISOString());if(l.getTime()>h)throw new yt("Certificate is signed more than 5 minutes in the future. Certificate time: "+l.toISOString()+" Current time: "+new Date(u).toISOString());try{s=await this._blsVerify(new Uint8Array(n),new Uint8Array(r),new Uint8Array(i))}catch(t){s=!1}if(!s)throw new yt("Signature verification failed")}async _checkDelegationAndGetKey(t){if(!t)return this._rootKey;const e=await gt.createUnverified({certificate:t.certificate,rootKey:this._rootKey,canisterId:this._canisterId,blsVerify:this._blsVerify,maxAgeInMinutes:1/0});if(e.cert.delegation)throw new yt("Delegation certificates cannot be nested");if(await e.verify(),this._canisterId.toString()!==pt.t_){if(!At({canisterId:this._canisterId,subnetId:a.R.fromUint8Array(new Uint8Array(t.subnet_id)),tree:e.cert.tree}))throw new yt(`Canister ${this._canisterId} not in range of delegations for subnet 0x${(0,o.NC)(t.subnet_id)}`)}const r=mt(e.lookup(["subnet",t.subnet_id,"public_key"]));if(!r)throw new Error(`Could not find subnet key for subnet 0x${(0,o.NC)(t.subnet_id)}`);return r}}const bt=(0,o.H_)("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100"),wt=96;function mt(t){if(t.status===_t.Found)return t.value instanceof ArrayBuffer?t.value:t.value instanceof Uint8Array?t.value.buffer:void 0}async function vt(t){switch(t[0]){case lt.Empty:return(0,s.vp)(Et("ic-hashtree-empty"));case lt.Pruned:return t[1];case lt.Leaf:return(0,s.vp)((0,o.zo)(Et("ic-hashtree-leaf"),t[1]));case lt.Labeled:return(0,s.vp)((0,o.zo)(Et("ic-hashtree-labeled"),t[1],await vt(t[2])));case lt.Fork:return(0,s.vp)((0,o.zo)(Et("ic-hashtree-fork"),await vt(t[1]),await vt(t[2])));default:throw new Error("unreachable")}}function Et(t){const e=new Uint8Array([t.length]),r=(new TextEncoder).encode(t);return(0,o.zo)(e,r)}var _t,Bt;function It(t,e){if(0===t.length){if(e[0]===lt.Leaf){if(!e[1])throw new Error("Invalid tree structure for leaf");return e[1]instanceof ArrayBuffer?{status:_t.Found,value:e[1]}:e[1]instanceof Uint8Array?{status:_t.Found,value:e[1].buffer}:{status:_t.Found,value:e[1]}}return{status:_t.Found,value:e}}const r=xt("string"==typeof t[0]?(new TextEncoder).encode(t[0]):t[0],e);switch(r.status){case _t.Found:return It(t.slice(1),r.value);case Bt.Greater:case Bt.Less:return{status:_t.Absent};default:return r}}function Tt(t){switch(t[0]){case lt.Empty:return[];case lt.Fork:return Tt(t[1]).concat(Tt(t[2]));default:return[t]}}function xt(t,e){switch(e[0]){case lt.Labeled:return function(t,e){const r=new Uint8Array(t),n=new Uint8Array(e);for(let t=0;t<r.length;t++)if(r[t]>n[t])return!0;return!1}(t,e[1])?{status:Bt.Greater}:(0,o.IA)(t,e[1])?{status:_t.Found,value:e[2]}:{status:Bt.Less};case lt.Fork:const r=xt(t,e[1]);switch(r.status){case Bt.Greater:{const r=xt(t,e[2]);return r.status===Bt.Less?{status:_t.Absent}:r}case _t.Unknown:{let r=xt(t,e[2]);return r.status===Bt.Less?{status:_t.Unknown}:r}default:return r}case lt.Pruned:return{status:_t.Unknown};default:return{status:_t.Absent}}}function At(t){const{canisterId:e,subnetId:r,tree:i}=t,s=It(["subnet",r.toUint8Array(),"canister_ranges"],i);if(s.status!==_t.Found||!(s.value instanceof ArrayBuffer))throw new Error(`Could not find canister ranges for subnet ${r}`);return n.Jx(s.value).map((t=>[a.R.fromUint8Array(t[0]),a.R.fromUint8Array(t[1])])).some((t=>t[0].ltEq(e)&&t[1].gtEq(e)))}!function(t){t.Unknown="unknown",t.Absent="absent",t.Found="found"}(_t||(_t={})),function(t){t.Less="less",t.Greater="greater"}(Bt||(Bt={}))},79:(t,e,r)=>{"use strict";r.d(e,{F:()=>n});const n=3e5},819:(t,e,r)=>{"use strict";r.d(e,{BM:()=>a,eZ:()=>u,nt:()=>c});var n=r(753);const i=t=>{if(t<=127)return 1;if(t<=255)return 2;if(t<=65535)return 3;if(t<=16777215)return 4;throw new Error("Length too long (> 4 bytes)")},s=(t,e,r)=>{if(r<=127)return t[e]=r,1;if(r<=255)return t[e]=129,t[e+1]=r,2;if(r<=65535)return t[e]=130,t[e+1]=r>>8,t[e+2]=r,3;if(r<=16777215)return t[e]=131,t[e+1]=r>>16,t[e+2]=r>>8,t[e+3]=r,4;throw new Error("Length too long (> 4 bytes)")},o=(t,e)=>{if(t[e]<128)return 1;if(128===t[e])throw new Error("Invalid length 0");if(129===t[e])return 2;if(130===t[e])return 3;if(131===t[e])return 4;throw new Error("Length too long (> 4 bytes)")},a=(Uint8Array.from([48,12,6,10,43,6,1,4,1,131,184,67,1,1]),Uint8Array.from([48,5,6,3,43,101,112]));Uint8Array.from([48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,10]);function c(t,e){const r=2+i(t.byteLength+1),n=e.byteLength+r+t.byteLength;let o=0;const a=new Uint8Array(1+i(n)+n);return a[o++]=48,o+=s(a,o,n),a.set(e,o),o+=e.byteLength,a[o++]=3,o+=s(a,o,t.byteLength+1),a[o++]=0,a.set(new Uint8Array(t),o),a}const u=(t,e)=>{let r=0;const i=(t,e)=>{if(s[r++]!==t)throw new Error("Expected: "+e)},s=new Uint8Array(t);if(i(48,"sequence"),r+=o(s,r),!(0,n.IA)(s.slice(r,r+e.byteLength),e))throw new Error("Not the expected OID.");r+=e.byteLength,i(3,"bit string");const a=((t,e)=>{const r=o(t,e);if(1===r)return t[e];if(2===r)return t[e+1];if(3===r)return(t[e+1]<<8)+t[e+2];if(4===r)return(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];throw new Error("Length too long (> 4 bytes)")})(s,r)-1;r+=o(s,r),i(0,"0 padding");const c=s.slice(r);if(a!==c.length)throw new Error(`DER payload mismatch: Expected length ${a} actual length ${c.length}`);return c}},313:(t,e,r)=>{"use strict";r.d(e,{e$:()=>n});r(543),r(531);class n extends Error{constructor(t){super(t),this.message=t,this.name="AgentError",this.__proto__=n.prototype,Object.setPrototypeOf(this,n.prototype)}}},696:(t,e,r)=>{"use strict";r.d(e,{E:()=>c});var n,i,s=r(819),o=function(t,e,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(t,r):i?i.value=r:e.set(t,r),r},a=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};class c{constructor(t){if(n.set(this,void 0),i.set(this,void 0),t.byteLength!==c.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");o(this,n,t,"f"),o(this,i,c.derEncode(t),"f")}static from(t){return this.fromDer(t.toDer())}static fromRaw(t){return new c(t)}static fromDer(t){return new c(this.derDecode(t))}static derEncode(t){return(0,s.nt)(t,s.BM).buffer}static derDecode(t){const e=(0,s.eZ)(t,s.BM);if(e.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return e}get rawKey(){return a(this,n,"f")}get derKey(){return a(this,i,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}n=new WeakMap,i=new WeakMap,c.RAW_KEY_LENGTH=32},257:(t,e,r)=>{"use strict";r.d(e,{E$:()=>h,vH:()=>f,vp:()=>a});var n=r(688),i=r(756),s=r(748),o=r(753);function a(t){return(0,o.wy)(s.JQ.create().update(new Uint8Array(t)).digest())}function c(t){if(t instanceof i.Tagged)return c(t.value);if("string"==typeof t)return u(t);if("number"==typeof t)return a((0,n.dZ)(t));if(t instanceof ArrayBuffer||ArrayBuffer.isView(t))return a(t);if(Array.isArray(t)){const e=t.map(c);return a((0,o.zo)(...e))}if(t&&"object"==typeof t&&t._isPrincipal)return a(t.toUint8Array());if("object"==typeof t&&null!==t&&"function"==typeof t.toHash)return c(t.toHash());if("object"==typeof t)return h(t);if("bigint"==typeof t)return a((0,n.dZ)(t));throw Object.assign(new Error(`Attempt to hash a value of unsupported type: ${t}`),{value:t})}const u=t=>a((new TextEncoder).encode(t));function f(t){return h(t)}function h(t){const e=Object.entries(t).filter((([,t])=>void 0!==t)).map((([t,e])=>[u(t),c(e)])).sort((([t],[e])=>(0,o.qu)(t,e)));return a((0,o.zo)(...e.map((t=>(0,o.zo)(...t)))))}},753:(t,e,r)=>{"use strict";function n(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.byteLength),0));let r=0;for(const n of t)e.set(new Uint8Array(n),r),r+=n.byteLength;return e.buffer}function i(t){return[...new Uint8Array(t)].map((t=>t.toString(16).padStart(2,"0"))).join("")}r.d(e,{H_:()=>o,IA:()=>c,NC:()=>i,qu:()=>a,rS:()=>f,wy:()=>u,zo:()=>n});const s=new RegExp(/^[0-9a-fA-F]+$/);function o(t){if(!s.test(t))throw new Error("Invalid hexadecimal string.");const e=[...t].reduce(((t,e,r)=>(t[r/2|0]=(t[r/2|0]||"")+e,t)),[]).map((t=>Number.parseInt(t,16)));return new Uint8Array(e).buffer}function a(t,e){if(t.byteLength!==e.byteLength)return t.byteLength-e.byteLength;const r=new Uint8Array(t),n=new Uint8Array(e);for(let t=0;t<r.length;t++)if(r[t]!==n[t])return r[t]-n[t];return 0}function c(t,e){return 0===a(t,e)}function u(t){return new DataView(t.buffer,t.byteOffset,t.byteLength).buffer}function f(t){return t instanceof Uint8Array?u(t):t instanceof ArrayBuffer?t:Array.isArray(t)?u(new Uint8Array(t)):"buffer"in t?f(t.buffer):u(new Uint8Array(t))}},16:(t,e,r)=>{"use strict";r.d(e,{b:()=>s,o:()=>i});var n=r(688);const i=t=>(0,n.aC)(new n.P8(t)),s=t=>{const e=i(t);return new Date(Number(e)/1e6)}},688:(t,e,r)=>{"use strict";r.d(e,{xO:()=>n,P8:()=>o,rS:()=>c,aC:()=>p,dZ:()=>d});var n={};r.r(n),r.d(n,{Bool:()=>tt,BoolClass:()=>N,ConstructType:()=>x,Empty:()=>J,EmptyClass:()=>A,FixedIntClass:()=>k,FixedNatClass:()=>j,Float32:()=>st,Float64:()=>ot,FloatClass:()=>F,Func:()=>_t,FuncClass:()=>H,Int:()=>nt,Int16:()=>ct,Int32:()=>ut,Int64:()=>ft,Int8:()=>at,IntClass:()=>L,Nat:()=>it,Nat16:()=>lt,Nat32:()=>dt,Nat64:()=>pt,Nat8:()=>ht,NatClass:()=>P,Null:()=>et,NullClass:()=>R,Opt:()=>wt,OptClass:()=>M,PrimitiveType:()=>T,Principal:()=>yt,PrincipalClass:()=>G,Rec:()=>Et,RecClass:()=>V,Record:()=>mt,RecordClass:()=>C,Reserved:()=>Q,ReservedClass:()=>O,Service:()=>Bt,ServiceClass:()=>Z,Text:()=>rt,TextClass:()=>U,Tuple:()=>gt,TupleClass:()=>q,Type:()=>I,Unknown:()=>X,UnknownClass:()=>S,Variant:()=>vt,VariantClass:()=>D,Vec:()=>bt,VecClass:()=>$,Visitor:()=>B,decode:()=>Y,encode:()=>W});var i=r(543);function s(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.byteLength),0));let r=0;for(const n of t)e.set(new Uint8Array(n),r),r+=n.byteLength;return e}class o{constructor(t,e=(null==t?void 0:t.byteLength)||0){this._buffer=c(t||new ArrayBuffer(0)),this._view=new Uint8Array(this._buffer,0,e)}get buffer(){return c(this._view.slice())}get byteLength(){return this._view.byteLength}read(t){const e=this._view.subarray(0,t);return this._view=this._view.subarray(t),e.slice().buffer}readUint8(){const t=this._view[0];return this._view=this._view.subarray(1),t}write(t){const e=new Uint8Array(t),r=this._view.byteLength;this._view.byteOffset+this._view.byteLength+e.byteLength>=this._buffer.byteLength?this.alloc(e.byteLength):this._view=new Uint8Array(this._buffer,this._view.byteOffset,this._view.byteLength+e.byteLength),this._view.set(e,r)}get end(){return 0===this._view.byteLength}alloc(t){const e=new ArrayBuffer(1.2*(this._buffer.byteLength+t)|0),r=new Uint8Array(e,0,this._view.byteLength+t);r.set(this._view),this._buffer=e,this._view=r}}function a(t){return new DataView(t.buffer,t.byteOffset,t.byteLength).buffer}function c(t){return t instanceof Uint8Array?a(t):t instanceof ArrayBuffer?t:Array.isArray(t)?a(new Uint8Array(t)):"buffer"in t?c(t.buffer):a(new Uint8Array(t))}function u(t){if(/^_\d+_$/.test(t)||/^_0x[0-9a-fA-F]+_$/.test(t)){const e=+t.slice(1,-1);if(Number.isSafeInteger(e)&&e>=0&&e<2**32)return e}return function(t){const e=(new TextEncoder).encode(t);let r=0;for(const t of e)r=(223*r+t)%2**32;return r}(t)}function f(){throw new Error("unexpected end of buffer")}function h(t,e){return t.byteLength<e&&f(),t.read(e)}function l(t){const e=t.readUint8();return void 0===e&&f(),e}function d(t){if("number"==typeof t&&(t=BigInt(t)),t<BigInt(0))throw new Error("Cannot leb encode negative values.");const e=(t===BigInt(0)?0:Math.ceil(Math.log2(Number(t))))+1,r=new o(new ArrayBuffer(e),0);for(;;){const e=Number(t&BigInt(127));if((t/=BigInt(128))===BigInt(0)){r.write(new Uint8Array([e]));break}r.write(new Uint8Array([128|e]))}return r.buffer}function p(t){let e,r=BigInt(1),n=BigInt(0);do{e=l(t),n+=BigInt(127&e).valueOf()*r,r*=BigInt(128)}while(e>=128);return n}function y(t){"number"==typeof t&&(t=BigInt(t));const e=t<BigInt(0);e&&(t=-t-BigInt(1));const r=(t===BigInt(0)?0:Math.ceil(Math.log2(Number(t))))+1,n=new o(new ArrayBuffer(r),0);for(;;){const r=i(t);if(t/=BigInt(128),e&&t===BigInt(0)&&0!=(64&r)||!e&&t===BigInt(0)&&0==(64&r)){n.write(new Uint8Array([r]));break}n.write(new Uint8Array([128|r]))}function i(t){const r=t%BigInt(128);return Number(e?BigInt(128)-r-BigInt(1):r)}return n.buffer}function g(t){const e=new Uint8Array(t.buffer);let r=0;for(;r<e.byteLength;r++)if(e[r]<128){if(0==(64&e[r]))return p(t);break}const n=new Uint8Array(h(t,r+1));let i=BigInt(0);for(let t=n.byteLength-1;t>=0;t--)i=i*BigInt(128)+BigInt(128-(127&n[t])-1);return-i-BigInt(1)}function b(t,e){t=BigInt(t);const r=new o(new ArrayBuffer(Math.min(1,e)),0);let n=0,i=BigInt(256),s=BigInt(0),a=Number(t%i);for(r.write(new Uint8Array([a]));++n<e;)t<0&&s===BigInt(0)&&0!==a&&(s=BigInt(1)),a=Number((t/i-s)%BigInt(256)),r.write(new Uint8Array([a])),i*=BigInt(256);return r.buffer}function w(t,e){let r=BigInt(l(t)),n=BigInt(1),i=0;for(;++i<e;){n*=BigInt(256);r+=n*BigInt(l(t))}return r}function m(t){const e=BigInt(t);if(t<0)throw new RangeError("Input must be non-negative");return BigInt(1)<<e}const v="DIDL";function E(t,e,r){return t.map(((t,n)=>r(t,e[n])))}class _{constructor(){this._typs=[],this._idx=new Map}has(t){return this._idx.has(t.name)}add(t,e){const r=this._typs.length;this._idx.set(t.name,r),this._typs.push(e)}merge(t,e){const r=this._idx.get(t.name),n=this._idx.get(e);if(void 0===r)throw new Error("Missing type index for "+t);if(void 0===n)throw new Error("Missing type index for "+e);this._typs[r]=this._typs[n],this._typs.splice(n,1),this._idx.delete(e)}encode(){const t=d(this._typs.length),e=s(...this._typs);return s(t,e)}indexOf(t){if(!this._idx.has(t))throw new Error("Missing type index for "+t);return y(this._idx.get(t)||0)}}class B{visitType(t,e){throw new Error("Not implemented")}visitPrimitive(t,e){return this.visitType(t,e)}visitEmpty(t,e){return this.visitPrimitive(t,e)}visitBool(t,e){return this.visitPrimitive(t,e)}visitNull(t,e){return this.visitPrimitive(t,e)}visitReserved(t,e){return this.visitPrimitive(t,e)}visitText(t,e){return this.visitPrimitive(t,e)}visitNumber(t,e){return this.visitPrimitive(t,e)}visitInt(t,e){return this.visitNumber(t,e)}visitNat(t,e){return this.visitNumber(t,e)}visitFloat(t,e){return this.visitPrimitive(t,e)}visitFixedInt(t,e){return this.visitNumber(t,e)}visitFixedNat(t,e){return this.visitNumber(t,e)}visitPrincipal(t,e){return this.visitPrimitive(t,e)}visitConstruct(t,e){return this.visitType(t,e)}visitVec(t,e,r){return this.visitConstruct(t,r)}visitOpt(t,e,r){return this.visitConstruct(t,r)}visitRecord(t,e,r){return this.visitConstruct(t,r)}visitTuple(t,e,r){const n=e.map(((t,e)=>[`_${e}_`,t]));return this.visitRecord(t,n,r)}visitVariant(t,e,r){return this.visitConstruct(t,r)}visitRec(t,e,r){return this.visitConstruct(e,r)}visitFunc(t,e){return this.visitConstruct(t,e)}visitService(t,e){return this.visitConstruct(t,e)}}class I{display(){return this.name}valueToString(t){return K(t)}buildTypeTable(t){t.has(this)||this._buildTypeTableImpl(t)}}class T extends I{checkType(t){if(this.name!==t.name)throw new Error(`type mismatch: type on the wire ${t.name}, expect type ${this.name}`);return t}_buildTypeTableImpl(t){}}class x extends I{checkType(t){if(t instanceof V){const e=t.getType();if(void 0===e)throw new Error("type mismatch with uninitialized type");return e}throw new Error(`type mismatch: type on the wire ${t.name}, expect type ${this.name}`)}encodeType(t){return t.indexOf(this.name)}}class A extends T{accept(t,e){return t.visitEmpty(this,e)}covariant(t){throw new Error(`Invalid ${this.display()} argument: ${K(t)}`)}encodeValue(){throw new Error("Empty cannot appear as a function argument")}valueToString(){throw new Error("Empty cannot appear as a value")}encodeType(){return y(-17)}decodeValue(){throw new Error("Empty cannot appear as an output")}get name(){return"empty"}}class S extends I{checkType(t){throw new Error("Method not implemented for unknown.")}accept(t,e){throw t.visitType(this,e)}covariant(t){throw new Error(`Invalid ${this.display()} argument: ${K(t)}`)}encodeValue(){throw new Error("Unknown cannot appear as a function argument")}valueToString(){throw new Error("Unknown cannot appear as a value")}encodeType(){throw new Error("Unknown cannot be serialized")}decodeValue(t,e){let r,n=e.decodeValue(t,e);return Object(n)!==n&&(n=Object(n)),r=e instanceof V?()=>e.getType():()=>e,Object.defineProperty(n,"type",{value:r,writable:!0,enumerable:!1,configurable:!0}),n}_buildTypeTableImpl(){throw new Error("Unknown cannot be serialized")}get name(){return"Unknown"}}class N extends T{accept(t,e){return t.visitBool(this,e)}covariant(t){if("boolean"==typeof t)return!0;throw new Error(`Invalid ${this.display()} argument: ${K(t)}`)}encodeValue(t){return new Uint8Array([t?1:0])}encodeType(){return y(-2)}decodeValue(t,e){switch(this.checkType(e),l(t)){case 0:return!1;case 1:return!0;default:throw new Error("Boolean value out of range")}}get name(){return"bool"}}class R extends T{accept(t,e){return t.visitNull(this,e)}covariant(t){if(null===t)return!0;throw new Error(`Invalid ${this.display()} argument: ${K(t)}`)}encodeValue(){return new ArrayBuffer(0)}encodeType(){return y(-1)}decodeValue(t,e){return this.checkType(e),null}get name(){return"null"}}class O extends T{accept(t,e){return t.visitReserved(this,e)}covariant(t){return!0}encodeValue(){return new ArrayBuffer(0)}encodeType(){return y(-16)}decodeValue(t,e){return e.name!==this.name&&e.decodeValue(t,e),null}get name(){return"reserved"}}class U extends T{accept(t,e){return t.visitText(this,e)}covariant(t){if("string"==typeof t)return!0;throw new Error(`Invalid ${this.display()} argument: ${K(t)}`)}encodeValue(t){const e=(new TextEncoder).encode(t);return s(d(e.byteLength),e)}encodeType(){return y(-15)}decodeValue(t,e){this.checkType(e);const r=p(t),n=h(t,Number(r));return new TextDecoder("utf8",{fatal:!0}).decode(n)}get name(){return"text"}valueToString(t){return'"'+t+'"'}}class L extends T{accept(t,e){return t.visitInt(this,e)}covariant(t){if("bigint"==typeof t||Number.isInteger(t))return!0;throw new Error(`Invalid ${this.display()} argument: ${K(t)}`)}encodeValue(t){return y(t)}encodeType(){return y(-4)}decodeValue(t,e){return this.checkType(e),g(t)}get name(){return"int"}valueToString(t){return t.toString()}}class P extends T{accept(t,e){return t.visitNat(this,e)}covariant(t){if("bigint"==typeof t&&t>=BigInt(0)||Number.isInteger(t)&&t>=0)return!0;throw new Error(`Invalid ${this.display()} argument: ${K(t)}`)}encodeValue(t){return d(t)}encodeType(){return y(-3)}decodeValue(t,e){return this.checkType(e),p(t)}get name(){return"nat"}valueToString(t){return t.toString()}}class F extends T{constructor(t){if(super(),this._bits=t,32!==t&&64!==t)throw new Error("not a valid float type")}accept(t,e){return t.visitFloat(this,e)}covariant(t){if("number"==typeof t||t instanceof Number)return!0;throw new Error(`Invalid ${this.display()} argument: ${K(t)}`)}encodeValue(t){const e=new ArrayBuffer(this._bits/8),r=new DataView(e);return 32===this._bits?r.setFloat32(0,t,!0):r.setFloat64(0,t,!0),e}encodeType(){return y(32===this._bits?-13:-14)}decodeValue(t,e){this.checkType(e);const r=h(t,this._bits/8),n=new DataView(r);return 32===this._bits?n.getFloat32(0,!0):n.getFloat64(0,!0)}get name(){return"float"+this._bits}valueToString(t){return t.toString()}}class k extends T{constructor(t){super(),this._bits=t}accept(t,e){return t.visitFixedInt(this,e)}covariant(t){const e=m(this._bits-1)*BigInt(-1),r=m(this._bits-1)-BigInt(1);let n=!1;if("bigint"==typeof t)n=t>=e&&t<=r;else if(Number.isInteger(t)){const i=BigInt(t);n=i>=e&&i<=r}else n=!1;if(n)return!0;throw new Error(`Invalid ${this.display()} argument: ${K(t)}`)}encodeValue(t){return b(t,this._bits/8)}encodeType(){return y(-9-(Math.log2(this._bits)-3))}decodeValue(t,e){this.checkType(e);const r=function(t,e){let r=w(t,e);const n=BigInt(2)**(BigInt(8)*BigInt(e-1)+BigInt(7));return r>=n&&(r-=n*BigInt(2)),r}(t,this._bits/8);return this._bits<=32?Number(r):r}get name(){return`int${this._bits}`}valueToString(t){return t.toString()}}class j extends T{constructor(t){super(),this._bits=t}accept(t,e){return t.visitFixedNat(this,e)}covariant(t){const e=m(this._bits);let r=!1;if("bigint"==typeof t&&t>=BigInt(0))r=t<e;else if(Number.isInteger(t)&&t>=0){r=BigInt(t)<e}else r=!1;if(r)return!0;throw new Error(`Invalid ${this.display()} argument: ${K(t)}`)}encodeValue(t){return function(t,e){if(BigInt(t)<BigInt(0))throw new Error("Cannot write negative values.");return b(t,e)}(t,this._bits/8)}encodeType(){return y(-5-(Math.log2(this._bits)-3))}decodeValue(t,e){this.checkType(e);const r=w(t,this._bits/8);return this._bits<=32?Number(r):r}get name(){return`nat${this._bits}`}valueToString(t){return t.toString()}}class $ extends x{constructor(t){super(),this._type=t,this._blobOptimization=!1,t instanceof j&&8===t._bits&&(this._blobOptimization=!0)}accept(t,e){return t.visitVec(this,this._type,e)}covariant(t){const e=this._type instanceof j||this._type instanceof k?this._type._bits:0;if(ArrayBuffer.isView(t)&&e==8*t.BYTES_PER_ELEMENT||Array.isArray(t)&&t.every(((t,e)=>{try{return this._type.covariant(t)}catch(t){throw new Error(`Invalid ${this.display()} argument: \n\nindex ${e} -> ${t.message}`)}})))return!0;throw new Error(`Invalid ${this.display()} argument: ${K(t)}`)}encodeValue(t){const e=d(t.length);if(this._blobOptimization)return s(e,new Uint8Array(t));if(ArrayBuffer.isView(t))return s(e,new Uint8Array(t.buffer));const r=new o(new ArrayBuffer(e.byteLength+t.length),0);r.write(e);for(const e of t){const t=this._type.encodeValue(e);r.write(new Uint8Array(t))}return r.buffer}_buildTypeTableImpl(t){this._type.buildTypeTable(t);const e=y(-19),r=this._type.encodeType(t);t.add(this,s(e,r))}decodeValue(t,e){const r=this.checkType(e);if(!(r instanceof $))throw new Error("Not a vector type");const n=Number(p(t));if(this._type instanceof j){if(8==this._type._bits)return new Uint8Array(t.read(n));if(16==this._type._bits)return new Uint16Array(t.read(2*n));if(32==this._type._bits)return new Uint32Array(t.read(4*n));if(64==this._type._bits)return new BigUint64Array(t.read(8*n))}if(this._type instanceof k){if(8==this._type._bits)return new Int8Array(t.read(n));if(16==this._type._bits)return new Int16Array(t.read(2*n));if(32==this._type._bits)return new Int32Array(t.read(4*n));if(64==this._type._bits)return new BigInt64Array(t.read(8*n))}const i=[];for(let e=0;e<n;e++)i.push(this._type.decodeValue(t,r._type));return i}get name(){return`vec ${this._type.name}`}display(){return`vec ${this._type.display()}`}valueToString(t){return"vec {"+t.map((t=>this._type.valueToString(t))).join("; ")+"}"}}class M extends x{constructor(t){super(),this._type=t}accept(t,e){return t.visitOpt(this,this._type,e)}covariant(t){try{if(Array.isArray(t)&&(0===t.length||1===t.length&&this._type.covariant(t[0])))return!0}catch(e){throw new Error(`Invalid ${this.display()} argument: ${K(t)} \n\n-> ${e.message}`)}throw new Error(`Invalid ${this.display()} argument: ${K(t)}`)}encodeValue(t){return 0===t.length?new Uint8Array([0]):s(new Uint8Array([1]),this._type.encodeValue(t[0]))}_buildTypeTableImpl(t){this._type.buildTypeTable(t);const e=y(-18),r=this._type.encodeType(t);t.add(this,s(e,r))}decodeValue(t,e){const r=this.checkType(e);if(!(r instanceof M))throw new Error("Not an option type");switch(l(t)){case 0:return[];case 1:return[this._type.decodeValue(t,r._type)];default:throw new Error("Not an option value")}}get name(){return`opt ${this._type.name}`}display(){return`opt ${this._type.display()}`}valueToString(t){return 0===t.length?"null":`opt ${this._type.valueToString(t[0])}`}}class C extends x{constructor(t={}){super(),this._fields=Object.entries(t).sort(((t,e)=>u(t[0])-u(e[0])))}accept(t,e){return t.visitRecord(this,this._fields,e)}tryAsTuple(){const t=[];for(let e=0;e<this._fields.length;e++){const[r,n]=this._fields[e];if(r!==`_${e}_`)return null;t.push(n)}return t}covariant(t){if("object"==typeof t&&this._fields.every((([e,r])=>{if(!t.hasOwnProperty(e))throw new Error(`Record is missing key "${e}".`);try{return r.covariant(t[e])}catch(t){throw new Error(`Invalid ${this.display()} argument: \n\nfield ${e} -> ${t.message}`)}})))return!0;throw new Error(`Invalid ${this.display()} argument: ${K(t)}`)}encodeValue(t){const e=this._fields.map((([e])=>t[e]));return s(...E(this._fields,e,(([,t],e)=>t.encodeValue(e))))}_buildTypeTableImpl(t){this._fields.forEach((([e,r])=>r.buildTypeTable(t)));const e=y(-20),r=d(this._fields.length),n=this._fields.map((([e,r])=>s(d(u(e)),r.encodeType(t))));t.add(this,s(e,r,s(...n)))}decodeValue(t,e){const r=this.checkType(e);if(!(r instanceof C))throw new Error("Not a record type");const n={};let i=0,s=0;for(;s<r._fields.length;){const[e,o]=r._fields[s];if(i>=this._fields.length){o.decodeValue(t,o),s++;continue}const[a,c]=this._fields[i],f=u(this._fields[i][0]),h=u(e);if(f===h)n[a]=c.decodeValue(t,o),i++,s++;else if(h>f){if(!(c instanceof M||c instanceof O))throw new Error("Cannot find required field "+a);n[a]=[],i++}else o.decodeValue(t,o),s++}for(const[t,e]of this._fields.slice(i)){if(!(e instanceof M||e instanceof O))throw new Error("Cannot find required field "+t);n[t]=[]}return n}get name(){return`record {${this._fields.map((([t,e])=>t+":"+e.name)).join("; ")}}`}display(){return`record {${this._fields.map((([t,e])=>t+":"+e.display())).join("; ")}}`}valueToString(t){const e=this._fields.map((([e])=>t[e]));return`record {${E(this._fields,e,(([t,e],r)=>t+"="+e.valueToString(r))).join("; ")}}`}}class q extends C{constructor(t){const e={};t.forEach(((t,r)=>e["_"+r+"_"]=t)),super(e),this._components=t}accept(t,e){return t.visitTuple(this,this._components,e)}covariant(t){if(Array.isArray(t)&&t.length>=this._fields.length&&this._components.every(((e,r)=>{try{return e.covariant(t[r])}catch(t){throw new Error(`Invalid ${this.display()} argument: \n\nindex ${r} -> ${t.message}`)}})))return!0;throw new Error(`Invalid ${this.display()} argument: ${K(t)}`)}encodeValue(t){return s(...E(this._components,t,((t,e)=>t.encodeValue(e))))}decodeValue(t,e){const r=this.checkType(e);if(!(r instanceof q))throw new Error("not a tuple type");if(r._components.length<this._components.length)throw new Error("tuple mismatch");const n=[];for(const[e,i]of r._components.entries())e>=this._components.length?i.decodeValue(t,i):n.push(this._components[e].decodeValue(t,i));return n}display(){return`record {${this._components.map((t=>t.display())).join("; ")}}`}valueToString(t){return`record {${E(this._components,t,((t,e)=>t.valueToString(e))).join("; ")}}`}}class D extends x{constructor(t={}){super(),this._fields=Object.entries(t).sort(((t,e)=>u(t[0])-u(e[0])))}accept(t,e){return t.visitVariant(this,this._fields,e)}covariant(t){if("object"==typeof t&&1===Object.entries(t).length&&this._fields.every((([e,r])=>{try{return!t.hasOwnProperty(e)||r.covariant(t[e])}catch(t){throw new Error(`Invalid ${this.display()} argument: \n\nvariant ${e} -> ${t.message}`)}})))return!0;throw new Error(`Invalid ${this.display()} argument: ${K(t)}`)}encodeValue(t){for(let e=0;e<this._fields.length;e++){const[r,n]=this._fields[e];if(t.hasOwnProperty(r)){return s(d(e),n.encodeValue(t[r]))}}throw Error("Variant has no data: "+t)}_buildTypeTableImpl(t){this._fields.forEach((([,e])=>{e.buildTypeTable(t)}));const e=y(-21),r=d(this._fields.length),n=this._fields.map((([e,r])=>s(d(u(e)),r.encodeType(t))));t.add(this,s(e,r,...n))}decodeValue(t,e){const r=this.checkType(e);if(!(r instanceof D))throw new Error("Not a variant type");const n=Number(p(t));if(n>=r._fields.length)throw Error("Invalid variant index: "+n);const[i,s]=r._fields[n];for(const[e,r]of this._fields)if(u(i)===u(e)){return{[e]:r.decodeValue(t,s)}}throw new Error("Cannot find field hash "+i)}get name(){return`variant {${this._fields.map((([t,e])=>t+":"+e.name)).join("; ")}}`}display(){return`variant {${this._fields.map((([t,e])=>t+("null"===e.name?"":`:${e.display()}`))).join("; ")}}`}valueToString(t){for(const[e,r]of this._fields)if(t.hasOwnProperty(e)){const n=r.valueToString(t[e]);return"null"===n?`variant {${e}}`:`variant {${e}=${n}}`}throw new Error("Variant has no data: "+t)}}class V extends x{constructor(){super(...arguments),this._id=V._counter++,this._type=void 0}accept(t,e){if(!this._type)throw Error("Recursive type uninitialized.");return t.visitRec(this,this._type,e)}fill(t){this._type=t}getType(){return this._type}covariant(t){if(this._type&&this._type.covariant(t))return!0;throw new Error(`Invalid ${this.display()} argument: ${K(t)}`)}encodeValue(t){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.encodeValue(t)}_buildTypeTableImpl(t){if(!this._type)throw Error("Recursive type uninitialized.");t.add(this,new Uint8Array([])),this._type.buildTypeTable(t),t.merge(this,this._type.name)}decodeValue(t,e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.decodeValue(t,e)}get name(){return`rec_${this._id}`}display(){if(!this._type)throw Error("Recursive type uninitialized.");return`μ${this.name}.${this._type.name}`}valueToString(t){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.valueToString(t)}}function z(t){if(1!==l(t))throw new Error("Cannot decode principal");const e=Number(p(t));return i.R.fromUint8Array(new Uint8Array(h(t,e)))}V._counter=0;class G extends T{accept(t,e){return t.visitPrincipal(this,e)}covariant(t){if(t&&t._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${K(t)}`)}encodeValue(t){const e=t.toUint8Array(),r=d(e.byteLength);return s(new Uint8Array([1]),r,e)}encodeType(){return y(-24)}decodeValue(t,e){return this.checkType(e),z(t)}get name(){return"principal"}valueToString(t){return`${this.name} "${t.toText()}"`}}class H extends x{constructor(t,e,r=[]){super(),this.argTypes=t,this.retTypes=e,this.annotations=r}static argsToString(t,e){if(t.length!==e.length)throw new Error("arity mismatch");return"("+t.map(((t,r)=>t.valueToString(e[r]))).join(", ")+")"}accept(t,e){return t.visitFunc(this,e)}covariant(t){if(Array.isArray(t)&&2===t.length&&t[0]&&t[0]._isPrincipal&&"string"==typeof t[1])return!0;throw new Error(`Invalid ${this.display()} argument: ${K(t)}`)}encodeValue([t,e]){const r=t.toUint8Array(),n=d(r.byteLength),i=s(new Uint8Array([1]),n,r),o=(new TextEncoder).encode(e),a=d(o.byteLength);return s(new Uint8Array([1]),i,a,o)}_buildTypeTableImpl(t){this.argTypes.forEach((e=>e.buildTypeTable(t))),this.retTypes.forEach((e=>e.buildTypeTable(t)));const e=y(-22),r=d(this.argTypes.length),n=s(...this.argTypes.map((e=>e.encodeType(t)))),i=d(this.retTypes.length),o=s(...this.retTypes.map((e=>e.encodeType(t)))),a=d(this.annotations.length),c=s(...this.annotations.map((t=>this.encodeAnnotation(t))));t.add(this,s(e,r,n,i,o,a,c))}decodeValue(t){if(1!==l(t))throw new Error("Cannot decode function reference");const e=z(t),r=h(t,Number(p(t)));return[e,new TextDecoder("utf8",{fatal:!0}).decode(r)]}get name(){return`(${this.argTypes.map((t=>t.name)).join(", ")}) -> (${this.retTypes.map((t=>t.name)).join(", ")})${" "+this.annotations.join(" ")}`}valueToString([t,e]){return`func "${t.toText()}".${e}`}display(){return`(${this.argTypes.map((t=>t.display())).join(", ")}) → (${this.retTypes.map((t=>t.display())).join(", ")})${" "+this.annotations.join(" ")}`}encodeAnnotation(t){if("query"===t)return new Uint8Array([1]);if("oneway"===t)return new Uint8Array([2]);if("composite_query"===t)return new Uint8Array([3]);throw new Error("Illegal function annotation")}}class Z extends x{constructor(t){super(),this._fields=Object.entries(t).sort(((t,e)=>t[0]<e[0]?-1:t[0]>e[0]?1:0))}accept(t,e){return t.visitService(this,e)}covariant(t){if(t&&t._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${K(t)}`)}encodeValue(t){const e=t.toUint8Array(),r=d(e.length);return s(new Uint8Array([1]),r,e)}_buildTypeTableImpl(t){this._fields.forEach((([e,r])=>r.buildTypeTable(t)));const e=y(-23),r=d(this._fields.length),n=this._fields.map((([e,r])=>{const n=(new TextEncoder).encode(e);return s(d(n.length),n,r.encodeType(t))}));t.add(this,s(e,r,...n))}decodeValue(t){return z(t)}get name(){return`service {${this._fields.map((([t,e])=>t+":"+e.name)).join("; ")}}`}valueToString(t){return`service "${t.toText()}"`}}function K(t){const e=JSON.stringify(t,((t,e)=>"bigint"==typeof e?`BigInt(${e})`:e));return e&&e.length>400?e.substring(0,397)+"...":e}function W(t,e){if(e.length<t.length)throw Error("Wrong number of message arguments");const r=new _;t.forEach((t=>t.buildTypeTable(r)));const n=(new TextEncoder).encode(v),i=r.encode(),o=d(e.length),a=s(...t.map((t=>t.encodeType(r)))),c=s(...E(t,e,((t,e)=>{try{t.covariant(e)}catch(t){throw new Error(t.message+"\n\n")}return t.encodeValue(e)})));return s(n,i,o,a,c)}function Y(t,e){const r=new o(e);if(e.byteLength<v.length)throw new Error("Message length smaller than magic number");const n=h(r,v.length),i=(new TextDecoder).decode(n);if(i!==v)throw new Error("Wrong magic number: "+JSON.stringify(i));const[s,a]=function(t){const e=[],r=Number(p(t));for(let n=0;n<r;n++){const r=Number(g(t));switch(r){case-18:case-19:{const n=Number(g(t));e.push([r,n]);break}case-20:case-21:{const n=[];let i,s=Number(p(t));for(;s--;){const e=Number(p(t));if(e>=Math.pow(2,32))throw new Error("field id out of 32-bit range");if("number"==typeof i&&i>=e)throw new Error("field id collision or not sorted");i=e;const r=Number(g(t));n.push([e,r])}e.push([r,n]);break}case-22:{const n=[];let i=Number(p(t));for(;i--;)n.push(Number(g(t)));const s=[];let o=Number(p(t));for(;o--;)s.push(Number(g(t)));const a=[];let c=Number(p(t));for(;c--;){switch(Number(p(t))){case 1:a.push("query");break;case 2:a.push("oneway");break;case 3:a.push("composite_query");break;default:throw new Error("unknown annotation")}}e.push([r,[n,s,a]]);break}case-23:{let n=Number(p(t));const i=[];for(;n--;){const e=Number(p(t)),r=(new TextDecoder).decode(h(t,e)),n=g(t);i.push([r,n])}e.push([r,i]);break}default:throw new Error("Illegal op_code: "+r)}}const n=[],i=Number(p(t));for(let e=0;e<i;e++)n.push(Number(g(t)));return[e,n]}(r);if(a.length<t.length)throw new Error("Wrong number of return values");const c=s.map((t=>Et()));function u(t){if(t<-24)throw new Error("future value not supported");if(t<0)switch(t){case-1:return et;case-2:return tt;case-3:return it;case-4:return nt;case-5:return ht;case-6:return lt;case-7:return dt;case-8:return pt;case-9:return at;case-10:return ct;case-11:return ut;case-12:return ft;case-13:return st;case-14:return ot;case-15:return rt;case-16:return Q;case-17:return J;case-24:return yt;default:throw new Error("Illegal op_code: "+t)}if(t>=s.length)throw new Error("type index out of range");return c[t]}function f(t){switch(t[0]){case-19:return bt(u(t[1]));case-18:return wt(u(t[1]));case-20:{const e={};for(const[r,n]of t[1]){e[`_${r}_`]=u(n)}const r=mt(e),n=r.tryAsTuple();return Array.isArray(n)?gt(...n):r}case-21:{const e={};for(const[r,n]of t[1]){e[`_${r}_`]=u(n)}return vt(e)}case-22:{const[e,r,n]=t[1];return _t(e.map((t=>u(t))),r.map((t=>u(t))),n)}case-23:{const e={},r=t[1];for(const[t,n]of r){let r=u(n);if(r instanceof V&&(r=r.getType()),!(r instanceof H))throw new Error("Illegal service definition: services can only contain functions");e[t]=r}return Bt(e)}default:throw new Error("Illegal op_code: "+t[0])}}s.forEach(((t,e)=>{if(-22===t[0]){const r=f(t);c[e].fill(r)}})),s.forEach(((t,e)=>{if(-22!==t[0]){const r=f(t);c[e].fill(r)}}));const l=a.map((t=>u(t))),d=t.map(((t,e)=>t.decodeValue(r,l[e])));for(let e=t.length;e<l.length;e++)l[e].decodeValue(r,l[e]);if(r.byteLength>0)throw new Error("decode: Left-over bytes");return d}const J=new A,Q=new O,X=new S,tt=new N,et=new R,rt=new U,nt=new L,it=new P,st=new F(32),ot=new F(64),at=new k(8),ct=new k(16),ut=new k(32),ft=new k(64),ht=new j(8),lt=new j(16),dt=new j(32),pt=new j(64),yt=new G;function gt(...t){return new q(t)}function bt(t){return new $(t)}function wt(t){return new M(t)}function mt(t){return new C(t)}function vt(t){return new D(t)}function Et(){return new V}function _t(t,e,r=[]){return new H(t,e,r)}function Bt(t){return new Z(t)}},543:(t,e,r)=>{"use strict";r.d(e,{R:()=>c});const n="abcdefghijklmnopqrstuvwxyz234567",i=Object.create(null);for(let t=0;t<32;t++)i[n[t]]=t;i[0]=i.o,i[1]=i.i;const s=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);var o=r(748);const a="__principal__";class c{constructor(t){this._arr=t,this._isPrincipal=!0}static anonymous(){return new this(new Uint8Array([4]))}static managementCanister(){return this.fromHex("aaaaa-aa")}static selfAuthenticating(t){const e=(r=t,o.gX.create().update(new Uint8Array(r)).digest());var r;return new this(new Uint8Array([...e,2]))}static from(t){if("string"==typeof t)return c.fromText(t);if(Object.getPrototypeOf(t)===Uint8Array.prototype)return new c(t);if("object"==typeof t&&null!==t&&!0===t._isPrincipal)return new c(t._arr);throw new Error(`Impossible to convert ${JSON.stringify(t)} to Principal.`)}static fromHex(t){return new this(new Uint8Array((null!==(e=t.match(/.{1,2}/g))&&void 0!==e?e:[]).map((t=>parseInt(t,16)))));var e}static fromText(t){let e=t;if(t.includes(a)){const r=JSON.parse(t);a in r&&(e=r[a])}let r=function(t){let e=0,r=0;const n=new Uint8Array(4*t.length/3|0);let s=0;function o(t){let o=i[t.toLowerCase()];if(void 0===o)throw new Error(`Invalid character: ${JSON.stringify(t)}`);o<<=3,r|=o>>>e,e+=5,e>=8&&(n[s++]=r,e-=8,r=e>0?o<<5-e&255:0)}for(const e of t)o(e);return n.slice(0,s)}(e.toLowerCase().replace(/-/g,""));r=r.slice(4,r.length);const n=new this(r);if(n.toText()!==e)throw new Error(`Principal "${n.toText()}" does not have a valid checksum (original value "${e}" may not be a valid Principal ID).`);return n}static fromUint8Array(t){return new this(t)}isAnonymous(){return 1===this._arr.byteLength&&4===this._arr[0]}toUint8Array(){return this._arr}toHex(){return(t=this._arr,t.reduce(((t,e)=>t+e.toString(16).padStart(2,"0")),"")).toUpperCase();var t}toText(){const t=new ArrayBuffer(4);new DataView(t).setUint32(0,function(t){const e=new Uint8Array(t);let r=-1;for(let t=0;t<e.length;t++){const n=e[t];r=s[255&(n^r)]^r>>>8}return(-1^r)>>>0}(this._arr));const e=new Uint8Array(t),r=Uint8Array.from(this._arr),i=function(t){let e=0,r=0,i="";for(let o=0;o<t.length;)o+=(s=t[o],e<0?r|=s>>-e:r=s<<e&248,e>3?(e-=8,1):(e<4&&(i+=n[r>>3],e+=5),0));var s;return i+(e<0?n[r>>3]:"")}(new Uint8Array([...e,...r])).match(/.{1,5}/g);if(!i)throw new Error;return i.join("-")}toString(){return this.toText()}toJSON(){return{[a]:this.toText()}}compareTo(t){for(let e=0;e<Math.min(this._arr.length,t._arr.length);e++){if(this._arr[e]<t._arr[e])return"lt";if(this._arr[e]>t._arr[e])return"gt"}return this._arr.length<t._arr.length?"lt":this._arr.length>t._arr.length?"gt":"eq"}ltEq(t){const e=this.compareTo(t);return"lt"==e||"eq"==e}gtEq(t){const e=this.compareTo(t);return"gt"==e||"eq"==e}}},742:(t,e)=>{"use strict";e.byteLength=function(t){var e=a(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,s=a(t),o=s[0],c=s[1],u=new i(function(t,e,r){return 3*(e+r)/4-r}(0,o,c)),f=0,h=c>0?o-4:o;for(r=0;r<h;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],u[f++]=e>>16&255,u[f++]=e>>8&255,u[f++]=255&e;2===c&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,u[f++]=255&e);1===c&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,u[f++]=e>>8&255,u[f++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,s=[],o=16383,a=0,u=n-i;a<u;a+=o)s.push(c(t,a,a+o>u?u:a+o));1===i?(e=t[n-1],s.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],s.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)r[o]=s[o],n[s.charCodeAt(o)]=o;function a(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t,e,n){for(var i,s,o=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(r[(s=i)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},431:function(t,e,r){var n;!function(i){"use strict";var s,o=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,c=Math.floor,u="[BigNumber Error] ",f=u+"Number primitive has more than 15 significant digits: ",h=1e14,l=14,d=9007199254740991,p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],y=1e7,g=1e9;function b(t){var e=0|t;return t>0||t===e?e:e-1}function w(t){for(var e,r,n=1,i=t.length,s=t[0]+"";n<i;){for(e=t[n++]+"",r=l-e.length;r--;e="0"+e);s+=e}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function m(t,e){var r,n,i=t.c,s=e.c,o=t.s,a=e.s,c=t.e,u=e.e;if(!o||!a)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=c==u,!i||!s)return n?0:!i^r?1:-1;if(!n)return c>u^r?1:-1;for(a=(c=i.length)<(u=s.length)?c:u,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return c==u?0:c>u^r?1:-1}function v(t,e,r,n){if(t<e||t>r||t!==c(t))throw Error(u+(n||"Argument")+("number"==typeof t?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function E(t){var e=t.c.length-1;return b(t.e/l)==e&&t.c[e]%2!=0}function _(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function B(t,e,r){var n,i;if(e<0){for(i=r+".";++e;i+=r);t=i+t}else if(++e>(n=t.length)){for(i=r,e-=n;--e;i+=r);t+=i}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}s=function t(e){var r,n,i,s,I,T,x,A,S,N,R=z.prototype={constructor:z,toString:null,valueOf:null},O=new z(1),U=20,L=4,P=-7,F=21,k=-1e7,j=1e7,$=!1,M=1,C=0,q={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},D="0123456789abcdefghijklmnopqrstuvwxyz",V=!0;function z(t,e){var r,s,a,u,h,p,y,g,b=this;if(!(b instanceof z))return new z(t,e);if(null==e){if(t&&!0===t._isBigNumber)return b.s=t.s,void(!t.c||t.e>j?b.c=b.e=null:t.e<k?b.c=[b.e=0]:(b.e=t.e,b.c=t.c.slice()));if((p="number"==typeof t)&&0*t==0){if(b.s=1/t<0?(t=-t,-1):1,t===~~t){for(u=0,h=t;h>=10;h/=10,u++);return void(u>j?b.c=b.e=null:(b.e=u,b.c=[t]))}g=String(t)}else{if(!o.test(g=String(t)))return i(b,g,p);b.s=45==g.charCodeAt(0)?(g=g.slice(1),-1):1}(u=g.indexOf("."))>-1&&(g=g.replace(".","")),(h=g.search(/e/i))>0?(u<0&&(u=h),u+=+g.slice(h+1),g=g.substring(0,h)):u<0&&(u=g.length)}else{if(v(e,2,D.length,"Base"),10==e&&V)return K(b=new z(t),U+b.e+1,L);if(g=String(t),p="number"==typeof t){if(0*t!=0)return i(b,g,p,e);if(b.s=1/t<0?(g=g.slice(1),-1):1,z.DEBUG&&g.replace(/^0\.0*|\./,"").length>15)throw Error(f+t)}else b.s=45===g.charCodeAt(0)?(g=g.slice(1),-1):1;for(r=D.slice(0,e),u=h=0,y=g.length;h<y;h++)if(r.indexOf(s=g.charAt(h))<0){if("."==s){if(h>u){u=y;continue}}else if(!a&&(g==g.toUpperCase()&&(g=g.toLowerCase())||g==g.toLowerCase()&&(g=g.toUpperCase()))){a=!0,h=-1,u=0;continue}return i(b,String(t),p,e)}p=!1,(u=(g=n(g,e,10,b.s)).indexOf("."))>-1?g=g.replace(".",""):u=g.length}for(h=0;48===g.charCodeAt(h);h++);for(y=g.length;48===g.charCodeAt(--y););if(g=g.slice(h,++y)){if(y-=h,p&&z.DEBUG&&y>15&&(t>d||t!==c(t)))throw Error(f+b.s*t);if((u=u-h-1)>j)b.c=b.e=null;else if(u<k)b.c=[b.e=0];else{if(b.e=u,b.c=[],h=(u+1)%l,u<0&&(h+=l),h<y){for(h&&b.c.push(+g.slice(0,h)),y-=l;h<y;)b.c.push(+g.slice(h,h+=l));h=l-(g=g.slice(h)).length}else h-=y;for(;h--;g+="0");b.c.push(+g)}}else b.c=[b.e=0]}function G(t,e,r,n){var i,s,o,a,c;if(null==r?r=L:v(r,0,8),!t.c)return t.toString();if(i=t.c[0],o=t.e,null==e)c=w(t.c),c=1==n||2==n&&(o<=P||o>=F)?_(c,o):B(c,o,"0");else if(s=(t=K(new z(t),e,r)).e,a=(c=w(t.c)).length,1==n||2==n&&(e<=s||s<=P)){for(;a<e;c+="0",a++);c=_(c,s)}else if(e-=o,c=B(c,s,"0"),s+1>a){if(--e>0)for(c+=".";e--;c+="0");}else if((e+=s-a)>0)for(s+1==a&&(c+=".");e--;c+="0");return t.s<0&&i?"-"+c:c}function H(t,e){for(var r,n,i=1,s=new z(t[0]);i<t.length;i++)(!(n=new z(t[i])).s||(r=m(s,n))===e||0===r&&s.s===e)&&(s=n);return s}function Z(t,e,r){for(var n=1,i=e.length;!e[--i];e.pop());for(i=e[0];i>=10;i/=10,n++);return(r=n+r*l-1)>j?t.c=t.e=null:r<k?t.c=[t.e=0]:(t.e=r,t.c=e),t}function K(t,e,r,n){var i,s,o,u,f,d,y,g=t.c,b=p;if(g){t:{for(i=1,u=g[0];u>=10;u/=10,i++);if((s=e-i)<0)s+=l,o=e,f=g[d=0],y=c(f/b[i-o-1]%10);else if((d=a((s+1)/l))>=g.length){if(!n)break t;for(;g.length<=d;g.push(0));f=y=0,i=1,o=(s%=l)-l+1}else{for(f=u=g[d],i=1;u>=10;u/=10,i++);y=(o=(s%=l)-l+i)<0?0:c(f/b[i-o-1]%10)}if(n=n||e<0||null!=g[d+1]||(o<0?f:f%b[i-o-1]),n=r<4?(y||n)&&(0==r||r==(t.s<0?3:2)):y>5||5==y&&(4==r||n||6==r&&(s>0?o>0?f/b[i-o]:0:g[d-1])%10&1||r==(t.s<0?8:7)),e<1||!g[0])return g.length=0,n?(e-=t.e+1,g[0]=b[(l-e%l)%l],t.e=-e||0):g[0]=t.e=0,t;if(0==s?(g.length=d,u=1,d--):(g.length=d+1,u=b[l-s],g[d]=o>0?c(f/b[i-o]%b[o])*u:0),n)for(;;){if(0==d){for(s=1,o=g[0];o>=10;o/=10,s++);for(o=g[0]+=u,u=1;o>=10;o/=10,u++);s!=u&&(t.e++,g[0]==h&&(g[0]=1));break}if(g[d]+=u,g[d]!=h)break;g[d--]=0,u=1}for(s=g.length;0===g[--s];g.pop());}t.e>j?t.c=t.e=null:t.e<k&&(t.c=[t.e=0])}return t}function W(t){var e,r=t.e;return null===r?t.toString():(e=w(t.c),e=r<=P||r>=F?_(e,r):B(e,r,"0"),t.s<0?"-"+e:e)}return z.clone=t,z.ROUND_UP=0,z.ROUND_DOWN=1,z.ROUND_CEIL=2,z.ROUND_FLOOR=3,z.ROUND_HALF_UP=4,z.ROUND_HALF_DOWN=5,z.ROUND_HALF_EVEN=6,z.ROUND_HALF_CEIL=7,z.ROUND_HALF_FLOOR=8,z.EUCLID=9,z.config=z.set=function(t){var e,r;if(null!=t){if("object"!=typeof t)throw Error(u+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(v(r=t[e],0,g,e),U=r),t.hasOwnProperty(e="ROUNDING_MODE")&&(v(r=t[e],0,8,e),L=r),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((r=t[e])&&r.pop?(v(r[0],-g,0,e),v(r[1],0,g,e),P=r[0],F=r[1]):(v(r,-g,g,e),P=-(F=r<0?-r:r))),t.hasOwnProperty(e="RANGE"))if((r=t[e])&&r.pop)v(r[0],-g,-1,e),v(r[1],1,g,e),k=r[0],j=r[1];else{if(v(r,-g,g,e),!r)throw Error(u+e+" cannot be zero: "+r);k=-(j=r<0?-r:r)}if(t.hasOwnProperty(e="CRYPTO")){if((r=t[e])!==!!r)throw Error(u+e+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw $=!r,Error(u+"crypto unavailable");$=r}else $=r}if(t.hasOwnProperty(e="MODULO_MODE")&&(v(r=t[e],0,9,e),M=r),t.hasOwnProperty(e="POW_PRECISION")&&(v(r=t[e],0,g,e),C=r),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(r=t[e]))throw Error(u+e+" not an object: "+r);q=r}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(r=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(u+e+" invalid: "+r);V="0123456789"==r.slice(0,10),D=r}}return{DECIMAL_PLACES:U,ROUNDING_MODE:L,EXPONENTIAL_AT:[P,F],RANGE:[k,j],CRYPTO:$,MODULO_MODE:M,POW_PRECISION:C,FORMAT:q,ALPHABET:D}},z.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!z.DEBUG)return!0;var e,r,n=t.c,i=t.e,s=t.s;t:if("[object Array]"=={}.toString.call(n)){if((1===s||-1===s)&&i>=-g&&i<=g&&i===c(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break t}if((e=(i+1)%l)<1&&(e+=l),String(n[0]).length==e){for(e=0;e<n.length;e++)if((r=n[e])<0||r>=h||r!==c(r))break t;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===s||1===s||-1===s))return!0;throw Error(u+"Invalid BigNumber: "+t)},z.maximum=z.max=function(){return H(arguments,-1)},z.minimum=z.min=function(){return H(arguments,1)},z.random=(s=9007199254740992,I=Math.random()*s&2097151?function(){return c(Math.random()*s)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,r,n,i,s,o=0,f=[],h=new z(O);if(null==t?t=U:v(t,0,g),i=a(t/l),$)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(i*=2));o<i;)(s=131072*e[o]+(e[o+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),e[o]=r[0],e[o+1]=r[1]):(f.push(s%1e14),o+=2);o=i/2}else{if(!crypto.randomBytes)throw $=!1,Error(u+"crypto unavailable");for(e=crypto.randomBytes(i*=7);o<i;)(s=281474976710656*(31&e[o])+1099511627776*e[o+1]+4294967296*e[o+2]+16777216*e[o+3]+(e[o+4]<<16)+(e[o+5]<<8)+e[o+6])>=9e15?crypto.randomBytes(7).copy(e,o):(f.push(s%1e14),o+=7);o=i/7}if(!$)for(;o<i;)(s=I())<9e15&&(f[o++]=s%1e14);for(i=f[--o],t%=l,i&&t&&(s=p[l-t],f[o]=c(i/s)*s);0===f[o];f.pop(),o--);if(o<0)f=[n=0];else{for(n=-1;0===f[0];f.splice(0,1),n-=l);for(o=1,s=f[0];s>=10;s/=10,o++);o<l&&(n-=l-o)}return h.e=n,h.c=f,h}),z.sum=function(){for(var t=1,e=arguments,r=new z(e[0]);t<e.length;)r=r.plus(e[t++]);return r},n=function(){var t="0123456789";function e(t,e,r,n){for(var i,s,o=[0],a=0,c=t.length;a<c;){for(s=o.length;s--;o[s]*=e);for(o[0]+=n.indexOf(t.charAt(a++)),i=0;i<o.length;i++)o[i]>r-1&&(null==o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/r|0,o[i]%=r)}return o.reverse()}return function(n,i,s,o,a){var c,u,f,h,l,d,p,y,g=n.indexOf("."),b=U,m=L;for(g>=0&&(h=C,C=0,n=n.replace(".",""),d=(y=new z(i)).pow(n.length-g),C=h,y.c=e(B(w(d.c),d.e,"0"),10,s,t),y.e=y.c.length),f=h=(p=e(n,i,s,a?(c=D,t):(c=t,D))).length;0==p[--h];p.pop());if(!p[0])return c.charAt(0);if(g<0?--f:(d.c=p,d.e=f,d.s=o,p=(d=r(d,y,b,m,s)).c,l=d.r,f=d.e),g=p[u=f+b+1],h=s/2,l=l||u<0||null!=p[u+1],l=m<4?(null!=g||l)&&(0==m||m==(d.s<0?3:2)):g>h||g==h&&(4==m||l||6==m&&1&p[u-1]||m==(d.s<0?8:7)),u<1||!p[0])n=l?B(c.charAt(1),-b,c.charAt(0)):c.charAt(0);else{if(p.length=u,l)for(--s;++p[--u]>s;)p[u]=0,u||(++f,p=[1].concat(p));for(h=p.length;!p[--h];);for(g=0,n="";g<=h;n+=c.charAt(p[g++]));n=B(n,f,c.charAt(0))}return n}}(),r=function(){function t(t,e,r){var n,i,s,o,a=0,c=t.length,u=e%y,f=e/y|0;for(t=t.slice();c--;)a=((i=u*(s=t[c]%y)+(n=f*s+(o=t[c]/y|0)*u)%y*y+a)/r|0)+(n/y|0)+f*o,t[c]=i%r;return a&&(t=[a].concat(t)),t}function e(t,e,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(t[i]!=e[i]){s=t[i]>e[i]?1:-1;break}return s}function r(t,e,r,n){for(var i=0;r--;)t[r]-=i,i=t[r]<e[r]?1:0,t[r]=i*n+t[r]-e[r];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(n,i,s,o,a){var u,f,d,p,y,g,w,m,v,E,_,B,I,T,x,A,S,N=n.s==i.s?1:-1,R=n.c,O=i.c;if(!(R&&R[0]&&O&&O[0]))return new z(n.s&&i.s&&(R?!O||R[0]!=O[0]:O)?R&&0==R[0]||!O?0*N:N/0:NaN);for(v=(m=new z(N)).c=[],N=s+(f=n.e-i.e)+1,a||(a=h,f=b(n.e/l)-b(i.e/l),N=N/l|0),d=0;O[d]==(R[d]||0);d++);if(O[d]>(R[d]||0)&&f--,N<0)v.push(1),p=!0;else{for(T=R.length,A=O.length,d=0,N+=2,(y=c(a/(O[0]+1)))>1&&(O=t(O,y,a),R=t(R,y,a),A=O.length,T=R.length),I=A,_=(E=R.slice(0,A)).length;_<A;E[_++]=0);S=O.slice(),S=[0].concat(S),x=O[0],O[1]>=a/2&&x++;do{if(y=0,(u=e(O,E,A,_))<0){if(B=E[0],A!=_&&(B=B*a+(E[1]||0)),(y=c(B/x))>1)for(y>=a&&(y=a-1),w=(g=t(O,y,a)).length,_=E.length;1==e(g,E,w,_);)y--,r(g,A<w?S:O,w,a),w=g.length,u=1;else 0==y&&(u=y=1),w=(g=O.slice()).length;if(w<_&&(g=[0].concat(g)),r(E,g,_,a),_=E.length,-1==u)for(;e(O,E,A,_)<1;)y++,r(E,A<_?S:O,_,a),_=E.length}else 0===u&&(y++,E=[0]);v[d++]=y,E[0]?E[_++]=R[I]||0:(E=[R[I]],_=1)}while((I++<T||null!=E[0])&&N--);p=null!=E[0],v[0]||v.splice(0,1)}if(a==h){for(d=1,N=v[0];N>=10;N/=10,d++);K(m,s+(m.e=d+f*l-1)+1,o,p)}else m.e=f,m.r=+p;return m}}(),T=/^(-?)0([xbo])(?=\w[\w.]*$)/i,x=/^([^.]+)\.$/,A=/^\.([^.]+)$/,S=/^-?(Infinity|NaN)$/,N=/^\s*\+(?=[\w.])|^\s+|\s+$/g,i=function(t,e,r,n){var i,s=r?e:e.replace(N,"");if(S.test(s))t.s=isNaN(s)?null:s<0?-1:1;else{if(!r&&(s=s.replace(T,(function(t,e,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?t:e})),n&&(i=n,s=s.replace(x,"$1").replace(A,"0.$1")),e!=s))return new z(s,i);if(z.DEBUG)throw Error(u+"Not a"+(n?" base "+n:"")+" number: "+e);t.s=null}t.c=t.e=null},R.absoluteValue=R.abs=function(){var t=new z(this);return t.s<0&&(t.s=1),t},R.comparedTo=function(t,e){return m(this,new z(t,e))},R.decimalPlaces=R.dp=function(t,e){var r,n,i,s=this;if(null!=t)return v(t,0,g),null==e?e=L:v(e,0,8),K(new z(s),t+s.e+1,e);if(!(r=s.c))return null;if(n=((i=r.length-1)-b(this.e/l))*l,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},R.dividedBy=R.div=function(t,e){return r(this,new z(t,e),U,L)},R.dividedToIntegerBy=R.idiv=function(t,e){return r(this,new z(t,e),0,1)},R.exponentiatedBy=R.pow=function(t,e){var r,n,i,s,o,f,h,d,p=this;if((t=new z(t)).c&&!t.isInteger())throw Error(u+"Exponent not an integer: "+W(t));if(null!=e&&(e=new z(e)),o=t.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!t.c||!t.c[0])return d=new z(Math.pow(+W(p),o?t.s*(2-E(t)):+W(t))),e?d.mod(e):d;if(f=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new z(NaN);(n=!f&&p.isInteger()&&e.isInteger())&&(p=p.mod(e))}else{if(t.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||o&&p.c[1]>=24e7:p.c[0]<8e13||o&&p.c[0]<=9999975e7)))return s=p.s<0&&E(t)?-0:0,p.e>-1&&(s=1/s),new z(f?1/s:s);C&&(s=a(C/l+2))}for(o?(r=new z(.5),f&&(t.s=1),h=E(t)):h=(i=Math.abs(+W(t)))%2,d=new z(O);;){if(h){if(!(d=d.times(p)).c)break;s?d.c.length>s&&(d.c.length=s):n&&(d=d.mod(e))}if(i){if(0===(i=c(i/2)))break;h=i%2}else if(K(t=t.times(r),t.e+1,1),t.e>14)h=E(t);else{if(0===(i=+W(t)))break;h=i%2}p=p.times(p),s?p.c&&p.c.length>s&&(p.c.length=s):n&&(p=p.mod(e))}return n?d:(f&&(d=O.div(d)),e?d.mod(e):s?K(d,C,L,undefined):d)},R.integerValue=function(t){var e=new z(this);return null==t?t=L:v(t,0,8),K(e,e.e+1,t)},R.isEqualTo=R.eq=function(t,e){return 0===m(this,new z(t,e))},R.isFinite=function(){return!!this.c},R.isGreaterThan=R.gt=function(t,e){return m(this,new z(t,e))>0},R.isGreaterThanOrEqualTo=R.gte=function(t,e){return 1===(e=m(this,new z(t,e)))||0===e},R.isInteger=function(){return!!this.c&&b(this.e/l)>this.c.length-2},R.isLessThan=R.lt=function(t,e){return m(this,new z(t,e))<0},R.isLessThanOrEqualTo=R.lte=function(t,e){return-1===(e=m(this,new z(t,e)))||0===e},R.isNaN=function(){return!this.s},R.isNegative=function(){return this.s<0},R.isPositive=function(){return this.s>0},R.isZero=function(){return!!this.c&&0==this.c[0]},R.minus=function(t,e){var r,n,i,s,o=this,a=o.s;if(e=(t=new z(t,e)).s,!a||!e)return new z(NaN);if(a!=e)return t.s=-e,o.plus(t);var c=o.e/l,u=t.e/l,f=o.c,d=t.c;if(!c||!u){if(!f||!d)return f?(t.s=-e,t):new z(d?o:NaN);if(!f[0]||!d[0])return d[0]?(t.s=-e,t):new z(f[0]?o:3==L?-0:0)}if(c=b(c),u=b(u),f=f.slice(),a=c-u){for((s=a<0)?(a=-a,i=f):(u=c,i=d),i.reverse(),e=a;e--;i.push(0));i.reverse()}else for(n=(s=(a=f.length)<(e=d.length))?a:e,a=e=0;e<n;e++)if(f[e]!=d[e]){s=f[e]<d[e];break}if(s&&(i=f,f=d,d=i,t.s=-t.s),(e=(n=d.length)-(r=f.length))>0)for(;e--;f[r++]=0);for(e=h-1;n>a;){if(f[--n]<d[n]){for(r=n;r&&!f[--r];f[r]=e);--f[r],f[n]+=h}f[n]-=d[n]}for(;0==f[0];f.splice(0,1),--u);return f[0]?Z(t,f,u):(t.s=3==L?-1:1,t.c=[t.e=0],t)},R.modulo=R.mod=function(t,e){var n,i,s=this;return t=new z(t,e),!s.c||!t.s||t.c&&!t.c[0]?new z(NaN):!t.c||s.c&&!s.c[0]?new z(s):(9==M?(i=t.s,t.s=1,n=r(s,t,0,3),t.s=i,n.s*=i):n=r(s,t,0,M),(t=s.minus(n.times(t))).c[0]||1!=M||(t.s=s.s),t)},R.multipliedBy=R.times=function(t,e){var r,n,i,s,o,a,c,u,f,d,p,g,w,m,v,E=this,_=E.c,B=(t=new z(t,e)).c;if(!(_&&B&&_[0]&&B[0]))return!E.s||!t.s||_&&!_[0]&&!B||B&&!B[0]&&!_?t.c=t.e=t.s=null:(t.s*=E.s,_&&B?(t.c=[0],t.e=0):t.c=t.e=null),t;for(n=b(E.e/l)+b(t.e/l),t.s*=E.s,(c=_.length)<(d=B.length)&&(w=_,_=B,B=w,i=c,c=d,d=i),i=c+d,w=[];i--;w.push(0));for(m=h,v=y,i=d;--i>=0;){for(r=0,p=B[i]%v,g=B[i]/v|0,s=i+(o=c);s>i;)r=((u=p*(u=_[--o]%v)+(a=g*u+(f=_[o]/v|0)*p)%v*v+w[s]+r)/m|0)+(a/v|0)+g*f,w[s--]=u%m;w[s]=r}return r?++n:w.splice(0,1),Z(t,w,n)},R.negated=function(){var t=new z(this);return t.s=-t.s||null,t},R.plus=function(t,e){var r,n=this,i=n.s;if(e=(t=new z(t,e)).s,!i||!e)return new z(NaN);if(i!=e)return t.s=-e,n.minus(t);var s=n.e/l,o=t.e/l,a=n.c,c=t.c;if(!s||!o){if(!a||!c)return new z(i/0);if(!a[0]||!c[0])return c[0]?t:new z(a[0]?n:0*i)}if(s=b(s),o=b(o),a=a.slice(),i=s-o){for(i>0?(o=s,r=c):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(e=c.length)<0&&(r=c,c=a,a=r,e=i),i=0;e;)i=(a[--e]=a[e]+c[e]+i)/h|0,a[e]=h===a[e]?0:a[e]%h;return i&&(a=[i].concat(a),++o),Z(t,a,o)},R.precision=R.sd=function(t,e){var r,n,i,s=this;if(null!=t&&t!==!!t)return v(t,1,g),null==e?e=L:v(e,0,8),K(new z(s),t,e);if(!(r=s.c))return null;if(n=(i=r.length-1)*l+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return t&&s.e+1>n&&(n=s.e+1),n},R.shiftedBy=function(t){return v(t,-9007199254740991,d),this.times("1e"+t)},R.squareRoot=R.sqrt=function(){var t,e,n,i,s,o=this,a=o.c,c=o.s,u=o.e,f=U+4,h=new z("0.5");if(1!==c||!a||!a[0])return new z(!c||c<0&&(!a||a[0])?NaN:a?o:1/0);if(0==(c=Math.sqrt(+W(o)))||c==1/0?(((e=w(a)).length+u)%2==0&&(e+="0"),c=Math.sqrt(+e),u=b((u+1)/2)-(u<0||u%2),n=new z(e=c==1/0?"5e"+u:(e=c.toExponential()).slice(0,e.indexOf("e")+1)+u)):n=new z(c+""),n.c[0])for((c=(u=n.e)+f)<3&&(c=0);;)if(s=n,n=h.times(s.plus(r(o,s,f,1))),w(s.c).slice(0,c)===(e=w(n.c)).slice(0,c)){if(n.e<u&&--c,"9999"!=(e=e.slice(c-3,c+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(K(n,n.e+U+2,1),t=!n.times(n).eq(o));break}if(!i&&(K(s,s.e+U+2,0),s.times(s).eq(o))){n=s;break}f+=4,c+=4,i=1}return K(n,n.e+U+1,L,t)},R.toExponential=function(t,e){return null!=t&&(v(t,0,g),t++),G(this,t,e,1)},R.toFixed=function(t,e){return null!=t&&(v(t,0,g),t=t+this.e+1),G(this,t,e)},R.toFormat=function(t,e,r){var n,i=this;if(null==r)null!=t&&e&&"object"==typeof e?(r=e,e=null):t&&"object"==typeof t?(r=t,t=e=null):r=q;else if("object"!=typeof r)throw Error(u+"Argument not an object: "+r);if(n=i.toFixed(t,e),i.c){var s,o=n.split("."),a=+r.groupSize,c=+r.secondaryGroupSize,f=r.groupSeparator||"",h=o[0],l=o[1],d=i.s<0,p=d?h.slice(1):h,y=p.length;if(c&&(s=a,a=c,c=s,y-=s),a>0&&y>0){for(s=y%a||a,h=p.substr(0,s);s<y;s+=a)h+=f+p.substr(s,a);c>0&&(h+=f+p.slice(s)),d&&(h="-"+h)}n=l?h+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?l.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):l):h}return(r.prefix||"")+n+(r.suffix||"")},R.toFraction=function(t){var e,n,i,s,o,a,c,f,h,d,y,g,b=this,m=b.c;if(null!=t&&(!(c=new z(t)).isInteger()&&(c.c||1!==c.s)||c.lt(O)))throw Error(u+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+W(c));if(!m)return new z(b);for(e=new z(O),h=n=new z(O),i=f=new z(O),g=w(m),o=e.e=g.length-b.e-1,e.c[0]=p[(a=o%l)<0?l+a:a],t=!t||c.comparedTo(e)>0?o>0?e:h:c,a=j,j=1/0,c=new z(g),f.c[0]=0;d=r(c,e,0,1),1!=(s=n.plus(d.times(i))).comparedTo(t);)n=i,i=s,h=f.plus(d.times(s=h)),f=s,e=c.minus(d.times(s=e)),c=s;return s=r(t.minus(n),i,0,1),f=f.plus(s.times(h)),n=n.plus(s.times(i)),f.s=h.s=b.s,y=r(h,i,o*=2,L).minus(b).abs().comparedTo(r(f,n,o,L).minus(b).abs())<1?[h,i]:[f,n],j=a,y},R.toNumber=function(){return+W(this)},R.toPrecision=function(t,e){return null!=t&&v(t,1,g),G(this,t,e,2)},R.toString=function(t){var e,r=this,i=r.s,s=r.e;return null===s?i?(e="Infinity",i<0&&(e="-"+e)):e="NaN":(null==t?e=s<=P||s>=F?_(w(r.c),s):B(w(r.c),s,"0"):10===t&&V?e=B(w((r=K(new z(r),U+s+1,L)).c),r.e,"0"):(v(t,2,D.length,"Base"),e=n(B(w(r.c),s,"0"),10,t,i,!0)),i<0&&r.c[0]&&(e="-"+e)),e},R.valueOf=R.toJSON=function(){return W(this)},R._isBigNumber=!0,null!=e&&z.set(e),z}(),s.default=s.BigNumber=s,void 0===(n=function(){return s}.call(e,r,e,t))||(t.exports=n)}()},526:(t,e,r)=>{"use strict";var n=r(742),i=r(645),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=function(t){+t!=t&&(t=0);return c.alloc(+t)},e.INSPECT_MAX_BYTES=50;var o=2147483647;function a(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,c.prototype),e}function c(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return u(t,e,r)}function u(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|y(t,e),n=a(r),i=n.write(t,e);i!==r&&(n=n.slice(0,i));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(q(t,Uint8Array)){var e=new Uint8Array(t);return d(e.buffer,e.byteOffset,e.byteLength)}return l(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(q(t,ArrayBuffer)||t&&q(t.buffer,ArrayBuffer))return d(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(q(t,SharedArrayBuffer)||t&&q(t.buffer,SharedArrayBuffer)))return d(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return c.from(n,e,r);var i=function(t){if(c.isBuffer(t)){var e=0|p(t.length),r=a(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!=typeof t.length||D(t.length)?a(0):l(t);if("Buffer"===t.type&&Array.isArray(t.data))return l(t.data)}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function f(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return f(t),a(t<0?0:0|p(t))}function l(t){for(var e=t.length<0?0:0|p(t.length),r=a(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function d(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,c.prototype),n}function p(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function y(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||q(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return M(t).length;default:if(i)return n?-1:$(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,r);case"utf8":case"utf-8":return x(this,e,r);case"ascii":return S(this,e,r);case"latin1":case"binary":return N(this,e,r);case"base64":return T(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function w(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),D(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=c.from(e,n)),c.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,n,i){var s,o=1,a=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,a/=2,c/=2,r/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var f=-1;for(s=r;s<a;s++)if(u(t,s)===u(e,-1===f?0:s-f)){if(-1===f&&(f=s),s-f+1===c)return f*o}else-1!==f&&(s-=s-f),f=-1}else for(r+c>a&&(r=a-c),s=r;s>=0;s--){for(var h=!0,l=0;l<c;l++)if(u(t,s+l)!==u(e,l)){h=!1;break}if(h)return s}return-1}function v(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=e.length;n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(e.substr(2*o,2),16);if(D(a))return o;t[r+o]=a}return o}function E(t,e,r,n){return C($(e,t.length-r),t,r,n)}function _(t,e,r,n){return C(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function B(t,e,r,n){return C(M(e),t,r,n)}function I(t,e,r,n){return C(function(t,e){for(var r,n,i,s=[],o=0;o<t.length&&!((e-=2)<0);++o)n=(r=t.charCodeAt(o))>>8,i=r%256,s.push(i),s.push(n);return s}(e,t.length-r),t,r,n)}function T(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function x(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var s,o,a,c,u=t[i],f=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=r)switch(h){case 1:u<128&&(f=u);break;case 2:128==(192&(s=t[i+1]))&&(c=(31&u)<<6|63&s)>127&&(f=c);break;case 3:s=t[i+1],o=t[i+2],128==(192&s)&&128==(192&o)&&(c=(15&u)<<12|(63&s)<<6|63&o)>2047&&(c<55296||c>57343)&&(f=c);break;case 4:s=t[i+1],o=t[i+2],a=t[i+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(c=(15&u)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&c<1114112&&(f=c)}null===f?(f=65533,h=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),i+=h}return function(t){var e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=A));return r}(n)}e.kMaxLength=o,c.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(t,e,r){return u(t,e,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(t,e,r){return function(t,e,r){return f(t),t<=0?a(t):void 0!==e?"string"==typeof r?a(t).fill(e,r):a(t).fill(e):a(t)}(t,e,r)},c.allocUnsafe=function(t){return h(t)},c.allocUnsafeSlow=function(t){return h(t)},c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(q(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),q(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=c.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(q(s,Uint8Array))i+s.length>n.length?c.from(s).copy(n,i):Uint8Array.prototype.set.call(n,s,i);else{if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i)}i+=s.length}return n},c.byteLength=y,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)b(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)b(this,e,e+3),b(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)b(this,e,e+7),b(this,e+1,e+6),b(this,e+2,e+5),b(this,e+3,e+4);return this},c.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?x(this,0,t):g.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},s&&(c.prototype[s]=c.prototype.inspect),c.prototype.compare=function(t,e,r,n,i){if(q(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(e>>>=0),a=Math.min(s,o),u=this.slice(n,i),f=t.slice(e,r),h=0;h<a;++h)if(u[h]!==f[h]){s=u[h],o=f[h];break}return s<o?-1:o<s?1:0},c.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},c.prototype.indexOf=function(t,e,r){return w(this,t,e,r,!0)},c.prototype.lastIndexOf=function(t,e,r){return w(this,t,e,r,!1)},c.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return E(this,t,e,r);case"ascii":case"latin1":case"binary":return _(this,t,e,r);case"base64":return B(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function S(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function N(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function R(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=e;s<r;++s)i+=V[t[s]];return i}function O(t,e,r){for(var n=t.slice(e,r),i="",s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function U(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,r,n,i,s){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function P(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(t,e,r,n,s){return e=+e,r>>>=0,s||P(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function k(t,e,r,n,s){return e=+e,r>>>=0,s||P(t,0,r,8),i.write(t,e,r,n,52,8),r+8}c.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return Object.setPrototypeOf(n,c.prototype),n},c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||U(t,e,this.length);for(var n=this[t],i=1,s=0;++s<e&&(i*=256);)n+=this[t+s]*i;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||U(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t>>>=0,e||U(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||U(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||U(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||U(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||U(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||U(t,e,this.length);for(var n=this[t],i=1,s=0;++s<e&&(i*=256);)n+=this[t+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},c.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||U(t,e,this.length);for(var n=e,i=1,s=this[t+--n];n>0&&(i*=256);)s+=this[t+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*e)),s},c.prototype.readInt8=function(t,e){return t>>>=0,e||U(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||U(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(t,e){t>>>=0,e||U(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||U(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||U(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return t>>>=0,e||U(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||U(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||U(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||U(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||L(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[e]=255&t;++s<r&&(i*=256);)this[e+s]=t/i&255;return e+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||L(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);L(this,t,e,r,i-1,-i)}var s=0,o=1,a=0;for(this[e]=255&t;++s<r&&(o*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+r},c.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);L(this,t,e,r,i-1,-i)}var s=r-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+r},c.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeFloatLE=function(t,e,r){return F(this,t,e,!0,r)},c.prototype.writeFloatBE=function(t,e,r){return F(this,t,e,!1,r)},c.prototype.writeDoubleLE=function(t,e,r){return k(this,t,e,!0,r)},c.prototype.writeDoubleBE=function(t,e,r){return k(this,t,e,!1,r)},c.prototype.copy=function(t,e,r,n){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},c.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var s;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(s=e;s<r;++s)this[s]=t;else{var o=c.isBuffer(t)?t:c.from(t,n),a=o.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<r-e;++s)this[s+e]=o[s%a]}return this};var j=/[^+/0-9A-Za-z-_]/g;function $(t,e){var r;e=e||1/0;for(var n=t.length,i=null,s=[],o=0;o<n;++o){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function M(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function C(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function q(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function D(t){return t!=t}var V=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)e[n+i]=t[r]+t[i];return e}()},478:(t,e,r)=>{"use strict";const n=r(431).BigNumber;e.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},e.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36},e.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},e.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23},e.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")},e.SHIFT32=Math.pow(2,32),e.SHIFT16=Math.pow(2,16),e.MAX_SAFE_HIGH=2097151,e.NEG_ONE=new n(-1),e.TEN=new n(10),e.TWO=new n(2),e.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5}},520:t=>{t.exports=function(t,e,r){"use asm";var n=new t.Uint8Array(r);var i=e.pushInt;var s=e.pushInt32;var o=e.pushInt32Neg;var a=e.pushInt64;var c=e.pushInt64Neg;var u=e.pushFloat;var f=e.pushFloatSingle;var h=e.pushFloatDouble;var l=e.pushTrue;var d=e.pushFalse;var p=e.pushUndefined;var y=e.pushNull;var g=e.pushInfinity;var b=e.pushInfinityNeg;var w=e.pushNaN;var m=e.pushNaNNeg;var v=e.pushArrayStart;var E=e.pushArrayStartFixed;var _=e.pushArrayStartFixed32;var B=e.pushArrayStartFixed64;var I=e.pushObjectStart;var T=e.pushObjectStartFixed;var x=e.pushObjectStartFixed32;var A=e.pushObjectStartFixed64;var S=e.pushByteString;var N=e.pushByteStringStart;var R=e.pushUtf8String;var O=e.pushUtf8StringStart;var U=e.pushSimpleUnassigned;var L=e.pushTagStart;var P=e.pushTagStart4;var F=e.pushTagStart8;var k=e.pushTagUnassigned;var j=e.pushBreak;var $=t.Math.pow;var M=0;var C=0;var q=0;function D(t){t=t|0;M=0;C=t;while((M|0)<(C|0)){q=Yt[n[M]&255](n[M]|0)|0;if((q|0)>0){break}}return q|0}function V(t){t=t|0;if(((M|0)+(t|0)|0)<(C|0)){return 0}return 1}function z(t){t=t|0;return n[t|0]<<8|n[t+1|0]|0}function G(t){t=t|0;return n[t|0]<<24|n[t+1|0]<<16|n[t+2|0]<<8|n[t+3|0]|0}function H(t){t=t|0;i(t|0);M=M+1|0;return 0}function Z(t){t=t|0;if(V(1)|0){return 1}i(n[M+1|0]|0);M=M+2|0;return 0}function K(t){t=t|0;if(V(2)|0){return 1}i(z(M+1|0)|0);M=M+3|0;return 0}function W(t){t=t|0;if(V(4)|0){return 1}s(z(M+1|0)|0,z(M+3|0)|0);M=M+5|0;return 0}function Y(t){t=t|0;if(V(8)|0){return 1}a(z(M+1|0)|0,z(M+3|0)|0,z(M+5|0)|0,z(M+7|0)|0);M=M+9|0;return 0}function J(t){t=t|0;i(-1-(t-32|0)|0);M=M+1|0;return 0}function Q(t){t=t|0;if(V(1)|0){return 1}i(-1-(n[M+1|0]|0)|0);M=M+2|0;return 0}function X(t){t=t|0;var e=0;if(V(2)|0){return 1}e=z(M+1|0)|0;i(-1-(e|0)|0);M=M+3|0;return 0}function tt(t){t=t|0;if(V(4)|0){return 1}o(z(M+1|0)|0,z(M+3|0)|0);M=M+5|0;return 0}function et(t){t=t|0;if(V(8)|0){return 1}c(z(M+1|0)|0,z(M+3|0)|0,z(M+5|0)|0,z(M+7|0)|0);M=M+9|0;return 0}function rt(t){t=t|0;var e=0;var r=0;var n=0;n=t-64|0;if(V(n|0)|0){return 1}e=M+1|0;r=(M+1|0)+(n|0)|0;S(e|0,r|0);M=r|0;return 0}function nt(t){t=t|0;var e=0;var r=0;var i=0;if(V(1)|0){return 1}i=n[M+1|0]|0;e=M+2|0;r=(M+2|0)+(i|0)|0;if(V(i+1|0)|0){return 1}S(e|0,r|0);M=r|0;return 0}function it(t){t=t|0;var e=0;var r=0;var n=0;if(V(2)|0){return 1}n=z(M+1|0)|0;e=M+3|0;r=(M+3|0)+(n|0)|0;if(V(n+2|0)|0){return 1}S(e|0,r|0);M=r|0;return 0}function st(t){t=t|0;var e=0;var r=0;var n=0;if(V(4)|0){return 1}n=G(M+1|0)|0;e=M+5|0;r=(M+5|0)+(n|0)|0;if(V(n+4|0)|0){return 1}S(e|0,r|0);M=r|0;return 0}function ot(t){t=t|0;return 1}function at(t){t=t|0;N();M=M+1|0;return 0}function ct(t){t=t|0;var e=0;var r=0;var n=0;n=t-96|0;if(V(n|0)|0){return 1}e=M+1|0;r=(M+1|0)+(n|0)|0;R(e|0,r|0);M=r|0;return 0}function ut(t){t=t|0;var e=0;var r=0;var i=0;if(V(1)|0){return 1}i=n[M+1|0]|0;e=M+2|0;r=(M+2|0)+(i|0)|0;if(V(i+1|0)|0){return 1}R(e|0,r|0);M=r|0;return 0}function ft(t){t=t|0;var e=0;var r=0;var n=0;if(V(2)|0){return 1}n=z(M+1|0)|0;e=M+3|0;r=(M+3|0)+(n|0)|0;if(V(n+2|0)|0){return 1}R(e|0,r|0);M=r|0;return 0}function ht(t){t=t|0;var e=0;var r=0;var n=0;if(V(4)|0){return 1}n=G(M+1|0)|0;e=M+5|0;r=(M+5|0)+(n|0)|0;if(V(n+4|0)|0){return 1}R(e|0,r|0);M=r|0;return 0}function lt(t){t=t|0;return 1}function dt(t){t=t|0;O();M=M+1|0;return 0}function pt(t){t=t|0;E(t-128|0);M=M+1|0;return 0}function yt(t){t=t|0;if(V(1)|0){return 1}E(n[M+1|0]|0);M=M+2|0;return 0}function gt(t){t=t|0;if(V(2)|0){return 1}E(z(M+1|0)|0);M=M+3|0;return 0}function bt(t){t=t|0;if(V(4)|0){return 1}_(z(M+1|0)|0,z(M+3|0)|0);M=M+5|0;return 0}function wt(t){t=t|0;if(V(8)|0){return 1}B(z(M+1|0)|0,z(M+3|0)|0,z(M+5|0)|0,z(M+7|0)|0);M=M+9|0;return 0}function mt(t){t=t|0;v();M=M+1|0;return 0}function vt(t){t=t|0;var e=0;e=t-160|0;if(V(e|0)|0){return 1}T(e|0);M=M+1|0;return 0}function Et(t){t=t|0;if(V(1)|0){return 1}T(n[M+1|0]|0);M=M+2|0;return 0}function _t(t){t=t|0;if(V(2)|0){return 1}T(z(M+1|0)|0);M=M+3|0;return 0}function Bt(t){t=t|0;if(V(4)|0){return 1}x(z(M+1|0)|0,z(M+3|0)|0);M=M+5|0;return 0}function It(t){t=t|0;if(V(8)|0){return 1}A(z(M+1|0)|0,z(M+3|0)|0,z(M+5|0)|0,z(M+7|0)|0);M=M+9|0;return 0}function Tt(t){t=t|0;I();M=M+1|0;return 0}function xt(t){t=t|0;L(t-192|0|0);M=M+1|0;return 0}function At(t){t|0;L(t|0);M=M+1|0;return 0}function St(t){t|0;L(t|0);M=M+1|0;return 0}function Nt(t){t|0;L(t|0);M=M+1|0;return 0}function Rt(t){t|0;L(t|0);M=M+1|0;return 0}function Ot(t){t=t|0;L(t-192|0|0);M=M+1|0;return 0}function Ut(t){t|0;L(t|0);M=M+1|0;return 0}function Lt(t){t|0;L(t|0);M=M+1|0;return 0}function Pt(t){t|0;L(t|0);M=M+1|0;return 0}function Ft(t){t=t|0;if(V(1)|0){return 1}L(n[M+1|0]|0);M=M+2|0;return 0}function kt(t){t=t|0;if(V(2)|0){return 1}L(z(M+1|0)|0);M=M+3|0;return 0}function jt(t){t=t|0;if(V(4)|0){return 1}P(z(M+1|0)|0,z(M+3|0)|0);M=M+5|0;return 0}function $t(t){t=t|0;if(V(8)|0){return 1}F(z(M+1|0)|0,z(M+3|0)|0,z(M+5|0)|0,z(M+7|0)|0);M=M+9|0;return 0}function Mt(t){t=t|0;U((t|0)-224|0);M=M+1|0;return 0}function Ct(t){t=t|0;d();M=M+1|0;return 0}function qt(t){t=t|0;l();M=M+1|0;return 0}function Dt(t){t=t|0;y();M=M+1|0;return 0}function Vt(t){t=t|0;p();M=M+1|0;return 0}function zt(t){t=t|0;if(V(1)|0){return 1}U(n[M+1|0]|0);M=M+2|0;return 0}function Gt(t){t=t|0;var e=0;var r=0;var i=1.0;var s=0.0;var o=0.0;var a=0.0;if(V(2)|0){return 1}e=n[M+1|0]|0;r=n[M+2|0]|0;if((e|0)&0x80){i=-1.0}s=+(((e|0)&0x7C)>>2);o=+(((e|0)&0x03)<<8|r);if(+s==0.0){u(+(+i*+5.9604644775390625e-8*+o))}else if(+s==31.0){if(+i==1.0){if(+o>0.0){w()}else{g()}}else{if(+o>0.0){m()}else{b()}}}else{u(+(+i*$(+2,+(+s-25.0))*+(1024.0+o)))}M=M+3|0;return 0}function Ht(t){t=t|0;if(V(4)|0){return 1}f(n[M+1|0]|0,n[M+2|0]|0,n[M+3|0]|0,n[M+4|0]|0);M=M+5|0;return 0}function Zt(t){t=t|0;if(V(8)|0){return 1}h(n[M+1|0]|0,n[M+2|0]|0,n[M+3|0]|0,n[M+4|0]|0,n[M+5|0]|0,n[M+6|0]|0,n[M+7|0]|0,n[M+8|0]|0);M=M+9|0;return 0}function Kt(t){t=t|0;return 1}function Wt(t){t=t|0;j();M=M+1|0;return 0}var Yt=[H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,Z,K,W,Y,Kt,Kt,Kt,Kt,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,Q,X,tt,et,Kt,Kt,Kt,Kt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,rt,nt,it,st,ot,Kt,Kt,Kt,at,ct,ct,ct,ct,ct,ct,ct,ct,ct,ct,ct,ct,ct,ct,ct,ct,ct,ct,ct,ct,ct,ct,ct,ct,ut,ft,ht,lt,Kt,Kt,Kt,dt,pt,pt,pt,pt,pt,pt,pt,pt,pt,pt,pt,pt,pt,pt,pt,pt,pt,pt,pt,pt,pt,pt,pt,pt,yt,gt,bt,wt,Kt,Kt,Kt,mt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,Et,_t,Bt,It,Kt,Kt,Kt,Tt,xt,xt,xt,xt,xt,xt,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ft,kt,jt,$t,Kt,Kt,Kt,Kt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Mt,Ct,qt,Dt,Vt,zt,Gt,Ht,Zt,Kt,Kt,Kt,Wt];return{parse:D}}},988:(t,e,r)=>{"use strict";const{Buffer:n}=r(526),i=r(645),s=r(431).BigNumber,o=r(520),a=r(516),c=r(478),u=r(649),f=r(794),{URL:h}=r(745);class l{constructor(t){!(t=t||{}).size||t.size<65536?t.size=65536:t.size=a.nextPowerOf2(t.size),this._heap=new ArrayBuffer(t.size),this._heap8=new Uint8Array(this._heap),this._buffer=n.from(this._heap),this._reset(),this._knownTags=Object.assign({0:t=>new Date(t),1:t=>new Date(1e3*t),2:t=>a.arrayBufferToBignumber(t),3:t=>c.NEG_ONE.minus(a.arrayBufferToBignumber(t)),4:t=>c.TEN.pow(t[0]).times(t[1]),5:t=>c.TWO.pow(t[0]).times(t[1]),32:t=>new h(t),35:t=>new RegExp(t)},t.tags),this.parser=o(r.g,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var t=this._parents.pop();if(t.length>0)throw new Error(`Missing ${t.length} elements`);switch(t.type){case c.PARENT.TAG:this._push(this.createTag(t.ref[0],t.ref[1]));break;case c.PARENT.BYTE_STRING:this._push(this.createByteString(t.ref,t.length));break;case c.PARENT.UTF8_STRING:this._push(this.createUtf8String(t.ref,t.length));break;case c.PARENT.MAP:if(t.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(t.ref,t.length));break;case c.PARENT.OBJECT:if(t.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(t.ref,t.length));break;case c.PARENT.ARRAY:this._push(this.createArray(t.ref,t.length))}this._currentParent&&this._currentParent.type===c.PARENT.TAG&&this._dec()}_dec(){const t=this._currentParent;t.length<0||(t.length--,0===t.length&&this._closeParent())}_push(t,e){const r=this._currentParent;switch(r.values++,r.type){case c.PARENT.ARRAY:case c.PARENT.BYTE_STRING:case c.PARENT.UTF8_STRING:r.length>-1?this._ref[this._ref.length-r.length]=t:this._ref.push(t),this._dec();break;case c.PARENT.OBJECT:null!=r.tmpKey?(this._ref[r.tmpKey]=t,r.tmpKey=null,this._dec()):(r.tmpKey=t,"string"!=typeof r.tmpKey&&(r.type=c.PARENT.MAP,r.ref=a.buildMap(r.ref)));break;case c.PARENT.MAP:null!=r.tmpKey?(this._ref.set(r.tmpKey,t),r.tmpKey=null,this._dec()):r.tmpKey=t;break;case c.PARENT.TAG:this._ref.push(t),e||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(t,e,r){this._parents[this._depth]={type:e,length:r,ref:t,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:c.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(t,e){const r=this._knownTags[t];return r?r(e):new f(t,e)}createMap(t,e){return t}createObject(t,e){return t}createArray(t,e){return t}createByteString(t,e){return n.concat(t)}createByteStringFromHeap(t,e){return t===e?n.alloc(0):n.from(this._heap.slice(t,e))}createInt(t){return t}createInt32(t,e){return a.buildInt32(t,e)}createInt64(t,e,r,n){return a.buildInt64(t,e,r,n)}createFloat(t){return t}createFloatSingle(t,e,r,n){return i.read([t,e,r,n],0,!1,23,4)}createFloatDouble(t,e,r,n,s,o,a,c){return i.read([t,e,r,n,s,o,a,c],0,!1,52,8)}createInt32Neg(t,e){return-1-a.buildInt32(t,e)}createInt64Neg(t,e,r,n){const i=a.buildInt32(t,e),o=a.buildInt32(r,n);return i>c.MAX_SAFE_HIGH?c.NEG_ONE.minus(new s(i).times(c.SHIFT32).plus(o)):-1-(i*c.SHIFT32+o)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(t,e){return t.join("")}createUtf8StringFromHeap(t,e){return t===e?"":this._buffer.toString("utf8",t,e)}createSimpleUnassigned(t){return new u(t)}pushInt(t){this._push(this.createInt(t))}pushInt32(t,e){this._push(this.createInt32(t,e))}pushInt64(t,e,r,n){this._push(this.createInt64(t,e,r,n))}pushFloat(t){this._push(this.createFloat(t))}pushFloatSingle(t,e,r,n){this._push(this.createFloatSingle(t,e,r,n))}pushFloatDouble(t,e,r,n,i,s,o,a){this._push(this.createFloatDouble(t,e,r,n,i,s,o,a))}pushInt32Neg(t,e){this._push(this.createInt32Neg(t,e))}pushInt64Neg(t,e,r,n){this._push(this.createInt64Neg(t,e,r,n))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],c.PARENT.ARRAY,-1)}pushArrayStartFixed(t){this._createArrayStartFixed(t)}pushArrayStartFixed32(t,e){const r=a.buildInt32(t,e);this._createArrayStartFixed(r)}pushArrayStartFixed64(t,e,r,n){const i=a.buildInt64(t,e,r,n);this._createArrayStartFixed(i)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(t){this._createObjectStartFixed(t)}pushObjectStartFixed32(t,e){const r=a.buildInt32(t,e);this._createObjectStartFixed(r)}pushObjectStartFixed64(t,e,r,n){const i=a.buildInt64(t,e,r,n);this._createObjectStartFixed(i)}pushByteStringStart(){this._parents[this._depth]={type:c.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(t,e){this._push(this.createByteStringFromHeap(t,e))}pushUtf8StringStart(){this._parents[this._depth]={type:c.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(t,e){this._push(this.createUtf8StringFromHeap(t,e))}pushSimpleUnassigned(t){this._push(this.createSimpleUnassigned(t))}pushTagStart(t){this._parents[this._depth]={type:c.PARENT.TAG,length:1,ref:[t]}}pushTagStart4(t,e){this.pushTagStart(a.buildInt32(t,e))}pushTagStart8(t,e,r,n){this.pushTagStart(a.buildInt64(t,e,r,n))}pushTagUnassigned(t){this._push(this.createTag(t))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(t){0!==t?this._createParent({},c.PARENT.OBJECT,t):this._push(this.createObject({}))}_createArrayStartFixed(t){0!==t?this._createParent(new Array(t),c.PARENT.ARRAY,t):this._push(this.createArray([]))}_decode(t){if(0===t.byteLength)throw new Error("Input too short");this._reset(),this._heap8.set(t);const e=this.parser.parse(t.byteLength);if(this._depth>1){for(;0===this._currentParent.length;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(e>0)throw new Error("Failed to parse");if(0===this._res.length)throw new Error("No valid result")}decodeFirst(t){return this._decode(t),this._res[0]}decodeAll(t){return this._decode(t),this._res}static decode(t,e){"string"==typeof t&&(t=n.from(t,e||"hex"));return new l({size:t.length}).decodeFirst(t)}static decodeAll(t,e){"string"==typeof t&&(t=n.from(t,e||"hex"));return new l({size:t.length}).decodeAll(t)}}l.decodeFirst=l.decode,t.exports=l},817:(t,e,r)=>{"use strict";const{Buffer:n}=r(526),i=r(988),s=r(516);class o extends i{createTag(t,e){return`${t}(${e})`}createInt(t){return super.createInt(t).toString()}createInt32(t,e){return super.createInt32(t,e).toString()}createInt64(t,e,r,n){return super.createInt64(t,e,r,n).toString()}createInt32Neg(t,e){return super.createInt32Neg(t,e).toString()}createInt64Neg(t,e,r,n){return super.createInt64Neg(t,e,r,n).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(t){const e=super.createFloat(t);return s.isNegativeZero(t)?"-0_1":`${e}_1`}createFloatSingle(t,e,r,n){return`${super.createFloatSingle(t,e,r,n)}_2`}createFloatDouble(t,e,r,n,i,s,o,a){return`${super.createFloatDouble(t,e,r,n,i,s,o,a)}_3`}createByteString(t,e){const r=t.join(", ");return-1===e?`(_ ${r})`:`h'${r}`}createByteStringFromHeap(t,e){return`h'${n.from(super.createByteStringFromHeap(t,e)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(t){return`simple(${t})`}createArray(t,e){const r=super.createArray(t,e);return-1===e?`[_ ${r.join(", ")}]`:`[${r.join(", ")}]`}createMap(t,e){const r=super.createMap(t),n=Array.from(r.keys()).reduce(a(r),"");return-1===e?`{_ ${n}}`:`{${n}}`}createObject(t,e){const r=super.createObject(t),n=Object.keys(r).reduce(a(r),"");return-1===e?`{_ ${n}}`:`{${n}}`}createUtf8String(t,e){const r=t.join(", ");return-1===e?`(_ ${r})`:`"${r}"`}createUtf8StringFromHeap(t,e){return`"${n.from(super.createUtf8StringFromHeap(t,e)).toString("utf8")}"`}static diagnose(t,e){"string"==typeof t&&(t=n.from(t,e||"hex"));return(new o).decodeFirst(t)}}function a(t){return(e,r)=>e?`${e}, ${r}: ${t[r]}`:`${r}: ${t[r]}`}t.exports=o},199:(t,e,r)=>{"use strict";const{Buffer:n}=r(526),{URL:i}=r(745),s=r(431).BigNumber,o=r(516),a=r(478),c=a.MT,u=a.NUMBYTES,f=a.SHIFT32,h=a.SYMS,l=a.TAG,d=a.MT.SIMPLE_FLOAT<<5|a.NUMBYTES.TWO,p=a.MT.SIMPLE_FLOAT<<5|a.NUMBYTES.FOUR,y=a.MT.SIMPLE_FLOAT<<5|a.NUMBYTES.EIGHT,g=a.MT.SIMPLE_FLOAT<<5|a.SIMPLE.TRUE,b=a.MT.SIMPLE_FLOAT<<5|a.SIMPLE.FALSE,w=a.MT.SIMPLE_FLOAT<<5|a.SIMPLE.UNDEFINED,m=a.MT.SIMPLE_FLOAT<<5|a.SIMPLE.NULL,v=new s("0x20000000000000"),E=n.from("f97e00","hex"),_=n.from("f9fc00","hex"),B=n.from("f97c00","hex");class I{constructor(t){t=t||{},this.streaming="function"==typeof t.stream,this.onData=t.stream,this.semanticTypes=[[i,this._pushUrl],[s,this._pushBigNumber]];const e=t.genTypes||[],r=e.length;for(let t=0;t<r;t++)this.addSemanticType(e[t][0],e[t][1]);this._reset()}addSemanticType(t,e){const r=this.semanticTypes.length;for(let n=0;n<r;n++){if(this.semanticTypes[n][0]===t){const t=this.semanticTypes[n][1];return this.semanticTypes[n][1]=e,t}}return this.semanticTypes.push([t,e]),null}push(t){return!t||(this.result[this.offset]=t,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=t.length,this.offset++,this.streaming&&this.onData(this.finalize()),!0)}pushWrite(t,e,r){return this.result[this.offset]=t,this.resultMethod[this.offset]=e,this.resultLength[this.offset]=r,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(t){return this.pushWrite(t,1,1)}_pushUInt16BE(t){return this.pushWrite(t,2,2)}_pushUInt32BE(t){return this.pushWrite(t,3,4)}_pushDoubleBE(t){return this.pushWrite(t,4,8)}_pushNaN(){return this.push(E)}_pushInfinity(t){const e=t<0?_:B;return this.push(e)}_pushFloat(t){const e=n.allocUnsafe(2);if(o.writeHalf(e,t)&&o.parseHalf(e)===t)return this._pushUInt8(d)&&this.push(e);const r=n.allocUnsafe(4);return r.writeFloatBE(t,0),r.readFloatBE(0)===t?this._pushUInt8(p)&&this.push(r):this._pushUInt8(y)&&this._pushDoubleBE(t)}_pushInt(t,e,r){const n=e<<5;return t<24?this._pushUInt8(n|t):t<=255?this._pushUInt8(n|u.ONE)&&this._pushUInt8(t):t<=65535?this._pushUInt8(n|u.TWO)&&this._pushUInt16BE(t):t<=4294967295?this._pushUInt8(n|u.FOUR)&&this._pushUInt32BE(t):t<=Number.MAX_SAFE_INTEGER?this._pushUInt8(n|u.EIGHT)&&this._pushUInt32BE(Math.floor(t/f))&&this._pushUInt32BE(t%f):e===c.NEG_INT?this._pushFloat(r):this._pushFloat(t)}_pushIntNum(t){return t<0?this._pushInt(-t-1,c.NEG_INT,t):this._pushInt(t,c.POS_INT)}_pushNumber(t){switch(!1){case t==t:return this._pushNaN(t);case isFinite(t):return this._pushInfinity(t);case t%1!=0:return this._pushIntNum(t);default:return this._pushFloat(t)}}_pushString(t){const e=n.byteLength(t,"utf8");return this._pushInt(e,c.UTF8_STRING)&&this.pushWrite(t,5,e)}_pushBoolean(t){return this._pushUInt8(t?g:b)}_pushUndefined(t){return this._pushUInt8(w)}_pushArray(t,e){const r=e.length;if(!t._pushInt(r,c.ARRAY))return!1;for(let n=0;n<r;n++)if(!t.pushAny(e[n]))return!1;return!0}_pushTag(t){return this._pushInt(t,c.TAG)}_pushDate(t,e){return t._pushTag(l.DATE_EPOCH)&&t.pushAny(Math.round(e/1e3))}_pushBuffer(t,e){return t._pushInt(e.length,c.BYTE_STRING)&&t.push(e)}_pushNoFilter(t,e){return t._pushBuffer(t,e.slice())}_pushRegexp(t,e){return t._pushTag(l.REGEXP)&&t.pushAny(e.source)}_pushSet(t,e){if(!t._pushInt(e.size,c.ARRAY))return!1;for(const r of e)if(!t.pushAny(r))return!1;return!0}_pushUrl(t,e){return t._pushTag(l.URI)&&t.pushAny(e.format())}_pushBigint(t){let e=l.POS_BIGINT;t.isNegative()&&(t=t.negated().minus(1),e=l.NEG_BIGINT);let r=t.toString(16);r.length%2&&(r="0"+r);const i=n.from(r,"hex");return this._pushTag(e)&&this._pushBuffer(this,i)}_pushBigNumber(t,e){if(e.isNaN())return t._pushNaN();if(!e.isFinite())return t._pushInfinity(e.isNegative()?-1/0:1/0);if(e.isInteger())return t._pushBigint(e);if(!t._pushTag(l.DECIMAL_FRAC)||!t._pushInt(2,c.ARRAY))return!1;const r=e.decimalPlaces(),n=e.multipliedBy(new s(10).pow(r));return!!t._pushIntNum(-r)&&(n.abs().isLessThan(v)?t._pushIntNum(n.toNumber()):t._pushBigint(n))}_pushMap(t,e){return!!t._pushInt(e.size,c.MAP)&&this._pushRawMap(e.size,Array.from(e))}_pushObject(t){if(!t)return this._pushUInt8(m);for(var e=this.semanticTypes.length,r=0;r<e;r++)if(t instanceof this.semanticTypes[r][0])return this.semanticTypes[r][1].call(t,this,t);var n=t.encodeCBOR;if("function"==typeof n)return n.call(t,this);var i=Object.keys(t),s=i.length;return!!this._pushInt(s,c.MAP)&&this._pushRawMap(s,i.map((e=>[e,t[e]])))}_pushRawMap(t,e){e=e.map((function(t){return t[0]=I.encode(t[0]),t})).sort(o.keySorter);for(var r=0;r<t;r++){if(!this.push(e[r][0]))return!1;if(!this.pushAny(e[r][1]))return!1}return!0}write(t){return this.pushAny(t)}pushAny(t){var e=function(t){return{}.toString.call(t).slice(8,-1)}(t);switch(e){case"Number":return this._pushNumber(t);case"String":return this._pushString(t);case"Boolean":return this._pushBoolean(t);case"Object":return this._pushObject(t);case"Array":return this._pushArray(this,t);case"Uint8Array":return this._pushBuffer(this,n.isBuffer(t)?t:n.from(t));case"Null":return this._pushUInt8(m);case"Undefined":return this._pushUndefined(t);case"Map":return this._pushMap(this,t);case"Set":return this._pushSet(this,t);case"URL":return this._pushUrl(this,t);case"BigNumber":return this._pushBigNumber(this,t);case"Date":return this._pushDate(this,t);case"RegExp":return this._pushRegexp(this,t);case"Symbol":switch(t){case h.NULL:return this._pushObject(null);case h.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+t.toString())}default:throw new Error("Unknown type: "+typeof t+", "+(t?t.toString():""))}}finalize(){if(0===this.offset)return null;for(var t=this.result,e=this.resultLength,r=this.resultMethod,i=this.offset,s=0,o=0;o<i;o++)s+=e[o];var a=n.allocUnsafe(s),c=0,u=0;for(o=0;o<i;o++){switch(u=e[o],r[o]){case 0:t[o].copy(a,c);break;case 1:a.writeUInt8(t[o],c,!0);break;case 2:a.writeUInt16BE(t[o],c,!0);break;case 3:a.writeUInt32BE(t[o],c,!0);break;case 4:a.writeDoubleBE(t[o],c,!0);break;case 5:a.write(t[o],c,u,"utf8");break;default:throw new Error("unkown method")}c+=u}var f=a;return this._reset(),f}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(t){const e=new I;if(!e.pushAny(t))throw new Error("Failed to encode input");return e.finalize()}}t.exports=I},756:(t,e,r)=>{"use strict";e.Diagnose=r(817),e.Decoder=r(988),e.Encoder=r(199),r(649),e.Tagged=r(794),e.Decoder.decodeAll,e.Decoder.decodeFirst,e.Diagnose.diagnose,e.Encoder.encode,e.Decoder.decode,e.Decoder.decodeAll,e.Encoder.encode},649:(t,e,r)=>{"use strict";const n=r(478),i=n.MT,s=n.SIMPLE,o=n.SYMS;class a{constructor(t){if("number"!=typeof t)throw new Error("Invalid Simple type: "+typeof t);if(t<0||t>255||(0|t)!==t)throw new Error("value must be a small positive integer: "+t);this.value=t}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(t){return t._pushInt(this.value,i.SIMPLE_FLOAT)}static isSimple(t){return t instanceof a}static decode(t,e){switch(null==e&&(e=!0),t){case s.FALSE:return!1;case s.TRUE:return!0;case s.NULL:return e?null:o.NULL;case s.UNDEFINED:return e?void 0:o.UNDEFINED;case-1:if(!e)throw new Error("Invalid BREAK");return o.BREAK;default:return new a(t)}}}t.exports=a},794:t=>{"use strict";class e{constructor(t,e,r){if(this.tag=t,this.value=e,this.err=r,"number"!=typeof this.tag)throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(0|this.tag)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(t){return t._pushTag(this.tag),t.pushAny(this.value)}convert(t){var r,n;if("function"!=typeof(n=null!=t?t[this.tag]:void 0)&&"function"!=typeof(n=e["_tag"+this.tag]))return this;try{return n.call(e,this.value)}catch(t){return r=t,this.err=r,this}}}t.exports=e},516:(t,e,r)=>{"use strict";const{Buffer:n}=r(526),i=r(431).BigNumber,s=r(478),o=s.SHIFT32,a=s.SHIFT16;e.parseHalf=function(t){var e,r,n;return n=128&t[0]?-1:1,e=(124&t[0])>>2,r=(3&t[0])<<8|t[1],e?31===e?n*(r?NaN:Infinity):n*Math.pow(2,e-25)*(1024+r):5.960464477539063e-8*n*r},e.arrayBufferToBignumber=function(t){const e=t.byteLength;let r="";for(let i=0;i<e;i++)r+=(n=t[i])<16?"0"+n.toString(16):n.toString(16);var n;return new i(r,16)},e.buildMap=t=>{const e=new Map,r=Object.keys(t),n=r.length;for(let i=0;i<n;i++)e.set(r[i],t[r[i]]);return e},e.buildInt32=(t,e)=>t*a+e,e.buildInt64=(t,r,n,s)=>{const a=e.buildInt32(t,r),c=e.buildInt32(n,s);return a>2097151?new i(a).times(o).plus(c):a*o+c},e.writeHalf=function(t,e){const r=n.allocUnsafe(4);r.writeFloatBE(e,0);const i=r.readUInt32BE(0);if(0!=(8191&i))return!1;var s=i>>16&32768;const o=i>>23&255,a=8388607&i;if(o>=113&&o<=142)s+=(o-112<<10)+(a>>13);else{if(!(o>=103&&o<113))return!1;if(a&(1<<126-o)-1)return!1;s+=a+8388608>>126-o}return t.writeUInt16BE(s,0),!0},e.keySorter=function(t,e){var r=t[0].byteLength,n=e[0].byteLength;return r>n?1:n>r?-1:t[0].compare(e[0])},e.isNegativeZero=t=>0===t&&1/t<0,e.nextPowerOf2=t=>{let e=0;if(t&&!(t&t-1))return t;for(;0!==t;)t>>=1,e+=1;return 1<<e}},764:(t,e,r)=>{"use strict";const n=r(742),i=r(645),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.lW=c,e.h2=50;const o=2147483647;function a(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,c.prototype),e}function c(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return u(t,e,r)}function u(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|y(t,e);let n=a(r);const i=n.write(t,e);i!==r&&(n=n.slice(0,i));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(W(t,Uint8Array)){const e=new Uint8Array(t);return d(e.buffer,e.byteOffset,e.byteLength)}return l(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(W(t,ArrayBuffer)||t&&W(t.buffer,ArrayBuffer))return d(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(W(t,SharedArrayBuffer)||t&&W(t.buffer,SharedArrayBuffer)))return d(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return c.from(n,e,r);const i=function(t){if(c.isBuffer(t)){const e=0|p(t.length),r=a(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!=typeof t.length||Y(t.length)?a(0):l(t);if("Buffer"===t.type&&Array.isArray(t.data))return l(t.data)}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function f(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return f(t),a(t<0?0:0|p(t))}function l(t){const e=t.length<0?0:0|p(t.length),r=a(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function d(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,c.prototype),n}function p(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function y(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||W(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Z(t).length;default:if(i)return n?-1:H(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,r);case"utf8":case"utf-8":return x(this,e,r);case"ascii":return S(this,e,r);case"latin1":case"binary":return N(this,e,r);case"base64":return T(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function w(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Y(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=c.from(e,n)),c.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,n,i){let s,o=1,a=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,a/=2,c/=2,r/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){let n=-1;for(s=r;s<a;s++)if(u(t,s)===u(e,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===c)return n*o}else-1!==n&&(s-=s-n),n=-1}else for(r+c>a&&(r=a-c),s=r;s>=0;s--){let r=!0;for(let n=0;n<c;n++)if(u(t,s+n)!==u(e,n)){r=!1;break}if(r)return s}return-1}function v(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;const s=e.length;let o;for(n>s/2&&(n=s/2),o=0;o<n;++o){const n=parseInt(e.substr(2*o,2),16);if(Y(n))return o;t[r+o]=n}return o}function E(t,e,r,n){return K(H(e,t.length-r),t,r,n)}function _(t,e,r,n){return K(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function B(t,e,r,n){return K(Z(e),t,r,n)}function I(t,e,r,n){return K(function(t,e){let r,n,i;const s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(e,t.length-r),t,r,n)}function T(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function x(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;for(;i<r;){const e=t[i];let s=null,o=e>239?4:e>223?3:e>191?2:1;if(i+o<=r){let r,n,a,c;switch(o){case 1:e<128&&(s=e);break;case 2:r=t[i+1],128==(192&r)&&(c=(31&e)<<6|63&r,c>127&&(s=c));break;case 3:r=t[i+1],n=t[i+2],128==(192&r)&&128==(192&n)&&(c=(15&e)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:r=t[i+1],n=t[i+2],a=t[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(c=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}return function(t){const e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=A));return r}(n)}c.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(t,e,r){return u(t,e,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(t,e,r){return function(t,e,r){return f(t),t<=0?a(t):void 0!==e?"string"==typeof r?a(t).fill(e,r):a(t).fill(e):a(t)}(t,e,r)},c.allocUnsafe=function(t){return h(t)},c.allocUnsafeSlow=function(t){return h(t)},c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(W(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),W(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=c.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(W(e,Uint8Array))i+e.length>n.length?(c.isBuffer(e)||(e=c.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!c.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},c.byteLength=y,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)b(this,e,e+1);return this},c.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)b(this,e,e+3),b(this,e+1,e+2);return this},c.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)b(this,e,e+7),b(this,e+1,e+6),b(this,e+2,e+5),b(this,e+3,e+4);return this},c.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?x(this,0,t):g.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){let t="";const r=e.h2;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},s&&(c.prototype[s]=c.prototype.inspect),c.prototype.compare=function(t,e,r,n,i){if(W(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;let s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(e>>>=0);const a=Math.min(s,o),u=this.slice(n,i),f=t.slice(e,r);for(let t=0;t<a;++t)if(u[t]!==f[t]){s=u[t],o=f[t];break}return s<o?-1:o<s?1:0},c.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},c.prototype.indexOf=function(t,e,r){return w(this,t,e,r,!0)},c.prototype.lastIndexOf=function(t,e,r){return w(this,t,e,r,!1)},c.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return E(this,t,e,r);case"ascii":case"latin1":case"binary":return _(this,t,e,r);case"base64":return B(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const A=4096;function S(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function N(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function R(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=e;n<r;++n)i+=J[t[n]];return i}function O(t,e,r){const n=t.slice(e,r);let i="";for(let t=0;t<n.length-1;t+=2)i+=String.fromCharCode(n[t]+256*n[t+1]);return i}function U(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,r,n,i,s){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function P(t,e,r,n,i){D(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,r}function F(t,e,r,n,i){D(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s>>=8,t[r+6]=s,s>>=8,t[r+5]=s,s>>=8,t[r+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o>>=8,t[r+2]=o,o>>=8,t[r+1]=o,o>>=8,t[r]=o,r+8}function k(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(t,e,r,n,s){return e=+e,r>>>=0,s||k(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function $(t,e,r,n,s){return e=+e,r>>>=0,s||k(t,0,r,8),i.write(t,e,r,n,52,8),r+8}c.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,c.prototype),n},c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||U(t,e,this.length);let n=this[t],i=1,s=0;for(;++s<e&&(i*=256);)n+=this[t+s]*i;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||U(t,e,this.length);let n=this[t+--e],i=1;for(;e>0&&(i*=256);)n+=this[t+--e]*i;return n},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t>>>=0,e||U(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||U(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||U(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||U(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||U(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readBigUInt64LE=Q((function(t){V(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||z(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),c.prototype.readBigUInt64BE=Q((function(t){V(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||z(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),c.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||U(t,e,this.length);let n=this[t],i=1,s=0;for(;++s<e&&(i*=256);)n+=this[t+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},c.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||U(t,e,this.length);let n=e,i=1,s=this[t+--n];for(;n>0&&(i*=256);)s+=this[t+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*e)),s},c.prototype.readInt8=function(t,e){return t>>>=0,e||U(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||U(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(t,e){t>>>=0,e||U(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||U(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||U(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readBigInt64LE=Q((function(t){V(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||z(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),c.prototype.readBigInt64BE=Q((function(t){V(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||z(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),c.prototype.readFloatLE=function(t,e){return t>>>=0,e||U(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||U(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||U(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||U(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){L(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=1,s=0;for(this[e]=255&t;++s<r&&(i*=256);)this[e+s]=t/i&255;return e+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){L(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=r-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigUInt64LE=Q((function(t,e=0){return P(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=Q((function(t,e=0){return F(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);L(this,t,e,r,n-1,-n)}let i=0,s=1,o=0;for(this[e]=255&t;++i<r&&(s*=256);)t<0&&0===o&&0!==this[e+i-1]&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+r},c.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);L(this,t,e,r,n-1,-n)}let i=r-1,s=1,o=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===o&&0!==this[e+i+1]&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+r},c.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigInt64LE=Q((function(t,e=0){return P(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=Q((function(t,e=0){return F(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(t,e,r){return j(this,t,e,!0,r)},c.prototype.writeFloatBE=function(t,e,r){return j(this,t,e,!1,r)},c.prototype.writeDoubleLE=function(t,e,r){return $(this,t,e,!0,r)},c.prototype.writeDoubleBE=function(t,e,r){return $(this,t,e,!1,r)},c.prototype.copy=function(t,e,r,n){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},c.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{const s=c.isBuffer(t)?t:c.from(t,n),o=s.length;if(0===o)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=s[i%o]}return this};const M={};function C(t,e,r){M[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function q(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function D(t,e,r,n,i,s){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let i;throw i=s>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new M.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,r){V(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||z(e,t.length-(r+1))}(n,i,s)}function V(t,e){if("number"!=typeof t)throw new M.ERR_INVALID_ARG_TYPE(e,"number",t)}function z(t,e,r){if(Math.floor(t)!==t)throw V(t,r),new M.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new M.ERR_BUFFER_OUT_OF_BOUNDS;throw new M.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}C("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),C("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),C("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=q(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=q(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const G=/[^+/0-9A-Za-z-_]/g;function H(t,e){let r;e=e||1/0;const n=t.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function Z(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function K(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function W(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Y(t){return t!=t}const J=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function Q(t){return"undefined"==typeof BigInt?X:t}function X(){throw new Error("BigInt not supported")}},645:(t,e)=>{e.read=function(t,e,r,n,i){var s,o,a=8*i-n-1,c=(1<<a)-1,u=c>>1,f=-7,h=r?i-1:0,l=r?-1:1,d=t[e+h];for(h+=l,s=d&(1<<-f)-1,d>>=-f,f+=a;f>0;s=256*s+t[e+h],h+=l,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=n;f>0;o=256*o+t[e+h],h+=l,f-=8);if(0===s)s=1-u;else{if(s===c)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),s-=u}return(d?-1:1)*o*Math.pow(2,s-n)},e.write=function(t,e,r,n,i,s){var o,a,c,u=8*s-i-1,f=(1<<u)-1,h=f>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,p=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),(e+=o+h>=1?l/c:l*Math.pow(2,1-h))*c>=2&&(o++,c/=2),o+h>=f?(a=0,o=f):o+h>=1?(a=(e*c-1)*Math.pow(2,i),o+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[r+d]=255&a,d+=p,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;t[r+d]=255&o,d+=p,o/=256,u-=8);t[r+d-p]|=128*y}},745:(t,e,r)=>{"use strict";const{URLWithLegacySupport:n,format:i,URLSearchParams:s,defaultBase:o}=r(49),a=r(939);t.exports={URL:n,URLSearchParams:s,format:i,relative:a,defaultBase:o}},939:(t,e,r)=>{"use strict";const{URLWithLegacySupport:n,format:i}=r(49);t.exports=(t,e={},r={},s)=>{let o,a=e.protocol?e.protocol.replace(":",""):"http";a=(r[a]||s||a)+":";try{o=new n(t)}catch(t){o={}}const c=Object.assign({},e,{protocol:a||o.protocol,host:e.host||o.host});return new n(t,i(c)).toString()}},49:t=>{"use strict";const e=self.location?self.location.protocol+"//"+self.location.host:"",r=self.URL;t.exports={URLWithLegacySupport:class{constructor(t="",n=e){this.super=new r(t,n),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(t){this.super.hash=t}set host(t){this.super.host=t}set hostname(t){this.super.hostname=t}set href(t){this.super.href=t}set origin(t){this.super.origin=t}set password(t){this.super.password=t}set pathname(t){this.super.pathname=t}set port(t){this.super.port=t}set protocol(t){this.super.protocol=t}set search(t){this.super.search=t}set searchParams(t){this.super.searchParams=t}set username(t){this.super.username=t}createObjectURL(t){return this.super.createObjectURL(t)}revokeObjectURL(t){this.super.revokeObjectURL(t)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}},URLSearchParams:self.URLSearchParams,defaultBase:e,format:function(t){if("string"==typeof t){return new r(t).toString()}if(!(t instanceof r)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",i=t.protocol?t.protocol+"//":"",s=t.host||"",o=t.hostname||"",a=t.search||(t.query?"?"+t.query:""),c=t.hash||"",u=t.pathname||"";return`${i}${e||r}${s||o+n}${t.path||u+a}${c}`}}}},155:t=>{var e,r,n=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(r){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var a,c=[],u=!1,f=-1;function h(){u&&a&&(u=!1,a.length?c=a.concat(c):f=-1,c.length&&l())}function l(){if(!u){var t=o(h);u=!0;for(var e=c.length;e;){for(a=c,c=[];++f<e;)a&&a[f].run();f=-1,e=c.length}a=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{return r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new d(t,e)),1!==c.length||u||o(l)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},419:function(t,e,r){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}(r(925));const i=n(r(996));e.value=i},925:function(t,e,r){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(996)),s=[ArrayBuffer,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array];class o{constructor(t,e=!1){this._serializer=t,this._stable=e,this.name="jsonDefault",this.priority=-100}match(t){return-1!=["undefined","boolean","number","string","object"].indexOf(typeof t)}encode(t){switch(typeof t){case"undefined":return i.undefined_();case"boolean":return i.bool(t);case"number":return Math.floor(t)===t?i.number(t):i.doubleFloat(t);case"string":return i.string(t);case"object":if(null===t)return i.null_();if(Array.isArray(t))return i.array(t.map((t=>this._serializer.serializeValue(t))));if(s.find((e=>t instanceof e)))return i.bytes(t.buffer);if(-1!==Object.getOwnPropertyNames(t).indexOf("toJSON"))return this.encode(t.toJSON());if(t instanceof Map){const e=new Map;for(const[r,n]of t.entries())e.set(r,this._serializer.serializeValue(n));return i.map(e,this._stable)}{const e=new Map;for(const[r,n]of Object.entries(t))e.set(r,this._serializer.serializeValue(n));return i.map(e,this._stable)}default:throw new Error("Invalid value.")}}}e.JsonDefaultCborEncoder=o;class a{constructor(){this.name="cborEncoder",this.priority=-90}match(t){return"object"==typeof t&&"function"==typeof t.toCBOR}encode(t){return t.toCBOR()}}e.ToCborEncoder=a;class c{constructor(){this._encoders=new Set}static withDefaultEncoders(t=!1){const e=new this;return e.addEncoder(new o(e,t)),e.addEncoder(new a),e}removeEncoder(t){for(const e of this._encoders.values())e.name==t&&this._encoders.delete(e)}addEncoder(t){this._encoders.add(t)}getEncoderFor(t){let e=null;for(const r of this._encoders)(!e||r.priority>e.priority)&&r.match(t)&&(e=r);if(null===e)throw new Error("Could not find an encoder for value.");return e}serializeValue(t){return this.getEncoderFor(t).encode(t)}serialize(t){return this.serializeValue(t)}}e.CborSerializer=c;e.SelfDescribeCborSerializer=class extends c{serialize(t){return i.raw(new Uint8Array([...new Uint8Array([217,217,247]),...new Uint8Array(super.serializeValue(t))]))}}},996:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=9007199254740992;function n(t,...e){const r=new Uint8Array(t.byteLength+e.reduce(((t,e)=>t+e.byteLength),0));r.set(new Uint8Array(t),0);let n=t.byteLength;for(const t of e)r.set(new Uint8Array(t),n),n+=t.byteLength;return r.buffer}function i(t,e,r){const n=2**(e-24);r=(r=r.replace(/[^0-9a-fA-F]/g,"")).slice(2*-n).padStart(2*n,"0");const i=[(t<<5)+e].concat(r.match(/../g).map((t=>parseInt(t,16))));return new Uint8Array(i).buffer}function s(t,e){if(e<24)return new Uint8Array([(t<<5)+e]).buffer;return i(t,e<=255?24:e<=65535?25:e<=4294967295?26:27,e.toString(16))}function o(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n<128?e.push(n):n<2048?e.push(192|n>>6,128|63&n):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=(1023&n)<<10|1023&t.charCodeAt(r),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return n(new Uint8Array(s(3,t.length)),new Uint8Array(e))}function a(t){return new Uint8Array(t).buffer}function c(t){if(isNaN(t))throw new RangeError("Invalid number.");t=Math.min(Math.max(0,t),23);return new Uint8Array([0+t]).buffer}function u(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return i(0,24,t=(t=Math.min(Math.max(0,t),255)).toString(16))}function f(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return i(0,25,t=(t=Math.min(Math.max(0,t),65535)).toString(16))}function h(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return i(0,26,t=(t=Math.min(Math.max(0,t),4294967295)).toString(16))}function l(t,e){if("string"==typeof t&&16==e){if(t.match(/[^0-9a-fA-F]/))throw new RangeError("Invalid number.");return i(0,27,t)}if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return i(0,27,t=(t=Math.min(Math.max(0,t),r)).toString(16))}function d(t){if(isNaN(t))throw new RangeError("Invalid number.");if(0===t)return c(0);t=Math.min(Math.max(0,-t),24)-1;return new Uint8Array([32+t]).buffer}function p(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return i(1,24,t=(t=Math.min(Math.max(0,-t-1),255)).toString(16))}function y(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return i(1,25,t=(t=Math.min(Math.max(0,-t-1),65535)).toString(16))}function g(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return i(1,26,t=(t=Math.min(Math.max(0,-t-1),4294967295)).toString(16))}function b(t,e){if("string"==typeof t&&16==e){if((t=t.startsWith("-")?t.slice(1):"0").match(/[^0-9a-fA-F]/)||t.length>16)throw new RangeError("Invalid number.");let e=!1,r=t.split("").reduceRight(((t,r)=>{if(e)return r+t;let n=parseInt(r,16)-1;return n>=0?(e=!0,n.toString(16)+t):"f"+t}),"");return e?i(1,27,r):l(0)}if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return i(1,27,t=(t=Math.min(Math.max(0,-t-1),9007199254740992)).toString(16))}function w(){return a(new Uint8Array([245]))}function m(){return a(new Uint8Array([244]))}e.tagged=function(t,e){if(14277111==t)return n(new Uint8Array([217,217,247]),e);if(t<24)return n(new Uint8Array([192+t]),e);{const e=t<=255?24:t<=65535?25:t<=4294967295?26:27,r=2**(e-24),n=t.toString(16).slice(2*-r).padStart(2*r,"0"),i=[192+e].concat(n.match(/../g).map((t=>parseInt(t,16))));return new Uint8Array(i).buffer}},e.raw=a,e.uSmall=c,e.u8=u,e.u16=f,e.u32=h,e.u64=l,e.iSmall=d,e.i8=p,e.i16=y,e.i32=g,e.i64=b,e.number=function(t){return t>=0?t<24?c(t):t<=255?u(t):t<=65535?f(t):t<=4294967295?h(t):l(t):t>=-24?d(t):t>=-255?p(t):t>=-65535?y(t):t>=-4294967295?g(t):b(t)},e.bytes=function(t){return n(s(2,t.byteLength),t)},e.string=function(t){return o(t)},e.array=function(t){return n(s(4,t.length),...t)},e.map=function(t,e=!1){t instanceof Map||(t=new Map(Object.entries(t)));let r=Array.from(t.entries());return e&&(r=r.sort((([t],[e])=>t.localeCompare(e)))),n(s(5,t.size),...r.map((([t,e])=>n(o(t),e))))},e.singleFloat=function(t){const e=new Float32Array([t]);return n(new Uint8Array([250]),new Uint8Array(e.buffer))},e.doubleFloat=function(t){const e=new Float64Array([t]);return n(new Uint8Array([251]),new Uint8Array(e.buffer))},e.bool=function(t){return t?w():m()},e.true_=w,e.false_=m,e.null_=function(){return a(new Uint8Array([246]))},e.undefined_=function(){return a(new Uint8Array([247]))}},10:(t,e,r)=>{"use strict";r.d(e,{D1:()=>f,Kd:()=>h,Mx:()=>u});var n=r(525),i=r(499);const s=BigInt(0),o=BigInt(1),a=new WeakMap,c=new WeakMap;function u(t,e){const r=(t,e)=>{const r=e.negate();return t?r:e},n=t=>{if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error(`Wrong window size=${t}, should be [1..${e}]`)},i=t=>{n(t);return{windows:Math.ceil(e/t)+1,windowSize:2**(t-1)}};return{constTimeNegate:r,unsafeLadder(e,r){let n=t.ZERO,i=e;for(;r>s;)r&o&&(n=n.add(i)),i=i.double(),r>>=o;return n},precomputeWindow(t,e){const{windows:r,windowSize:n}=i(e),s=[];let o=t,a=o;for(let t=0;t<r;t++){a=o,s.push(a);for(let t=1;t<n;t++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(e,n,s){const{windows:a,windowSize:c}=i(e);let u=t.ZERO,f=t.BASE;const h=BigInt(2**e-1),l=2**e,d=BigInt(e);for(let t=0;t<a;t++){const e=t*c;let i=Number(s&h);s>>=d,i>c&&(i-=l,s+=o);const a=e,p=e+Math.abs(i)-1,y=t%2!=0,g=i<0;0===i?f=f.add(r(y,n[a])):u=u.add(r(g,n[p]))}return{p:u,f}},wNAFCached(t,e,r){const n=c.get(t)||1;let i=a.get(t);return i||(i=this.precomputeWindow(t,n),1!==n&&a.set(t,r(i))),this.wNAF(n,i,e)},setWindowSize(t,e){n(e),c.set(t,e),a.delete(t)}}}function f(t,e,r,n){if(!Array.isArray(r)||!Array.isArray(n)||n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");n.forEach(((t,r)=>{if(!e.isValid(t))throw new Error(`wrong scalar at index ${r}`)})),r.forEach(((e,r)=>{if(!(e instanceof t))throw new Error(`wrong point at index ${r}`)}));const s=(0,i.bitLen)(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(t.ZERO),u=Math.floor((e.BITS-1)/o)*o;let f=t.ZERO;for(let e=u;e>=0;e-=o){c.fill(t.ZERO);for(let t=0;t<n.length;t++){const i=n[t],s=Number(i>>BigInt(e)&BigInt(a));c[s]=c[s].add(r[t])}let i=t.ZERO;for(let e=c.length-1,r=t.ZERO;e>0;e--)r=r.add(c[e]),i=i.add(r);if(f=f.add(i),0!==e)for(let t=0;t<o;t++)f=f.double()}return f}function h(t){return(0,n.OP)(t.Fp),(0,i.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,n.kK)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}},525:(t,e,r)=>{"use strict";r.d(e,{Eg:()=>v,IN:()=>E,OP:()=>w,PS:()=>T,Q:()=>m,Tu:()=>g,Us:()=>x,gN:()=>B,kK:()=>_,oA:()=>d,wQ:()=>h});var n=r(499);const i=BigInt(0),s=BigInt(1),o=BigInt(2),a=BigInt(3),c=BigInt(4),u=BigInt(5),f=BigInt(8);BigInt(9),BigInt(16);function h(t,e){const r=t%e;return r>=i?r:e+r}function l(t,e,r){if(r<=i||e<i)throw new Error("Expected power/modulo > 0");if(r===s)return i;let n=s;for(;e>i;)e&s&&(n=n*t%r),t=t*t%r,e>>=s;return n}function d(t,e,r){let n=t;for(;e-- >i;)n*=n,n%=r;return n}function p(t,e){if(t===i||e<=i)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=h(t,e),n=e,o=i,a=s,c=s,u=i;for(;r!==i;){const t=n/r,e=n%r,i=o-c*t,s=a-u*t;n=r,r=e,o=c,a=u,c=i,u=s}if(n!==s)throw new Error("invert: does not exist");return h(o,e)}function y(t){if(t%c===a){const e=(t+s)/c;return function(t,r){const n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw new Error("Cannot find square root");return n}}if(t%f===u){const e=(t-u)/f;return function(t,r){const n=t.mul(r,o),i=t.pow(n,e),s=t.mul(r,i),a=t.mul(t.mul(s,o),i),c=t.mul(s,t.sub(a,t.ONE));if(!t.eql(t.sqr(c),r))throw new Error("Cannot find square root");return c}}return function(t){const e=(t-s)/o;let r,n,a;for(r=t-s,n=0;r%o===i;r/=o,n++);for(a=o;a<t&&l(a,e,t)!==t-s;a++);if(1===n){const e=(t+s)/c;return function(t,r){const n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw new Error("Cannot find square root");return n}}const u=(r+s)/o;return function(t,i){if(t.pow(i,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let o=n,c=t.pow(t.mul(t.ONE,a),r),f=t.pow(i,u),h=t.pow(i,r);for(;!t.eql(h,t.ONE);){if(t.eql(h,t.ZERO))return t.ZERO;let e=1;for(let r=t.sqr(h);e<o&&!t.eql(r,t.ONE);e++)r=t.sqr(r);const r=t.pow(c,s<<BigInt(o-e-1));c=t.sqr(r),f=t.mul(f,r),h=t.mul(h,c),o=e}return f}}(t)}const g=(t,e)=>(h(t,e)&s)===s,b=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function w(t){const e=b.reduce(((t,e)=>(t[e]="function",t)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,n.validateObject)(t,e)}function m(t,e,r){if(r<i)throw new Error("Expected power > 0");if(r===i)return t.ONE;if(r===s)return e;let n=t.ONE,o=e;for(;r>i;)r&s&&(n=t.mul(n,o)),o=t.sqr(o),r>>=s;return n}function v(t,e){const r=new Array(e.length),n=e.reduce(((e,n,i)=>t.is0(n)?e:(r[i]=e,t.mul(e,n))),t.ONE),i=t.inv(n);return e.reduceRight(((e,n,i)=>t.is0(n)?e:(r[i]=t.mul(e,r[i]),t.mul(e,n))),i),r}function E(t){const e=(t-s)/o;return(t,r)=>t.pow(r,e)}function _(t,e){const r=void 0!==e?e:t.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function B(t,e,r=!1,o={}){if(t<=i)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:a,nByteLength:c}=_(t,e);if(c>2048)throw new Error("Field lengths over 2048 bytes are not supported");const u=y(t),f=Object.freeze({ORDER:t,BITS:a,BYTES:c,MASK:(0,n.bitMask)(a),ZERO:i,ONE:s,create:e=>h(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return i<=e&&e<t},is0:t=>t===i,isOdd:t=>(t&s)===s,neg:e=>h(-e,t),eql:(t,e)=>t===e,sqr:e=>h(e*e,t),add:(e,r)=>h(e+r,t),sub:(e,r)=>h(e-r,t),mul:(e,r)=>h(e*r,t),pow:(t,e)=>m(f,t,e),div:(e,r)=>h(e*p(r,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>p(e,t),sqrt:o.sqrt||(t=>u(f,t)),invertBatch:t=>v(f,t),cmov:(t,e,r)=>r?e:t,toBytes:t=>r?(0,n.numberToBytesLE)(t,c):(0,n.numberToBytesBE)(t,c),fromBytes:t=>{if(t.length!==c)throw new Error(`Fp.fromBytes: expected ${c}, got ${t.length}`);return r?(0,n.bytesToNumberLE)(t):(0,n.bytesToNumberBE)(t)}});return Object.freeze(f)}function I(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function T(t){const e=I(t);return e+Math.ceil(e/2)}function x(t,e,r=!1){const i=t.length,o=I(e),a=T(e);if(i<16||i<a||i>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${i}`);const c=h(r?(0,n.bytesToNumberBE)(t):(0,n.bytesToNumberLE)(t),e-s)+s;return r?(0,n.numberToBytesLE)(c,o):(0,n.numberToBytesBE)(c,o)}},499:(t,e,r)=>{"use strict";r.r(e),r.d(e,{aInRange:()=>A,abool:()=>c,abytes:()=>a,bitGet:()=>N,bitLen:()=>S,bitMask:()=>O,bitSet:()=>R,bytesToHex:()=>f,bytesToNumberBE:()=>g,bytesToNumberLE:()=>b,concatBytes:()=>_,createHmacDrbg:()=>P,ensureBytes:()=>E,equalBytes:()=>B,hexToBytes:()=>y,hexToNumber:()=>l,inRange:()=>x,isBytes:()=>o,memoized:()=>$,notImplemented:()=>j,numberToBytesBE:()=>w,numberToBytesLE:()=>m,numberToHexUnpadded:()=>h,numberToVarBytesBE:()=>v,utf8ToBytes:()=>I,validateObject:()=>k});const n=BigInt(0),i=BigInt(1),s=BigInt(2);function o(t){return t instanceof Uint8Array||null!=t&&"object"==typeof t&&"Uint8Array"===t.constructor.name}function a(t){if(!o(t))throw new Error("Uint8Array expected")}function c(t,e){if("boolean"!=typeof e)throw new Error(`${t} must be valid boolean, got "${e}".`)}const u=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function f(t){a(t);let e="";for(let r=0;r<t.length;r++)e+=u[t[r]];return e}function h(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function l(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}const d={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function p(t){return t>=d._0&&t<=d._9?t-d._0:t>=d._A&&t<=d._F?t-(d._A-10):t>=d._a&&t<=d._f?t-(d._a-10):void 0}function y(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let e=0,i=0;e<r;e++,i+=2){const r=p(t.charCodeAt(i)),s=p(t.charCodeAt(i+1));if(void 0===r||void 0===s){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}n[e]=16*r+s}return n}function g(t){return l(f(t))}function b(t){return a(t),l(f(Uint8Array.from(t).reverse()))}function w(t,e){return y(t.toString(16).padStart(2*e,"0"))}function m(t,e){return w(t,e).reverse()}function v(t){return y(h(t))}function E(t,e,r){let n;if("string"==typeof e)try{n=y(e)}catch(r){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${r}`)}else{if(!o(e))throw new Error(`${t} must be hex string or Uint8Array`);n=Uint8Array.from(e)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(`${t} expected ${r} bytes, got ${i}`);return n}function _(...t){let e=0;for(let r=0;r<t.length;r++){const n=t[r];a(n),e+=n.length}const r=new Uint8Array(e);for(let e=0,n=0;e<t.length;e++){const i=t[e];r.set(i,n),n+=i.length}return r}function B(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return 0===r}function I(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}const T=t=>"bigint"==typeof t&&n<=t;function x(t,e,r){return T(t)&&T(e)&&T(r)&&e<=t&&t<r}function A(t,e,r,n){if(!x(e,r,n))throw new Error(`expected valid ${t}: ${r} <= n < ${n}, got ${typeof e} ${e}`)}function S(t){let e;for(e=0;t>n;t>>=i,e+=1);return e}function N(t,e){return t>>BigInt(e)&i}function R(t,e,r){return t|(r?i:n)<<BigInt(e)}const O=t=>(s<<BigInt(t-1))-i,U=t=>new Uint8Array(t),L=t=>Uint8Array.from(t);function P(t,e,r){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=U(t),i=U(t),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...t)=>r(i,n,...t),c=(t=U())=>{i=a(L([0]),t),n=a(),0!==t.length&&(i=a(L([1]),t),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const r=[];for(;t<e;){n=a();const e=n.slice();r.push(e),t+=n.length}return _(...r)};return(t,e)=>{let r;for(o(),c(t);!(r=e(u()));)c();return o(),r}}const F={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||o(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function k(t,e,r={}){const n=(e,r,n)=>{const i=F[r];if("function"!=typeof i)throw new Error(`Invalid validator "${r}", expected function`);const s=t[e];if(!(n&&void 0===s||i(s,t)))throw new Error(`Invalid param ${String(e)}=${s} (${typeof s}), expected ${r}`)};for(const[t,r]of Object.entries(e))n(t,r,!1);for(const[t,e]of Object.entries(r))n(t,e,!0);return t}const j=()=>{throw new Error("not implemented")};function $(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(void 0!==i)return i;const s=t(r,...n);return e.set(r,s),s}}},527:(t,e,r)=>{"use strict";function n(t,...e){if(!((r=t)instanceof Uint8Array||null!=r&&"object"==typeof r&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function i(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function s(t,e){n(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}r.d(e,{Gg:()=>i,J8:()=>s,aI:()=>n})},359:(t,e,r)=>{"use strict";r.d(e,{VR:()=>a,bc:()=>s,l3:()=>o});var n=r(527),i=r(486);const s=(t,e,r)=>t&e^~t&r,o=(t,e,r)=>t&e^t&r^e&r;class a extends i.kb{constructor(t,e,r,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,i.GL)(this.buffer)}update(t){(0,n.Gg)(this);const{view:e,buffer:r,blockLen:s}=this,o=(t=(0,i.O0)(t)).length;for(let n=0;n<o;){const a=Math.min(s-this.pos,o-n);if(a!==s)r.set(t.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===s&&(this.process(e,0),this.pos=0);else{const e=(0,i.GL)(t);for(;s<=o-n;n+=s)this.process(e,n)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,n.Gg)(this),(0,n.J8)(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:s,isLE:o}=this;let{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let t=a;t<s;t++)e[t]=0;!function(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}(r,s-8,BigInt(8*this.length),o),this.process(r,0);const c=(0,i.GL)(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=u/4,h=this.get();if(f>h.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<f;t++)c.setUint32(4*t,h[t],o)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return t.length=n,t.pos=o,t.finished=i,t.destroyed=s,n%e&&t.buffer.set(r),t}}},748:(t,e,r)=>{"use strict";r.d(e,{JQ:()=>f,gX:()=>h});var n=r(359),i=r(486);const s=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),o=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint32Array(64);class c extends n.VR{constructor(){super(64,32,8,!1),this.A=0|o[0],this.B=0|o[1],this.C=0|o[2],this.D=0|o[3],this.E=0|o[4],this.F=0|o[5],this.G=0|o[6],this.H=0|o[7]}get(){const{A:t,B:e,C:r,D:n,E:i,F:s,G:o,H:a}=this;return[t,e,r,n,i,s,o,a]}set(t,e,r,n,i,s,o,a){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(t,e){for(let r=0;r<16;r++,e+=4)a[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=a[t-15],r=a[t-2],n=(0,i.np)(e,7)^(0,i.np)(e,18)^e>>>3,s=(0,i.np)(r,17)^(0,i.np)(r,19)^r>>>10;a[t]=s+a[t-7]+n+a[t-16]|0}let{A:r,B:o,C:c,D:u,E:f,F:h,G:l,H:d}=this;for(let t=0;t<64;t++){const e=d+((0,i.np)(f,6)^(0,i.np)(f,11)^(0,i.np)(f,25))+(0,n.bc)(f,h,l)+s[t]+a[t]|0,p=((0,i.np)(r,2)^(0,i.np)(r,13)^(0,i.np)(r,22))+(0,n.l3)(r,o,c)|0;d=l,l=h,h=f,f=u+e|0,u=c,c=o,o=r,r=e+p|0}r=r+this.A|0,o=o+this.B|0,c=c+this.C|0,u=u+this.D|0,f=f+this.E|0,h=h+this.F|0,l=l+this.G|0,d=d+this.H|0,this.set(r,o,c,u,f,h,l,d)}roundClean(){a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class u extends c{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const f=(0,i.hE)((()=>new c)),h=(0,i.hE)((()=>new u))},486:(t,e,r)=>{"use strict";r.d(e,{kb:()=>c,GL:()=>s,O6:()=>f,np:()=>o,O0:()=>a,hE:()=>u});const n="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var i=r(527);const s=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),o=(t,e)=>t<<32-e|t>>>e;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function a(t){return"string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),(0,i.aI)(t),t}class c{clone(){return this._cloneInto()}}function u(t){const e=e=>t().update(a(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function f(t=32){if(n&&"function"==typeof n.getRandomValues)return n.getRandomValues(new Uint8Array(t));if(n&&"function"==typeof n.randomBytes)return n.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,r),s.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t=r(764),e=r(200),n=r(313),i=r(688),s=r(472),o=r(753);const a=3e5;function c(){return function(...t){return async(e,r,n)=>{for(const i of t)await i(e,r,n)}}((t=function(){let t=!0;return async()=>!!t&&(t=!1,!0)}(),e=1e3,async(r,n,i)=>{if(await t(r,n,i))return new Promise((t=>setTimeout(t,e)))}),function(t,e){let r=t;return()=>new Promise((t=>setTimeout((()=>{r*=e,t()}),r)))}(1e3,1.2),function(t){const e=Date.now()+t;return async(r,n,i)=>{if(Date.now()>e)throw new Error(`Request timed out after ${t} msec:\n  Request ID: ${(0,o.NC)(n)}\n  Request status: ${i}\n`)}}(a));var t,e}var u=r(79);async function f(t,r,n,i=c(),a,h){var l;const d=[(new TextEncoder).encode("request_status"),n],p=null!=a?a:await(null===(l=t.createReadStateRequest)||void 0===l?void 0:l.call(t,{paths:[d]}));p.body.content.ingress_expiry=new e.ZM(u.F);const y=await t.readState(r,{paths:[d]},void 0,p);if(null==t.rootKey)throw new Error("Agent root key not initialized before polling");const g=await s.KB.create({certificate:y.certificate,rootKey:t.rootKey,canisterId:r,blsVerify:h}),b=(0,s.ti)(g.lookup([...d,(new TextEncoder).encode("status")]));let w;switch(w=void 0===b?e.bN.Unknown:(new TextDecoder).decode(b),w){case e.bN.Replied:return{reply:(0,s.ti)(g.lookup([...d,"reply"])),certificate:g};case e.bN.Received:case e.bN.Unknown:case e.bN.Processing:return await i(r,n,w),f(t,r,n,i,p,h);case e.bN.Rejected:{const t=new Uint8Array((0,s.ti)(g.lookup([...d,"reject_code"])))[0],e=(new TextDecoder).decode((0,s.ti)(g.lookup([...d,"reject_message"])));throw new Error(`Call was rejected:\n  Request ID: ${(0,o.NC)(n)}\n  Reject code: ${t}\n  Reject text: ${e}\n`)}case e.bN.Done:throw new Error(`Call was marked as done but we never saw the reply:\n  Request ID: ${(0,o.NC)(n)}\n`)}throw new Error("unreachable")}var h=r(543);const l=({IDL:t})=>{const e=t.Variant({mainnet:t.Null,testnet:t.Null}),r=t.Text,n=t.Record({network:e,address:r,min_confirmations:t.Opt(t.Nat32)}),i=t.Nat64,s=i,o=t.Record({network:e}),a=t.Nat64,c=t.Vec(a),u=t.Record({network:e,filter:t.Opt(t.Variant({page:t.Vec(t.Nat8),min_confirmations:t.Nat32})),address:r}),f=t.Vec(t.Nat8),h=t.Record({txid:t.Vec(t.Nat8),vout:t.Nat32}),l=t.Record({height:t.Nat32,value:i,outpoint:h}),d=t.Record({next_page:t.Opt(t.Vec(t.Nat8)),tip_height:t.Nat32,tip_block_hash:f,utxos:t.Vec(l)}),p=t.Record({transaction:t.Vec(t.Nat8),network:e}),y=t.Principal,g=t.Record({canister_id:y,num_requested_changes:t.Opt(t.Nat64)}),b=t.Variant({from_user:t.Record({user_id:t.Principal}),from_canister:t.Record({canister_version:t.Opt(t.Nat64),canister_id:t.Principal})}),w=t.Variant({creation:t.Record({controllers:t.Vec(t.Principal)}),code_deployment:t.Record({mode:t.Variant({reinstall:t.Null,upgrade:t.Null,install:t.Null}),module_hash:t.Vec(t.Nat8)}),controllers_change:t.Record({controllers:t.Vec(t.Principal)}),code_uninstall:t.Null}),m=t.Record({timestamp_nanos:t.Nat64,canister_version:t.Nat64,origin:b,details:w}),v=t.Record({controllers:t.Vec(t.Principal),module_hash:t.Opt(t.Vec(t.Nat8)),recent_changes:t.Vec(m),total_num_changes:t.Nat64}),E=t.Record({canister_id:y}),_=t.Variant({controllers:t.Null,public:t.Null}),B=t.Record({freezing_threshold:t.Nat,controllers:t.Vec(t.Principal),reserved_cycles_limit:t.Nat,log_visibility:_,wasm_memory_limit:t.Nat,memory_allocation:t.Nat,compute_allocation:t.Nat}),I=t.Record({status:t.Variant({stopped:t.Null,stopping:t.Null,running:t.Null}),memory_size:t.Nat,cycles:t.Nat,settings:B,query_stats:t.Record({response_payload_bytes_total:t.Nat,num_instructions_total:t.Nat,num_calls_total:t.Nat,request_payload_bytes_total:t.Nat}),idle_cycles_burned_per_day:t.Nat,module_hash:t.Opt(t.Vec(t.Nat8)),reserved_cycles:t.Nat}),T=t.Record({canister_id:y}),x=t.Record({freezing_threshold:t.Opt(t.Nat),controllers:t.Opt(t.Vec(t.Principal)),reserved_cycles_limit:t.Opt(t.Nat),log_visibility:t.Opt(_),wasm_memory_limit:t.Opt(t.Nat),memory_allocation:t.Opt(t.Nat),compute_allocation:t.Opt(t.Nat)}),A=t.Record({settings:t.Opt(x),sender_canister_version:t.Opt(t.Nat64)}),S=t.Record({canister_id:y}),N=t.Record({canister_id:y}),R=t.Record({canister_id:y}),O=t.Variant({secp256k1:t.Null}),U=t.Record({key_id:t.Record({name:t.Text,curve:O}),canister_id:t.Opt(y),derivation_path:t.Vec(t.Vec(t.Nat8))}),L=t.Record({public_key:t.Vec(t.Nat8),chain_code:t.Vec(t.Nat8)}),P=t.Record({canister_id:y}),F=t.Record({idx:t.Nat64,timestamp_nanos:t.Nat64,content:t.Vec(t.Nat8)}),k=t.Record({canister_log_records:t.Vec(F)}),j=t.Record({value:t.Text,name:t.Text}),$=t.Record({status:t.Nat,body:t.Vec(t.Nat8),headers:t.Vec(j)}),M=t.Record({url:t.Text,method:t.Variant({get:t.Null,head:t.Null,post:t.Null}),max_response_bytes:t.Opt(t.Nat64),body:t.Opt(t.Vec(t.Nat8)),transform:t.Opt(t.Record({function:t.Func([t.Record({context:t.Vec(t.Nat8),response:$})],[$],["query"]),context:t.Vec(t.Nat8)})),headers:t.Vec(j)}),C=t.Variant({reinstall:t.Null,upgrade:t.Opt(t.Record({wasm_memory_persistence:t.Opt(t.Variant({keep:t.Null,replace:t.Null})),skip_pre_upgrade:t.Opt(t.Bool)})),install:t.Null}),q=t.Record({hash:t.Vec(t.Nat8)}),D=t.Record({arg:t.Vec(t.Nat8),wasm_module_hash:t.Vec(t.Nat8),mode:C,chunk_hashes_list:t.Vec(q),target_canister:y,store_canister:t.Opt(y),sender_canister_version:t.Opt(t.Nat64)}),V=t.Vec(t.Nat8),z=t.Record({arg:t.Vec(t.Nat8),wasm_module:V,mode:C,canister_id:y,sender_canister_version:t.Opt(t.Nat64)}),G=t.Record({start_at_timestamp_nanos:t.Nat64,subnet_id:t.Principal}),H=t.Record({num_block_failures_total:t.Nat64,node_id:t.Principal,num_blocks_proposed_total:t.Nat64}),Z=t.Vec(t.Record({timestamp_nanos:t.Nat64,node_metrics:t.Vec(H)})),K=t.Record({settings:t.Opt(x),specified_id:t.Opt(y),amount:t.Opt(t.Nat),sender_canister_version:t.Opt(t.Nat64)}),W=t.Record({canister_id:y}),Y=t.Record({canister_id:y,amount:t.Nat}),J=t.Vec(t.Nat8),Q=t.Variant({ed25519:t.Null,bip340secp256k1:t.Null}),X=t.Record({key_id:t.Record({algorithm:Q,name:t.Text}),canister_id:t.Opt(y),derivation_path:t.Vec(t.Vec(t.Nat8))}),tt=t.Record({public_key:t.Vec(t.Nat8),chain_code:t.Vec(t.Nat8)}),et=t.Record({key_id:t.Record({name:t.Text,curve:O}),derivation_path:t.Vec(t.Vec(t.Nat8)),message_hash:t.Vec(t.Nat8)}),rt=t.Record({signature:t.Vec(t.Nat8)}),nt=t.Record({key_id:t.Record({algorithm:Q,name:t.Text}),derivation_path:t.Vec(t.Vec(t.Nat8)),message:t.Vec(t.Nat8)}),it=t.Record({signature:t.Vec(t.Nat8)}),st=t.Record({canister_id:y}),ot=t.Record({canister_id:y}),at=t.Record({canister_id:y}),ct=t.Vec(q),ut=t.Record({canister_id:y,sender_canister_version:t.Opt(t.Nat64)}),ft=t.Record({canister_id:t.Principal,settings:x,sender_canister_version:t.Opt(t.Nat64)}),ht=t.Record({chunk:t.Vec(t.Nat8),canister_id:t.Principal}),lt=q;return t.Service({bitcoin_get_balance:t.Func([n],[s],[]),bitcoin_get_current_fee_percentiles:t.Func([o],[c],[]),bitcoin_get_utxos:t.Func([u],[d],[]),bitcoin_send_transaction:t.Func([p],[],[]),canister_info:t.Func([g],[v],[]),canister_status:t.Func([E],[I],[]),clear_chunk_store:t.Func([T],[],[]),create_canister:t.Func([A],[S],[]),delete_canister:t.Func([N],[],[]),deposit_cycles:t.Func([R],[],[]),ecdsa_public_key:t.Func([U],[L],[]),fetch_canister_logs:t.Func([P],[k],["query"]),http_request:t.Func([M],[$],[]),install_chunked_code:t.Func([D],[],[]),install_code:t.Func([z],[],[]),node_metrics_history:t.Func([G],[Z],[]),provisional_create_canister_with_cycles:t.Func([K],[W],[]),provisional_top_up_canister:t.Func([Y],[],[]),raw_rand:t.Func([],[J],[]),schnorr_public_key:t.Func([X],[tt],[]),sign_with_ecdsa:t.Func([et],[rt],[]),sign_with_schnorr:t.Func([nt],[it],[]),start_canister:t.Func([st],[],[]),stop_canister:t.Func([ot],[],[]),stored_chunks:t.Func([at],[ct],[]),uninstall_code:t.Func([ut],[],[]),update_settings:t.Func([ft],[],[]),upload_chunk:t.Func([ht],[lt],[])})};class d extends n.e${constructor(t,e,r,n){super(["Call failed:",`  Canister: ${t.toText()}`,`  Method: ${e} (${r})`,...Object.getOwnPropertyNames(n).map((t=>`  "${t}": ${JSON.stringify(n[t])}`))].join("\n")),this.canisterId=t,this.methodName=e,this.type=r,this.props=n}}class p extends d{constructor(t,r,n){var i;super(t,r,"query",{Status:n.status,Code:null!==(i=e.ur[n.reject_code])&&void 0!==i?i:`Unknown Code "${n.reject_code}"`,Message:n.reject_message}),this.result=n}}class y extends d{constructor(t,e,r,n,i,s,a){super(t,e,"update",Object.assign({"Request ID":(0,o.NC)(r)},n.body?Object.assign(Object.assign({},a?{"Error code":a}:{}),{"Reject code":String(i),"Reject message":s}):{"HTTP status code":n.status.toString(),"HTTP status text":n.statusText})),this.requestId=r,this.response=n,this.reject_code=i,this.reject_message=s,this.error_code=a}}const g=Symbol.for("ic-agent-metadata");class b{constructor(t){this[g]=Object.freeze(t)}static agentOf(t){return t[g].config.agent}static interfaceOf(t){return t[g].service}static canisterIdOf(t){return h.R.from(t[g].config.canisterId)}static async install(t,e){const r=void 0===t.mode?{install:null}:t.mode,n=t.arg?[...new Uint8Array(t.arg)]:[],i=[...new Uint8Array(t.module)],s="string"==typeof e.canisterId?h.R.fromText(e.canisterId):e.canisterId;await B(e).install_code({mode:r,arg:n,wasm_module:i,canister_id:s,sender_canister_version:[]})}static async createCanister(t,e){const{canister_id:r}=await B(t||{}).provisional_create_canister_with_cycles({amount:[],settings:function(t){return[{controllers:t.controllers?[t.controllers]:[],compute_allocation:t.compute_allocation?[t.compute_allocation]:[],freezing_threshold:t.freezing_threshold?[t.freezing_threshold]:[],memory_allocation:t.memory_allocation?[t.memory_allocation]:[],reserved_cycles_limit:[],log_visibility:[],wasm_memory_limit:[]}]}(e||{}),specified_id:[],sender_canister_version:[]});return r}static async createAndInstallCanister(t,e,r){const n=await this.createCanister(r);return await this.install(Object.assign({},e),Object.assign(Object.assign({},r),{canisterId:n})),this.createActor(t,Object.assign(Object.assign({},r),{canisterId:n}))}static createActorClass(t,e){const r=t({IDL:i.xO});return class extends b{constructor(t){if(!t.canisterId)throw new n.e$(`Canister ID is required, but received ${typeof t.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);const i="string"==typeof t.canisterId?h.R.fromText(t.canisterId):t.canisterId;super({config:Object.assign(Object.assign(Object.assign({},m),t),{canisterId:i}),service:r});for(const[n,i]of r._fields)(null==e?void 0:e.httpDetails)&&i.annotations.push(v),(null==e?void 0:e.certificate)&&i.annotations.push(E),this[n]=_(this,n,i,t.blsVerify)}}}static createActor(t,e){if(!e.canisterId)throw new n.e$(`Canister ID is required, but received ${typeof e.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);return new(this.createActorClass(t))(e)}static createActorWithHttpDetails(t,e){return new(this.createActorClass(t,{httpDetails:!0}))(e)}static createActorWithExtendedDetails(t,e,r={httpDetails:!0,certificate:!0}){return new(this.createActorClass(t,r))(e)}}function w(e,r){const n=i.xO.decode(e,t.lW.from(r));switch(n.length){case 0:return;case 1:return n[0];default:return n}}const m={pollingStrategyFactory:c},v="http-details",E="certificate";function _(t,r,o,a){let c;c=o.annotations.includes("query")||o.annotations.includes("composite_query")?async(n,...s)=>{var a,c;const u=(n=Object.assign(Object.assign({},n),null===(c=(a=t[g].config).queryTransform)||void 0===c?void 0:c.call(a,r,s,Object.assign(Object.assign({},t[g].config),n)))).agent||t[g].config.agent||(0,e.us)(),f=h.R.from(n.canisterId||t[g].config.canisterId),l=i.xO.encode(o.argTypes,s),d=await u.query(f,{methodName:r,arg:l,effectiveCanisterId:n.effectiveCanisterId}),y=Object.assign(Object.assign({},d.httpDetails),{requestDetails:d.requestDetails});switch(d.status){case"rejected":throw new p(f,r,d);case"replied":return o.annotations.includes(v)?{httpDetails:y,result:w(o.retTypes,d.reply.arg)}:w(o.retTypes,d.reply.arg)}}:async(c,...u)=>{var l,d;const p=(c=Object.assign(Object.assign({},c),null===(d=(l=t[g].config).callTransform)||void 0===d?void 0:d.call(l,r,u,Object.assign(Object.assign({},t[g].config),c)))).agent||t[g].config.agent||(0,e.us)(),{canisterId:b,effectiveCanisterId:_,pollingStrategyFactory:B}=Object.assign(Object.assign(Object.assign({},m),t[g].config),c),I=h.R.from(b),T=void 0!==_?h.R.from(_):I,x=i.xO.encode(o.argTypes,u);if(null==p.rootKey)throw new n.e$("Agent root key not initialized before making call");const{requestId:A,response:S,requestDetails:N}=await p.call(I,{methodName:r,arg:x,effectiveCanisterId:T});let R,O;if(S.body&&S.body.certificate){const t=S.body.certificate;O=await s.KB.create({certificate:(0,i.rS)(t),rootKey:p.rootKey,canisterId:h.R.from(b),blsVerify:a});const e=[(new TextEncoder).encode("request_status"),A];switch((new TextDecoder).decode((0,s.ti)(O.lookup([...e,"status"])))){case"replied":R=(0,s.ti)(O.lookup([...e,"reply"]));break;case"rejected":{const t=new Uint8Array((0,s.ti)(O.lookup([...e,"reject_code"])))[0],n=(new TextDecoder).decode((0,s.ti)(O.lookup([...e,"reject_message"]))),i=(0,s.ti)(O.lookup([...e,"error_code"])),o=i?(new TextDecoder).decode(i):void 0;throw new y(I,r,A,S,t,n,o)}}}else if(S.body&&"reject_message"in S.body){const{reject_code:t,reject_message:e,error_code:n}=S.body;throw new y(I,r,A,S,t,e,n)}if(202===S.status){const t=B(),e=await f(p,T,A,t,a);O=e.certificate,R=e.reply}const U=o.annotations.includes(v),L=o.annotations.includes(E),P=Object.assign(Object.assign({},S),{requestDetails:N});if(void 0!==R)return U&&L?{httpDetails:P,certificate:O,result:w(o.retTypes,R)}:L?{certificate:O,result:w(o.retTypes,R)}:U?{httpDetails:P,result:w(o.retTypes,R)}:w(o.retTypes,R);if(0===o.retTypes.length)return U?{httpDetails:S,result:void 0}:void 0;throw new Error(`Call was returned undefined, but type [${o.retTypes.join(",")}].`)};const u=(...t)=>c({},...t);return u.withOptions=t=>(...e)=>c(t,...e),u}function B(t){function e(e,r){if(t.effectiveCanisterId)return{effectiveCanisterId:h.R.from(t.effectiveCanisterId)};const n=r[0];let i=h.R.fromHex("");return n&&"object"==typeof n&&n.canister_id&&(i=h.R.from(n.canister_id)),{effectiveCanisterId:i}}return b.createActor(l,Object.assign(Object.assign(Object.assign({},t),{canisterId:h.R.fromHex("")}),{callTransform:e,queryTransform:e}))}r(538),r(244),r(6);r(819),r(583),r(80);r(696),r(257),r(774);const I=({IDL:t})=>t.Service({greet:t.Func([t.Text],[t.Text],["query"])});var T=r(155);const x=T.env.CANISTER_ID_HELLO,A=x?((t,r={})=>{const n=r.agent||new e.i7({...r.agentOptions});return r.agent&&r.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),"ic"!==T.env.DFX_NETWORK&&n.fetchRootKey().catch((t=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(t)})),b.createActor(I,{agent:n,canisterId:t,...r.actorOptions})})(x):void 0;document.querySelector("form").addEventListener("submit",(async t=>{t.preventDefault(),document.getElementById("greeting").innerText="";const e=document.getElementById("loader"),r=t.target.querySelector("button"),n=document.getElementById("name").value.toString();e.style.visibility="visible",r.setAttribute("disabled",!0),document.getElementById("name").setAttribute("disabled",!0);const i=await A.greet(n);return e.style.visibility="hidden",r.removeAttribute("disabled"),document.getElementById("name").removeAttribute("disabled"),document.getElementById("greeting").innerText=i,!1}))})()})();